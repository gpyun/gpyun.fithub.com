var fph , gt , ph=process.cwd().replace("\\" , "/")
gt= require(ph + '/getfile')
gt   =    new gt("") 
htm.panhtm = htm("html").context
var pl, ht=require("http") , php
htm(htm.panhtm.activeElement).css("margin",1/1000)
var title = htm("title").text() , np =require("nw.gui") , f=require("fs")
htm.p={all: { }}
htm("svg").css( {float:"left"   , height : htm(window).height()} )
pl=htm("foreignObject").height(htm(window).height())
gt.ft= (h, hh, t)=>(gt.lpath=h, t ? gt.set(hh, t) :gt.get(hh))
fph= np.App.dataPath.replace(/淘多惠.*/,"淘多惠\\")//
gt.ft(fph + "l" , "l","l")

php = ph.replace(/(.*\\).*/ , (l,ll)=>ll) + "ph"
htm.pal=np.Window.get()


function jpg(rr , fl , aaa){
 fl=fl + ".jpg"
 //console.log(rr,fl)
 function aa(l){
  l=gt.ft(fph + "l" ,  fl)
  //console.log(l ? "t" : "f")
  if(l){
     //console.log("l")
           if(aaa)  aaa(fph + "\\l\\" + fl)//htm("title").animate({height: "+1"} , 1000 , aaa)
           return
   }
    if(ra=="ra"){
           ra=""
           ht.get(rr, function (r) {
                r.pipe(f.createWriteStream(fph + "\\l\\" + fl))
           })
   }
   //console.log("r")
   htm("title").animate({height: "+1"} , 1000 , aa)
 }
 var ra="ra"
 aa()
}








htm.getScript("color.htm").then(()=> htm("style").html(htm("style").html().replace(/htm\.(co(?:lor)?)\.([a-z]*)/g , (aa,l,a)=>htm[l][a])))
htm.pal.show(true)
htm.contain(pl.css({float: "left",background:"url(l.jpg)"}) , {ty:"|" , all:{
                               ll:{
                                   pn:1,
                                  html: (pl.tap=htm("<button blue>")).text("淘宝帐号登录").css({"margin" : "200px" , width : 190}).click(function(ll){
                                                                    pl.tap.width(pl.tap.width())
                                                                    pl.contain.animate([0,100,0])
                                                                    htm("title").text("淘宝帐号登录")
                                                                    pl.tap.html("<htm htm=hn animate>")
                                                                    pl.tap.css("opacity" , 6/10000000)
                                                                    ll=()=>htm("<pl>").height(3).animate({height: 100} , 1000 , function(l ,t){
                                                                                l=(pl.aa.contentWindow).location.host , console.log("aaa",l)
                                                                                if(l== "www.alimama.com" ? (l=htm(".menu-username" , pl.aa.contentDocument)[0]) : ""){
																																								


                                                                                    pl.tap.css("opacity" , 100)
																																										htm(pl.aa).css( {"marginLeft" : -9000 })
																																										l=htm(".menu-username" , pl.aa.contentDocument)[0]
																																										//if("lg" in htm ? "" : l){
																																										htm.lg = l
																																										pl.aa.src="http://h5.m.taobao.com/mlapp/mytaobao.html"   
																																										return
                                                                                  }

                                                                                  ll()
                                                                    })
                                                                     ll()
                                                    })
                                  } ,
                               l:{pn: 0 , html:pl.aa=htm("<iframe nwfaketop width=" + pl.width() + " height=" + pl.height() + " src=https://login.taobao.com/member/login.jhtml?style=mini&newMini2=true&from=alimama&redirectURL=http%3A%2F%2Flogin.taobao.com%2Fmember%2Ftaobaoke%2Flogin.htm%3Fis_login%3d1&full_redirect=true&disableQuickLogin=true>")[0]} ,
                               a:{
                                  pn: 0 , 
                                  transform: "translateZ(1000px)" 
                               }
                              }
               })
                  


pl.pn= function(aaa, l , t){//console.log(htm("table a"))
                if((l=pl.aa.contentDocument) ? (l= htm("table a" , l))[30]  : "") {
                           //t=np.Window.get()
                           //htm.pal.show(!!"")
                           htm("svg , foreignObject").width(htm.pal.width= px= screen.availWidth)//
                           htm("svg , foreignObject").height((htm.pal.height= py= screen.availHeight - 20) - 6)
                           pl.contain.animate([0,0,100])
                           htm(pl.a).css( {float:"left" , background: htm.co.htm , width : "100%" })//screen.availWidth
                           htm("title").text(title)
                           htm.pal.x=1
                           htm.pal.y=1
                           if (1911 > screen.availWidth){
                                htm(pl.a).css( {transform : "scale(" +  px/ 1911 + "," + py/1060 + ")" , "transform-origin" : "top left" })
                                htm(pl.a).width(1911).height(1060)
                             }
                            //htm(l).text()
                           htm.p.pn = l.attr("data-spm-click").replace(/^.*?&pvid=|[^_]*?&.*/g , "")
                           t= pl.aa.contentDocument.cookie
                           htm.p.token= t.replace(/^.*(?=\_tb\_token)/ , "").replace(/\;.*/ , "")
                           pl.aa.get=(pl.aa.contentWindow ).$.get
                           ap(pl.a)
                           //t=pl.aa.get("http://pub.alimama.com/common/adzone/adzoneManage.json?tab=3&toPage=1&perPageSize=40&gcid=8&t=" + ((t= htm.now()) + 100) + "&pvid=" + htm.p.pn + t  + "&_input_charset=utf-8" + "&" + htm.p.token )
                           if(aaa=="aaa"){
                                 htm(   "tl pl")[3].tap(htm("pl",p.map.lf)[3].textContent)
                                 //pal.setAlwaysOnTop(!!"")
                             }
                           return
                 }
                 htm("title").animate({height: "+1000"} , 1000 , pl.pn)
}              

pl.aa.onload = function(l ,t){console.log("l", l , (pl.aa.contentWindow).location.host)
        if((pl.aa.contentWindow).location.host == "login.taobao.com"){
            if(htm(window).width() > 600){  
                         htm( "foreignObject").css( {float: "left" ,  background: htm.co.htm } ).html()
                         pl.aa.src="http://h5.m.taobao.com/mlapp/mytaobao.html"
                         return 
            }

             return
          }
        if((pl.aa.contentWindow).location.host == "h5.m.taobao.com"){
                l=()=> (htm.tl=htm("#J_myNick" , pl.aa.contentDocument).text()) ? (//htm.panhtm.cookie="tl=" + htm.tl , 
                                           htm.get("http://47.94.133.178/log.php?tl=" + htm.tl , function(a,aa , tl){//http://taodh.net
                                                  if(a){
                                                        htm(pl.ll).html(tl=htm("<iframe>").attr("src" , "http://h5.m.taobao.com/mlapp/mytaobao.html").css( {transform: "translateX(-9000px)"}).load(function l(a){//console.log("aaa" , ~~a)
                                                               htm.aa = htm("img", tl.contents()).attr("src")
                                                               if(htm.aa == "//gw.alicdn.com/tfscom/TB1_n4PKXXXXXcYXXXXNx3t4VXX-120-120.jpg_q30" & 100 > (~~a)) return htm("<pl>").height(3).animate({height: 100} ,1000 , ()=>l(~~a+1))
                                                               if(pl.aaa) pl.aaa.attr("src" , "http:" + htm.aa)
                                                                      htm(pl.ll).html("")
                                                        }))
                                                        return pl.pn(pl.aa.src="http://pub.alimama.com/promo/search/index.htm?q=%E4%B8%9C%E5%8C%97%E7%BA%A2%E8%8A%B8%E8%B1%86&type=table?")
                                                   }
                                                   pl.log()
                                                  
                                           })) 
                         : htm("<pl>").height(3).animate({height: 100} ,100 , l )
                l()
          }
} 




pl.log = function(){
                  pl.contain.animate([100,0,0])
                  htm(pl.ll).css( { textAlign: "center" ,  background: htm.co.htm } )
                  htm.contain(pl.ll , {all:[
                                            { } ,
                                            {html: "<h3>欢迎注册淘多惠</h3>"} ,
                                            {html: htm("<p>").html("<label>会员号:</label><a color=green>" + htm.tl + "</a>").css( { textAlign: "left" , marginLeft: 200 }) } ,
                                            {html: htm("<p>").html("<label>注册码:</label><input>").css( { textAlign: "left" , marginLeft: 200 }).click(()=> htm(pl.ll.a6).text("")) } ,
                                            {html: htm('<a href="tencent://message/?uin=202198823">联络客服免费拿注册码</a>')} ,
                                            {html: htm("<input blue type=button value=' 注 册 ' >").click(function(l){
                                                                      l= htm(":text" , pl.ll).val()
																																			if(l){
																																						htm.get("http://47.94.133.178/lg.php?l=" + l + "&tl=" + htm.tl , function(a){//http://taodh.net
																																									if(a=="ok"){
																																										pl.pn()  
																																										pl.aa.src="http://pub.alimama.com/promo/search/index.htm?q=%E4%B8%9C%E5%8C%97%E7%BA%A2%E8%8A%B8%E8%B1%86&type=table?"
																																										return htm(pl.ll.a6).text("注册淘多惠成功")
																																									 }
																																									 htm(pl.ll.a6).text("注册码错误")
																																						 })
																																						 return
																																			 }
																																				htm(pl.ll.a6).text("注册码错误")
                                             })} ,
                                            { }
                                           ]
                   })

}
function ap(p , l){
               l={}
               
               function tap(ra, ar){
                         if(p.a.val()=="") if(p.yp.tl.textContent==" 商 品 ") p.a.val("冻米花生糕酥") 
                          var r=[]  ,  arr
                          ar= htm.now()
                          r= r.map.call(htm("input" , p.ar) , function(a,aa){
                                    a=htm(a)
                                    if(a.attr("tt")=="t"){
                                             if(aa=a.attr("shopTag")){
                                                      r= r.concat(aa)
                                                      return a.attr("t")
                                              }
                                              return a.val()== "天猫" ? "userType=1" : a.val()=="所有"? "" : "userType=0"
                                     }
                                    if(a.attr("type")=="number"){
                                           aa= a.val()
                                           return aa > 0 ? (a.attr("t") + "=" + aa) : "" 
                                     }
                                     return a.prop("checked") ? (((aa=a.attr("shopTag")) ? (r=r.concat(aa)) : "") , a.attr("t")) : ""
                          }).join("&") + (r[0] ? ("&shopTag=" +   r.join("%2C")) : "&shopTag=") 
                          arr= htm.now()
                          r =r.replace(/\&+/g ,"&")
                          htm.p.r = r
                          ra=ra? htm.p.pa ? Math.max( 1 , Math.min(ra , htm.p.pa[1])) : 1 : 1
                          ra=ra >= 1 ? ra : 1
                          r= (p.yp.tl.textContent==" 商 品 " ? "http://pub.alimama.com/items/search.json?" + htm.param({q: p.a.val()}) : "http://pub.alimama.com/items/channel/qqhd.json?" + htm.param({q: p.a.val()})  + "&channel=qqhd") + "&_t=" + ar + "&type=table&toPage=" + ra + "&auctionTag=&perPageSize=40&" + r + (htm.p.th ? htm.p.th : "") + "&t=" + htm.now() + "&" + htm.p.token + "&" + "pvid=" + htm.p.pn + arr
                          
                          pl.aa.get(r ,function(a , aa ,aaa){
                                if(a? a.data : ""){
                                   aa=a.info ? a.info.pvid : ""
                                   if(aa) htm.p.pn=    aa.replace(/\_[0-9]{10,}/ , "_")
                                   aa=pl.pla.p.width()
                                   htm.p.pa = [ ra , (aaa= (a.data.paginator ?  a.data.paginator["items"]  : "" ) / 40 ) == ~~aaa ? aaa : 1 + ~~aaa  ]
                                   p.pa.html(htm.p.pa.join("/"))
                                   a= a.data.pageList
                                   if(a){
                                         a=a.map(function(l , p , ll){
                                            p= htm.panhtm.createElement("li")
                                            //p.r=[ l.title.replace(/\<[^\>]*?\>/g ,  "") , l.zkPrice , l.tkCommFee , l.tkRate , l.totalNum , l.totalFee , l.couponAmount]
                                            ll= function(a, aa){
                                                            aa=""
                                                            if(l.tkSpecialCampaignIdRateMap){ 
                                                             for (a in l.tkSpecialCampaignIdRateMap){
                                                                     aa=  aa> l.tkSpecialCampaignIdRateMap[a] ? aa : l.tkSpecialCampaignIdRateMap[a]
                                                             }
                                                           }
                                                             a = l.eventRate > l.tkRate ? l.eventRate : l.tkRate 
                                                             a= aa > a ? aa : a 
                                                             if(a==l.eventRate) return "<t>" + a + "</t><tl><ttl>鹊</ttl></tl>"  
                                                             if(a==l.tkRate) return "<t>" + a + "</t>"
                                                             return "<t>" + a + "</t><tl green><ttl>定</ttl></tl>"  
                                            }
                                            p.r=[l.auctionUrl.replace(/^.*\=/  , "") , l.pictUrl , l.eventRate > l.tkRate ? l.eventRate + "鹊" : l.tkRate ]
                                            htm(p).width(aa)
                                            
                                            htm.contain(p  , {ty: "|" ,
                                                                             all:[
                                                                                  {pn:  6.3 , text: l.title.replace(/\<[^\>]*?\>/g ,  "") } ,
                                                                                  {text: l.zkPrice} ,
                                                                                  {text: l.tkCommFee} ,
                                                                                  {html: ll   } ,
                                                                                  {pn: 1 ,text:l.totalNum} ,
                                                                                  {pn:1 ,text:l.totalFee} ,
                                                                                  {pn:1 ,text:l.couponAmount}
                                                                                 ] ,
                                                                             })
                                           return p
                                         })
                                       pl.pla.p.html(a)
                                       htm("li:even" , pl.pla.p).css( {"float" : "left" , background: htm.co.lieven } )
                                   }
                               }
                          })
          }
          htm.tap=tap
               
          htm.contain(p , {all:{
                                pl:{
                                    pn: "60px" ,
                                    background: htm.co.top ,
                                    textAlign: "center" ,
                                      contain : {
                                                 ty: "|" ,
                                                 all:{
                                                       lf: {pn: "130px" ,html: htm("<img src=lg.gif>").height("100%").width("100%")} ,
                                                       tt: {html:htm("<pl>").html("这可以用作放一些系统升级，优惠等") , lineHeight: "60px"} ,
                                                       rp: {pn: "200px" ,html:"<p>淘淘提醒你：在</p>" + "<p>前记得续费啰</p>" , opacity: "0.9" ,  lineHeight: "19px" , "zoom" : 0.9 }
                                                    }
                                               }
                                  } ,
                               map:{
                                    contain :{
                                              ty: "|" ,
                                              all:{
                                                   lf: {
                                                        pn: "122px" ,
                                                        tag: "<tl>" ,
                                                        background: htm.co.left ,
                                                          contain:{
                                                                  all:[
                                                                       {
                                                                        html:"<a htm=home> 主 页 </a>" ,
                                                                        tap: function(){
                                                                                         p.rpy.contain.animate( [ "26px" , 100 , "26px" , 100 , "26px" ] )
                                                                                         p.yp.aa.width(htm(p.yp.a).width())
                                                                                         htm(p.yp.tt).html("")
                                                                                         htm(p.yp.rt).html("")
                                                                                         htm(p.yp.tl).html(htm("<a htm=mail>系统信</a>").css( {float : "left" , width: 200 } ))
                                                                                         
                                                                                         htm(p.ypr.tl).html("<a htm=text> F A Q </a>")
                                                                                         htm(p.ypr.rt).html("<a htm=qq> 在 线 </a>").click(()=> location="tencent://message/?uin=202198823")
                                                                                           //p.yp.a.contain.animate( [0 , 100] )
                                                                                         htm(p.yp.a.tl).css( {marginLeft :  - px })
                                                                                         //htm(p.yp.a.tl ).width("0")
                                                                                         //htm(p.yp.a.rt ).width("100%")
                                                                                         htm(p.ypr.a.rt).html("")
                                                                                         //p.ar.h.css( {marginLeft: "-30000px" } )
                                                                                         //htm(p.yp.a).html(htm("<p>这放一些文章和教程</p>").css( {margin: 30}))
                                                                                         //htm(p.ypr.a).html(htm("<p>这可放一些问答</p>").css( {margin: 30}))
                                                                            }
                                                                        } , 
                                                                     {
                                                                      html: "<a htm=lpl> 商 品 </a>" ,
                                                                         tap:p.tap= function(a){
                                                                                          //pl.pla.attr("src",  "a.htm")
                                                                                          p.rpy.contain.animate( [ "16px" , 22 , "26px" , 11 , "16px" ] )
                                                                                          pl.pla.p.html("")
                                                                                          htm(p.yp.tl).html("<a htm=text>" + a + "</a>")
                                                                                          htm(p.yp.tt).html([
                                                                                                             htm("<pl>").width("calc(100% - 30px)").html(p.a= htm("<input type=text>").width("calc(100% + 30px)")) , 
                                                                                                             htm("<pl>").html(p.lpl  = htm("<a htm=lpl>").css( {marginLeft : "1px" })).css( {"width" : 30}).click(tap)
                                                                                                            ])
                                                                                          htm.contain(p.yp.rt , {ty: "|" , all: [
                                                                                                                                 {html:htm("<a htm=lp>").click(function(){tap(~-htm.p.pa[0])}) }  ,
                                                                                                                                 {pn: 2 , html: p.pa= htm("<a>").css("marginLeft" , "auto") } ,
                                                                                                                                 {html:htm("<a htm=pla>").click(function(){tap(htm.p.pa[0] + 1)})}
                                                                                                                                ]
                                                                                                               })
                                                                                           p.ar.h.css( {marginLeft: "" } )
                                                                                          htm(p.ypr.tl).html("<a htm=h> 详 情 </a>")
                                                                                          htm(p.ypr.rt).html("")
                                                                                          htm(p.yp.a.tl ).width("100%")
                                                                                          htm(p.yp.a.rt ).width(~~"")
                                                                                          pl.pla.css("transform" , "")
                                                                                          htm(p.yp.a.tl).css( {marginLeft : ""})
                                                                                          htm.a.th.contain.contents().map((l,ll)=>htm(ll).html(["<a>商品(<t>鼠标左键+Alt</t>可让商品到推广栏,点触右则<t>深色</t>标题可排序)<ht htm=right></a>", "价格<htm>","佣金","最强比率<htm>","月推广<htm>","月派佣<htm>","优惠券",""][l]))
                                                                                          htm.contain(p.ypr.a.rt ,{all:[
                                                                                                                     {contain: {ty:"|" , all:[ 
                                                                                                                                              {pn: "1px" , html: p.ypr.a.rt.l= htm("<pl >").css({textAlign: "center"}).html(htm("<a animate>")) },                                                                                                                                                     
                                                                                                                                              {tag: p.jpg = htm.panhtm.createElement("pl") , html:p.ypr.a.rt.p=htm("<img par>").css({height:  "calc(100% - 20px)" , width: "calc(100% - 20px)" ,  margin:  10 })} 
                                                                                                                                             ] }   ,
                                                                                                                      }    ,
                                                                                                                     {pn: "60px" , textAlign: "center" , tag: p.ypr.a.rt.pl=htm("<pl>")}   ,
                                                                                                                     {pn: "60px" , textAlign: "center" , contain : {ty:"|" , all:[
                                                                                                                                                                    {html: p.la = htm("<button blue pyy>").text("进入商品店铺").click(function(lp ,pla){
                                                                                                                                                                          if(  p.la.text()=="进入商品店铺"){
                                                                                                                                                                                  np.Window.open("https://item.taobao.com/item.htm?spm=a219t.7900221/10.1998910419.d78498155.eqPvZ5&id=" + p.ypr.a.rt.hl.r[0] , {width: 1000, height: 600})
                                                                                                                                                                                  return
                                                                                                                                                                           }
                                                                                                                                                                          if(  p.la.text()=="ok"){
                                                                                                                                                                                  //htm.p.ll= eval(p.jpg.ll.val().replace("mm_","[").replace(/\_/g , ",") + "]")
                                                                                                                                                                                  htm.p.tr= ("<p>" + htm.a.jpg.tr.val().replace(/\n/g , "</p><p>") + "</p>").replace("{图片}" , '<img src="{图片}"') 
                                                                                                                                                                                  pla=[]
                                                                                                                                                                                  lp= htm("[l=ok]" , pl.pla.p).toArray()
                                                                                                                                                                                  
                                                                                                                                                                                  lp.map(function(l){
                                                                                                                                                                                                       //if(l.ll?l.ll.图片: "") return  
                                                                                                                                                                                                       jpg(  "http:" + l.r[ 1 ] + "_300x300.jpg" , l.r[0]   , function(p){
                                                                                                                                                                                                                l.图片=p    
                                                                                                                                                                                                                pla.push(p)              
                                                                                                                                                                                                       })
                                                                                                                                                                                  })
                                                                                                                                                                                  
                                                                                                                                                                                 

                                                                                                                                                                                   htm(p.jpg).html(pl.pl = htm("<iframe width='100%' height='100%' src='a.htm'>"))
																																																																																									 pl.pl.load(function lpl(){
																																																																																																					if(pla.length == lp.length){
                                                                                                                                                                                                            htm("style" , pl.pl.contents()).html(htm("style" , pl.pl.contents()).html().replace(/htm\.(co(?:lor)?)\.(鹊|定|[a-z]*)/g , (aa,l,a)=>htm[l][a]))
																																																																																																						pl.pl.pl= htm("alt" , pl.pl.contents())
																																																																																																						pla = lp.map(function(l,pla){
																																																																																																																 pla = htm.p.tr
																																																																																																																 l.ll.图片 = l.图片
																																																																																																																 l.ll.constructor.keys(l.ll).map(a=>pla=pla.replace("{" + a + "}" , l.ll[a]))
																																																																																																																 return htm("<li>").html(pla).attr("hr" , "http:" + l.r[ 1 ] + "_300x300.jpg")
																																																																																																						})
																																																																																																						pl.pl.pl.html(pla)
																																																																																																						p.la.css("opacity" , ~~"")
																																																																																																						p.ra.css("opacity" , ~~"")
																																																																																																						htm.contain(p.ypr.a.rt.pl , {ty:"|", all: [
																																																																																																																										{html:htm("<input type=button value=用QQ宣传 blue >").click(function(lp){
																																																																																																																																		 gt.ft(fph + "QQ" , "~这文件夹用来放qq号码","l")
																																																																																																																																		 np.Shell.showItemInFolder(fph + "QQ\\~这文件夹用来放qq号码")
																																																																																																																																		 if(prompt("打开你桌面QQ并登录，哪个qq号码或群号码需宣传，便拉他进这个文件夹" , "已经全部放进文件夹")){
																																																																																																																																			if(prompt("打开登录QQ，但不打开会话窗口"     , "ok")){
																																																																																																																																			 if(lt= prompt('QQ发信频率，速度（秒/次）, 建议大于或等于10' , "60")){
																																																																																																																																									 
																																																																																																																																									 lt= lt ? lt > 1 ? lt * 1000 : 1000 : 10000 
																																																																																																																																									 pl.qq(lt)
																																																																																																																																			 }
																																																																																																																																			}}
																																																																																																																										 })  ,
																																																																																																																										 marginTop : 30
																																																																																																																										} ,
																																																																																																																									 {html:htm("<input type=button value=用微信宣传 blue >").click(function(){
																																																																																																																																			 if(lt= prompt('微信发信频率，速度（秒/次）, 建议大于或等于10' , "60")){
																																																																																																																																											 lt= lt ? lt > 1 ? lt * 1000 : 1000 : 10000
																																																																																																																																											 pl.qql(lt)
																																																																																																																																				 }
																																																																																																																										 })  ,
																																																																																																																										 marginTop : 30
																																																																																																																										} ,
																																																																																																																									 {html:htm('<input type=button value=" 返 回 " blue >').click(function(){
																																																																																																																																		 htm("[l=ok]" , pl.pla.p).attr("l","")
																																																																																																																																		 htm("pl",p.map.lf)[3].tap(htm("pl",p.map.lf)[3].textContent)    
																																																																																																																																		 htm(p.ypr.aa).html("")
																																																																																																																										})  ,
																																																																																																																										marginTop : 30
																																																																																																																									 }]
																																																																																																						})
                                                                                                                                                                                                             return
                                                                                                                                                                                                       }
                                                                                                                                                                                                       htm("<p>").height(3).animate({height: 100} , 1000 , lpl)
																																																																																															})
																																																																																															
																																																																																										}
                                                                                                                                                                                                                       
                                                                                                                                                                                                     
                                                                                                                                                                                  //})} ,
                                                                                                                                                                           
                                                                                                                                                                            /* l=p.ypr.a.rt.p.attr("src")
                                                                                                                                                                             if( l == "c:/pl/" + p.ypr.a.rt.hl.r[0] + ".jpg"){
                                                                                                                                                                                           
                                                                                                                                                                                             return  
                                                                                                                                                                              }
                                                                                                                                                                             jpg(p.ypr.a.rt.p.attr("src") , "c:/pl/" + p.ypr.a.rt.hl.r[0] + ".jpg" , function(){
                                                                                                                                                                                                     htm("[par]").attr("src" , "c:/pl/" + p.ypr.a.rt.hl.r[0] + ".jpg")
                                                                                                                                                                                                     htm("[pyy]").click()
                                                                                                                                                                              })*/
                                                                                                                                                                    })} ,
                                                                                                                                                                    {html:p.ra=htm("<button blue>").text("加入到推广栏").click(function(){
                                                                                                                                                                            if(p.ra.text()=="加入到推广栏"){
                                                                                                                                                                                      pl.al()
                                                                                                                                                                                      return
                                                                                                                                                                              }
                                                                                                                                                                            if(p.ra.text()=="返回"){
                                                                                                                                                                                 htm("[l=ok]" , pl.pla.p).attr("l","")
                                                                                                                                                                                 htm("pl",p.map.lf)[3].tap(htm("pl",p.map.lf)[3].textContent)
                                                                                                                                                                             }
                                                                                                                                                                    })}
                                                                                                                                                                   ]}}
                                                                                                                          ]})
                                                                            }
                                                                        } ,
                                                                       {
                                                                         html: "<a htm=ch> 鹊 桥 </a>" ,
                                                                         tap: p.tap
                                                                        } ,
                                                                       
                                                                         
                                                                         
                                                                         
                                                                         
                                                                         
                                                                         
                                                                         
                                                                         
                                                                         
                                                                         
                                                                         
                                                                         
                                                                         
                                                                         
                                                                         
                                                                         
                                                                         
                                                                         
                                                                         
                                                                         
                                                                         
                                                                        
                                                                        {
                                                                         html: "<a htm=hn> 推 广 </a>" ,
                                                                         tap:  function(a , aa){
                                                                                          //pl.pla.attr("src") == "a.htm" ? ""    : pl.pla.attr("src",  "a.htm")
                                                                                          p.tap()
                                                                                          p.rpy.contain.animate( [ "16px" , 22 , "26px" , 11 , "16px" ] )
                                                                                          htm(p.yp.tl).html("<a htm=hn>" + a + "</a>")
                                                                                          htm(p.yp.tt).html('"制作推广专页"入口')
                                                                                          htm(p.ypr.tl).html("<a htm=h> 详 情 </a>")
                                                                                          htm(p.ypr.rt).html("")
                                                                                          htm(p.yp.a.tl ).width("100%")
                                                                                          htm.a.th.contain.contents().map((l,ll)=>htm(ll).text(["商品(鼠标左键+Alt可修改商品)", "价格","计佣比率","最强比率","月推广","月派佣","",""][l]))
                                                                                          htm(p.yp.a.rt ).width(~~"")
                                                                                          //htm(p.yp.rt).html("")
                                                                                           pl.pla.css("transform" , "")
                                                                                          htm(p.yp.a.tl).css( {marginLeft : ""}) 
                                                                                     p.ar.h.css( {marginLeft: ~ pl.pla.width() , width : p.ar.width() })
                                                                                     
                                                                                                         
                                                                                                         aa=[]
                                                                                                         htm.p.all.constructor.keys(htm.p.all).map(function(l , p , ll){
                                                                                                               l= htm.p.all[l]
                                                                                                               if(l){ 
                                                                                                                     p= htm.panhtm.createElement("li")
                                                                                                                     htm(p).width(pl.pla.width())
                                                                                                                     p.r= l.l
                                                                                                                     p.ll=l.ll
                                                                                                                     l=l.map((a,aa)=> aa ? (aa==2 | aa==3) ? {html: ("<t>" + a + "</t>").replace(/鹊\<\/t\>/ , "</t><tl><ttl>鹊</ttl></tl>").replace(/定\<\/t\>/ , "</t><tl green><ttl>定</ttl></tl>") }
                                                                                                                                                      : {text: a} : {pn: 6 , text : a} )
                                                                                                                     htm.contain(p  , {ty: "|" , all:l })
                                                                                                                        htm(p.a6).html("<input type=checkbox>")
                                                                                                                      aa.push(p)
                                                                                                                 }
                                                                                                        })
                                                                                                        
                                                                                                        pl.pla.p.html(aa)
                                                                                                        htm("li [type=checkbox]" ,   pl.pla.p).css("pointer-events" , "auto")
                                                                                                        htm("htm",htm.a.th).attr("htm","")
                                                                                     //a()
                                                                                        htm(p.yp.rt).html(htm("<pl>").css( {textAlign: "left" }).html(htm( "<button blue>储存以及设置</button>").click(function (aa , t){
																																																								aa=[]
																																																								htm.p.all.constructor.keys(htm.p.all).map(function(l){
																																																										 
																																																										 if(l=htm.p.all[l]){
																																																													 aa.push('{l:["' +  l.l.join('","') + '"] , a:["' + l.join('","')  + '"] , ll:{' +  l.ll.constructor.keys(l.ll).map(a=>a + ':"' + l.ll[a] + '"') + '}}')
																																																											}
																																																								})
																																																								localStorage["l"] =  "[" + aa + "]"

																																																								if(htm("[l=ok]" , pl.pla.p).length){  
																																																												htm("li [type=checkbox]" , pl.pla.p).css("pointer-events" , "")
																																																													htm(p.ypr.tl).html("<a htm=lg> 设 置 </a>")
																																																													htm(p.jpg).css( {transform: "translateY(1px)" , background: htm.co.contain})
																																																													p.la.text("ok")
																																																													p.ra.text("返回")
																																																												 p.ypr.a.rt.pl.html("")
																																																																							//l=[]
																																																																							//aa.responseText.replace(/adzonePid\"\:\"(mm(?:\_[0-9]*)*?)\"/g, (aa,a)=>l=l.concat(a))
																																																													 htm.contain(p.jpg, {all:[
																																																																									{pn:"60px" , html:"<h3>宣传图文设置<h3>" , marginTop: "11px"} ,
																																																																									{pn:"2px" , html:"<hr>"} ,
																																																																									{pn:"60px" , html:"插入:<label>{图片}</label> ,<label>{标题}</label> ,<label>{价格}</label> ，<label>{合长链}</label>,<label>{长链} </label>，<label>{合淘口令}</label> , <label>{淘口令}</label> , <label>{二维码}</label> , <label>{合链}</label> , <label>{链}</label> " } ,
																																																																									{pn:"26px" , html:"注意：若商品提供优惠券，那{合长链},{合链}和{合淘口令} 为二合一链"} ,
																																																																									{html: p.jpg.tr = htm("<textarea>").width(300).height("90%").text("大优惠\n{图片}\n{标题}\n抢购价:【￥{价格}】\n内部优惠入口:{合链}")}
																																																																								 ]
																																																																})
																																																																htm(">*",p.jpg).css( "marginLeft"  , 6 )
																																																													 return
																																																									 }
																																																									 alert("你未选择商品")
																																																									 //htm("pl",p.map.lf)[3].tap()
																																												 })))
                                                                         }
                                                                        } ,
                                                                       
                                                                       
                                                                       {
                                                                         html: "<a htm=h> 利 润 </a>" ,
                                                                          tap:     function(l , lh){
                                                                                                   p.rpy.contain.animate( [ "30px" , 100 , "30px" , "1px" , "1px" ] )
                                                                                                   htm(p.yp.tl).html(htm("<a htm=h> 利 润 </a>").css( {float : "left" , width: 200 } ))
                                                                                                   htm(p.yp.tt).html("")
                                                                                                   htm(p.yp.rt).html("")
                                                                                                   htm(p.ypr.tl).html("")
                                                                                                   htm(p.ypr.rt).html("")
                                                                                                   pl.pla.css( {    transform : "translateY(-60px)"})
                                                                                                   htm(p.yp.a.tl).css( {marginLeft : ""})
                                                                                                   pl.pla.p.html(l= htm("<label >").html(htm("<htm htm=hn animate>")).css( {float:  "left" , transform  : "scale(10)" } ))//.width(htm(p.yp.a).width())
                                                                                                   l.css( "margin" , (pl.pla.height() - l.height())/ 2 + "px " + (pl.pla.width() - l.width()) / 2 + "px" )
                                                                                                   //pl.pla.attr("src")== "http://pub.alimama.com/myunion.htm?#!/report/detail/taoke" ? "" : pl.pla.attr("src",     "http://pub.alimama.com/myunion.htm?#!/report/detail/taoke")
                                                                                                   p.yp.aa.html(lh = htm("<iframe>").attr("src" , "http://pub.alimama.com/myunion.htm?#!/report/detail/taoke").width("100%").height("90%")).width(htm(p.yp.a).width())
                                                                                                   l=(a)=> htm("<pl>").height(3).animate({height: 100} ,100 ,function(ll){
                                                                                                                     ll=htm("th" , lh.contents()).text() ? htm("#alimama-footer" , lh.contents()).text() : ""
                                                                                                                     if(ll ? "a" : a >= 100 ){
                                                                                                                            if(htm(p.yp.tl).text()==" 利 润 "){
                                                                                                                                  htm("html" , lh.contents()).css("transform"     , "translateX(-200px) translateY( -200px)")
                                                                                                                                  htm(".message-trigger, .message-panel, .wxrobot-trigger, #muxfb-global-emitter" , lh.contents()).css( "right" , lh.width() + 200 )

                                                                                                                                  htm("#alimama-footer" , lh.contents()).css("transform" , "translateX(-9000px)")
                                                                                                                                  htm(".wrapper" , lh.contents()).width(lh.width() + 200)
                                                                                                                                  htm(".table" , lh.contents()).height(lh.height() - 290)
                                                                                                                                  htm("th" , lh.contents()).map((l,ll)=>htm(ll).text(htm(ll).text()))
                                                                                                                                  htm(".tip" , lh.contents()).text("")
                                                                                                                                  htm(".main~*" , lh.contents()).contents().contents("ul").width(3)
                                                                                                                                  htm(p.yp.a.tl).css( {marginLeft : - px})
                                                                                                                                  pl.pla.p.html("")
                                                                                                                               }
                                                                                                                            return
                                                                                                                        
                                                                                                                        }
                                                                                                                        l(++a)
                                                                                                   })
                                                                                                   l(~~"")
                                                                                                   
                                                                                   }
                                                                        } ,
                                                                       
                                                                       
                                                                       
                                                                       {html: '<a htm=lg> 设 置 </a>' ,
                                                                          tap:     function(a , aa){
                                                                                                   htm(p.yp.tl).html(htm("<a htm=h> 设 置 </a>").css( {float : "left" , width: 200 } ))
                                                                                                   p.rpy.contain.animate( [ "30px" , 100 , "30px" , "1px" , "1px" ] )
                                                                                                   htm(p.yp.rt).html("")
                                                                                                   htm(p.ypr.tl).html("")
                                                                                                   htm(p.ypr.rt).html("")
                                                                                                   pl.pla.css( {    transform : "translateY(-60px)"})
                                                                                                   htm(p.yp.a.tl).css( {marginLeft : ""})
                                                                                                   htm(p.yp.tt).html(aa=htm("<pl>"))
                                                                                                   htm.contain(aa.css( "margin" , 10) ,{ty:"|" , all:{
                                                                                                                                                        l:{pn: "100px" , html:htm('<input type=button value=" 储 存 " blue >').click(function(l){
                                                                                                                                                                              gt.ft("" , "color.htm" , l = "htm.co = {" + [].map.apply(htm("input[l]" , pl.pla.p) , [(a=> htm(a).attr("l") + ":'" + a.value + "'") ]) + "} , htm.color = {" + [].map.apply(htm("input[t]" , pl.pla.p) , [(a=> htm(a).attr("t") + ":'" + a.value + "'") ]) + "} , htm.tt = '" + htm("textarea",pl.pla.p).val() + "'")
                                                                                                                                                                              htm(aa.t).text("储存设置成功")
                                                                                                                                                                              
                                                                                                                                                                              
                                                                                                                                                                              
                                                                                                                                                                              
                                                                                                                                                                              eval(l)
                                                                                                                                                                              gt.ft("", "pl.htm").replace(/\{(?:.|\r|\n)*\}/ , a=> l=a)
                                                                                                                                                                              //console.log(l)
                                                                                                                                                                              htm("style").html(l.replace(/htm\.(co(?:lor)?)\.([a-z]*)/g , (aa,l,a)=>htm[l][a]))
                                                                                                                                                                              //console.log(htm("style").html())
                                                                                                                                                                              gt.ft("", "a.htm").replace(/\{(?:.|\r|\n)*\}/ , a=> l=a)
                                                                                                                                                                              htm("style" , pl.pla.contents()).html(l.replace(/htm\.(co(?:lor)?)\.([a-z]*)/g , (aa,l,a)=>htm[l][a]))
                                                                                                                                                                              ap(pl.a)
                                                                                                                                                           })} ,
                                                                                                                                                        t:{tag:"<label>"  , lineHeight: "30px"}
                                                                                                                                                       }
                                                                                                    })
                                                                                                   //pl.pla.attr("src") == "a.htm" ? pl.pla.p.html("")    : pl.pla.attr("src",  "a.htm")
                                                                                                   //a=()=> htm("<pl>").height(3).animate({height: 100} ,100 , function(al , aa){
                                                                                                              //al=pl.pla.prop ? htm("alt" , pl.pla.prop("contentDocument")).length : ""
                                                                                                              //if(al){
                                                                                                                      pl.pla.p = htm("alt" , pl.pla.prop("contentDocument"))
                                                                                                                      pl.pla.p.html([
                                                                                                                                      "<h3>定向审核范文</h3>" ,
                                                                                                                                      htm("<textarea>").val(htm.tt).width(300) ,
                                                                                                                                      "<hr>",
                                                                                                                                      "<h3>背景色配色</h3>" ,
                                                                                                                                      "<p><a>软件:</a><input type=color l=htm value='" + htm.co.htm + "'></p>" ,
                                                                                                                                      "<p><a>最上部:</a><input type=color l=top value='" + htm.co.top + "'></p>" ,
                                                                                                                                      "<p><a>左部导向条:</a><input type=color l=left value='" + htm.co.left + "'></p>" ,
                                                                                                                                      "<p><a>左部导向鼠标悬浮:</a><input type=color l=lefthover value='" + htm.co.lefthover + "'></p>" ,
                                                                                                                                      "<p><a>主区域:</a><input type=color l=contain value='" + htm.co.contain + "'></p>" ,
                                                                                                                                      "<p><a>主区域标题条:</a><input type=color l=containtl value='" + htm.co.containtl + "'></p>" ,
                                                                                                                                      "<p><a>利润域:</a><input type=color l=money value='" + htm.co.money + "'></p>" ,
                                                                                                                                      "<p><a>商品表格标题条:</a><input type=color l=thall value='" + htm.co.thall + "'></p>" ,
                                                                                                                                      "<p><a>商品表格标题:</a><input type=color l=th value='" + htm.co.th + "'></p>" ,
                                                                                                                                      "<p><a>弹窗:</a><input type=color l=pl value='" + htm.co.pl + "'></p>" ,
                                                                                                                                      "<p><a>输入框:</a><input type=color l=input value='" + htm.co.input + "'></p>" ,
                                                                                                                                      "<p><a>鹊桥:</a><input type=color l=鹊 value='" + htm.co.鹊 + "'></p>" ,
                                                                                                                                      "<p><a>定向:</a><input type=color l=定 value='" + htm.co.定 + "'></p>" ,
                                                                                                                                      "<p><a>商品条:</a><input type=color l=lieven value='" + htm.co.lieven + "'></p>" ,
                                                                                                                                      "<p><a>宣传商品条:</a><input type=color l=li value='" + htm.co.li + "'></p>" ,
                                                                                                                                      "<p><a>商品条鼠标点触:</a><input type=color l=hoverli value='" + htm.co.hoverli + "'></p>",
                                                                                                                                      "<hr>",
                                                                                                                                      "<h3>文字配色</h3>" ,
                                                                                                                                      "<p><a>软件:</a><input type=color t=htm value='" + htm.color.htm + "'></p>" ,
                                                                                                                                      "<p><a>左部导向条:</a><input type=color t=left value='" + htm.color.left + "'></p>" ,
                                                                                                                                      "<p><a>左部导向鼠标点触:</a><input type=color t=lefton value='" + htm.color.lefton + "'></p>" ,
                                                                                                                                      "<p><a>旋转圈动画:</a><input type=color t=animate value='" + htm.color.animate + "'></p>" ,
                                                                                                                                      "<p><a>标签:</a><input type=color t=label value='" + htm.color.label + "'></p>" ,
                                                                                                                                      "<p><a>主区域:</a><input type=color t=contain value='" + htm.color.contain + "'></p>" ,
                                                                                                                                      "<p><a>主区域标题条:</a><input type=color t=containtl value='" + htm.color.containtl + "'></p>" ,
                                                                                                                                      "<p><a>推广商品条:</a><input type=color t=li value='" + htm.color.li + "'></p>" ,
                                                                                                                                      "<p><a>鹊桥:</a><input type=color t=鹊 value='" + htm.color.鹊 + "'></p>" ,
                                                                                                                                      "<p><a>定向:</a><input type=color t=定 value='" + htm.color.定 + "'></p>" ,
                                                                                                                                      "<p><a>输入框:</a><input type=color t=input value='" + htm.color.input + "'></p>"
                                                                                                                                   ])
                                                                                   }
                                                                        }
                                                                       ]
                                                                      } ,
                                                                 textAlign: "center"
                                                          },
                                                     rp: {}
                                                    }
                                                }
                                    }
          }})

         htm.contain(p.map.rp ,{
                                all:{
                                     pf:{
                                         pn: "100px" ,
                                        contain: {ty:"|" ,
                                                  all: {l: {pn: "30px"} ,
                                                        aaa: {pn: "100px" , html: pl.aaa=htm("<img>").attr("src" , "http:" + htm.aa) .width(100).height(100)} , //"https://wwc.alicdn.com/avatar/getAvatar.do?width=100&height=100&type=sns"
                                                        yy: {pn:   "200px" , html: htm.tl + " ,欢迎你" , attr:{color: "green"} ,  marginLeft: 10 , lineHeight: "100px"} ,
                                                        aal: {
                                                              pn: 3 ,
                                                             contain: {ty:"|",
                                                                       all:{
                                                                            l:{html: htm("<pl>").html(["<p>30天笔数</p>" , "<p></p>" ]).css( {margin: 10 , width: "90%" , background: htm.co.money , height: "90%" }).corner("100px") } ,
                                                                            p:{html: htm("<pl>").html(["<p>30天效果</p>" , "<p></p>" ]).css( {margin: 10 , width: "90%" , background: htm.co.money , height: "90%" }).corner("100px") } ,
                                                                            lp:{html: htm("<pl>").html(["<p>30天收入</p>" , "<p></p>" ]).css( {margin: 10 , width: "90%" , background: htm.co.money , height: "90%" }).corner("100px") }
                                                                          }
                                                                     } ,
                                                             textAlign: "center"
                                                            } ,
                                                        pay: {
                                                              contain: {all:[
                                                                             {html:htm("<button blue>进入alimama提款</button>").click(()=> open('https://media.alimama.com/account/account.htm')) } ,
                                                                             {html: p.hh= htm("<pl>")}
                                                                       
                                                                            ]} ,
                                                             
                                                             textAlign: "center" , 
                                                             lineHeight: "51px"
                                                            } ,
                                                          ll: {pn: "30px"}
                                                      }
                                                }
                                       } ,
                                     pl:{
                                         contain:{all:[ 
                                                        "16px" ,
                                                        {
                                                         tag: p.rpy = htm.panhtm.createElement("pl") ,
                                                       contain: {ty:"|", all:[
                                                                              "16px",
                                                                              {
                                                                                background:   htm.co.containtl   ,
                                                                                tag:htm("<pl>").corner() ,
                                                                                  contain:{
                                                                                           all:[
                                                                                                { 
                                                                                                 pn:"60px", 
                                                                                                 tag:p.yp = htm.panhtm.createElement("pla") ,  
                                                                                                 lineHeight:"60px" ,
                                                                                                 contain:{
                                                                                                          ty: "|" ,
                                                                                                          all:{
                                                                                                                tl:{pn:"100px"} , 
                                                                                                                tt: { } ,
                                                                                                                rt:{pn:"100px" , textAlign:"right"}
                                                                                                              } , 
                                                                                                         }
                                                                                               } ,
                                                                                                {pn: "2px" , html:"<hr/>"} ,
                                                                                                {
                                                                                                   background:   htm.co.contain   ,
                                                                                                   tag: p.yp.a = htm.panhtm.createElement("pl") ,
                                                                                                 contain:{
                                                                                                          ty: "|" ,
                                                                                                          all:{
                                                                                                                rt:{
                                                                                                                    pn:"1px" ,
                                                                                                                    
                                                                                                                    //background: "#aa6af6"
                                                                                                                  },
                                                                                                                tl:{
                                                                                                                    //html: htm("<pl>") ,  
                                                                                                                  }  
                                                                                                                
                                                                                                              } , 
                                                                                                         }
                                                                                               }
                                                                                              ]
                                                                                            }
                                                                                } , 
                                                                               "26px",
                                                                               {
                                                                                background:   htm.co.containtl   ,
                                                                                tag:htm("<pl>").corner() ,
                                                                                   contain:{
                                                                                           all:[
                                                                                                { 
                                                                                                 pn:"60px", tag:p.ypr = htm.panhtm.createElement("pla") ,  
                                                                                                 lineHeight:"60px" ,
                                                                                                 contain:{
                                                                                                          ty: "|" ,
                                                                                                          all:{
                                                                                                                tl:{} ,
                                                                                                                rt:{textAlign:"right"} 
                                                                                                              } , 
                                                                                                         }
                                                                                                } ,
                                                                                                 {pn: "2px" , html:"<hr/>"} ,
                                                                                                 {
                                                                                                  background:      htm.co.contain ,
                                                                                                  tag:p.ypr.a = htm.panhtm.createElement("pl"),  contain:{ty: "|" ,all:{
                                                                                                                                                     tl:{pn: "1px"} ,
                                                                                                                                                     rt:{}  
                                                                                                                                                    }
                                                                                                                                     }
                                                                                                  }
                                                                                                ]
                                                                                            }
                                                                                } , 
                                                                                "16px" ]}
                                                        } , 
                                                        "16px"
                                                      ]}
                                       }
                                   }
          })
          htm(p.yp.a.rt).html(p.yp.aa= htm("<pl>").width(htm(p.yp.a.tl).width()))
          
          htm(p.ypr.a.tl).html(htm(p.ypr.aa= htm.panhtm.createElement("pl")).width(htm(p.ypr.a.rt).width()))
          
          p.hh.ll=pl.aa.get("http://pub.alimama.com/common/adzone/adzoneManage.json?tab=3&toPage=1&perPageSize=40&gcid=8&t=" + ((p.hh.ll=htm.now()) + 100) + "&" + "pvid=" + htm.p.pn+ p.hh.ll + "&" + htm.p.token + "&_input_charset=utf-8") ,
				  p.hh.ll.then(function(l){
															l=[]
															p.hh.ll.responseText.replace(/adzonePid\"\:\"(mm(?:\_[0-9]*)*?)\"/g, (aa,a)=>l=l.concat(a))
													        htm.contain(p.hh, {ty:"|" , all:[
																																							 { 
																																								pn: "1px" ,
																																								contain:{
																																												 all:[
																																															{html: p.hh.ll = htm("<input jpg tt>").width(300).val(l[1])} ,
																																															{pn: "1px" , html:  p.hh.arp= htm("<pl>").css( {opacity:0.9 , marginLeft: - 6000 , width: 300 , background: htm.co.money , height : 163 }).corner().html(htm("<alt>").html("<li><label>" + l.join("</label></li><li><label>") + "</label></li>"))}
																																														]
																																													}
																																								 } ,
																																								{html:htm("<a><t htm=pla></a>").css( {lineHeight: "30px" , "marginLeft" :  "282px"}) ,
																																									 on: {click :function(a){
																																																						p.hh.arp.css( {marginLeft: 6})
																																																						p.hh.arp.click(function(a , aa){
																																																																	 a=a.originalEvent.srcElement
																																																																	 p.hh.ll.val(a.textContent)
                                                                                                                                   htm.p.ll= eval(p.hh.ll.val().replace("mm_","[").replace(/\_/g , ",") + "]")
                                                                                                                                   p.hh.arp.css( {marginLeft: - px})
																																																					 })
																																																					return !" "
																																								 }}}// ,textAlign: "right"
																												]})
                             htm.p.ll= eval(p.hh.ll.val().replace("mm_","[").replace(/\_/g , ",") + "]")
					})
          
          htm.contain(p.yp.a.tl ,{
                                  all:[
                                       {
                                        pn:"30px" ,
                                         tag:p.ar= htm("<pl>") ,
                                       contain :{ty: "|" ,
                                                 all:[
                                                     {html:"<label><input type=checkbox shopTag=yxjh>计划</label>"} ,
                                                     {html:"<label><input type=checkbox t='dpyhq=1' shopTag=dpyhq>优惠券</label>"} ,
                                                     {pn:  1.6,
                                                        tag:"<label></label>" ,
                                                      contain: {ty:"|" , all:[
                                                                              {  pn:"36px" , text:"店铺:"} ,
                                                                              { 
                                                                                pn: "1px" ,
                                                                                contain:{
                                                                                         all:[
                                                                                              {
                                                                                               html: p.ll = htm("<input t value=所有 tt=t>").width(116).on({
                                                                                                     input: function(){p.ll.val("所有")} ,      
                                                                                                          click:function(){
                                                                                                                          p.arp.css( {marginLeft: 6})
                                                                                                                          p.arp.click(function(a , aa){
                                                                                                                                                   a=a.originalEvent.srcElement
                                                                                                                                                   p.ll.val(a.textContent)
                                                                                                                                                   p.ll.attr("t" , (aa=htm(a).attr("t")) ? aa : "")
                                                                                                                                                   p.ll.attr("shopTag" , (aa=htm(a).attr("shopTag")) ? aa : "")
                                                                                                                                                   htm("title").animate({height: "+1000"} , 100 , function(){htm(window).click()})
                                                                                                                          })
                                                                                                                          return !" "
                                                                                                          }
                                                                                                }) 
                                                                                               } ,
                                                                                              {pn: "1px" , html:  p.arp= htm("<pl>").css( {opacity:0.9 , marginLeft: - 900 , width: 116 , background: htm.co.pl , height : 161 }).corner().html(htm("<alt>").html("<li></li><li>所有</li><li>天猫</li><li>淘宝</li><li t='b2c=1' shopTag=b2c>旗舰店</li><li t='jpmj=1' shopTag=jpmj>金牌</li>"))}
                                                                                            ]
                                                                                         }
                                                                               } ,
                                                                              {html:htm("<a><t htm=pla></a>").css( {"marginLeft" :  "100px" })}// ,textAlign: "right"
                                                                            ]}
                                                      } ,
                                                     
                                                     {pn:2 ,html:htm("<label>").html(["月销量>",htm('<input type=number min=1 t=startBiz30day>'),"笔"])} ,
                                                     
                                                     {pn:2, html:htm("<label>").html([ "比率>", htm("<input type=number        min=0.1 t=startTkRate>") , "%" ])} ,
                                                      {html: htm("<button blue>确 定</button>")  .css( {margin:"2%" , zoom: 0.6}).click(function(a){p.lpl.trigger("click")})} ,
                                                     {pn:"1px" , html:p.ar.h=htm("<pl ar>").text('以下每条商品右侧有个"打勾",宣传需勾上，不宣传不用勾')}//.css( {opacity: 0.9 , marginLeft: "" ,   background: htm.co.contain })                                                                                                
                                                    ]
                                                   }
                                        } ,
                                       {
                                        pn:"30px" ,
                                         tag:p.th= htm.panhtm.createElement("pal") ,
                                         background: htm.co.thall ,
                                          textAlign: "center" ,
                                          lineHeight: "30px" ,
                                       contain :{ty: "|" ,
                                                 all:[
                                                      {pn:  6 , html: htm("<a>商品(<t>鼠标左键+Alt</t>可让商品到推广栏,点触右则<t>深色</t>标题可排序)<ht htm=right></a>") } ,
                                                      {html: "<a htm a=3>价格<htm></a>"} ,
                                                      {html: "<a>佣金</a>"} ,
                                                      {html: "<a a=1>最强比率<htm></a>"} ,
                                                      {html: "<a a=5>月推广<htm></a>"} ,
                                                      {html: "<a a=7>月派佣<htm></a>"} ,
                                                      {html: "<a>优惠券</a>"} ,
                                                      {pn:"16px"}
                                                     ] ,
                                                   O: 1
                                                 } ,
                                            on:{click: function(a,aa,aaa){
                                                                   if(p.yp.tl.textContent==" 商 品 " | p.yp.tl.textContent==" 鹊 桥 "){
                                                                           a=htm(a.originalEvent.srcElement)
                                                                           aa=htm("htm" , a)
                                                                           aaa= +(a.attr("a"))
                                                                           a= (a.text()=="价格" ? aa.attr("htm")=="ll" : "") ? (++aaa , "htm") : "ll"  
                                                                           p.th.contain.map(function(a,a){
                                                                                  htm("htm" , a).attr("htm" , "")
                                                                           })
                                                                           if(aaa){ 
                                                                             aa.attr("htm" , a)
                                                                             htm.p.th= "&queryType=0&sortType=" + aaa + "&"
                                                                             return tap()
                                                                            }
                                                                             htm.p.th=""
                                                                             tap()
                                                                     }
                                                }}
                                        } ,
                                        {html:pl.pla= htm("<iframe height=100% width=100% src=a.htm>")}
                                       ]
        })
        ////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
        
        new Clipboard( pl.ll  , {
               target: ()=>  pl.ll
             })
          
          window.onclick = function(l){
           if(p.arp) p.arp.css("marginLeft") =="6px" ?       p.arp.css( {marginLeft: - 900 }) : ""
           if((l=p.hh) ? (l=l.arp) : "" ) l.css("marginLeft") =="6px"?l.css( {marginLeft: - 6000 }) : "" }
           pl.pla.prop("contentWindow").onclick    = ()=>   htm(window).click()
           htm([ window , pl.pla.prop("contentWindow") ] ).keyup (l => 
                          (l.originalEvent.srcElement.tagName == "INPUT" | l.originalEvent.srcElement.tagName == "TEXTAREA") ? (l.originalEvent.srcElement == p.a[0] & l.originalEvent.code =="Enter") ? tap() : "l" : "l")
          
          pl.pla.load( function(a , t){
                                 a = pl.pla.attr("src")
                                 if(a=="a.htm"){
                                   pl.pla.p = htm("alt" , htm(pl.pla.contents().prop("activeElement")).css("margin",1/1000))
                                  if(pl.pla.p.length){ 
                                    htm("style" , pl.pla.contents()).html(htm("style" , pl.pla.contents()).html().replace(/htm\.(co(?:lor)?)\.(鹊|定|[a-z]*)/g , (aa,l,a)=>htm[l][a]))
                                    a=localStorage.getItem("l")
                                   if(a) eval("a=" + a)
                                   if(a){
                                          a.map(function(lp , a , al){
                                                  lp.a.l= lp.l
                                                  lp.a.ll= lp.ll
                                                  lp= lp.a
                                                      al=(lp[3] + "").replace(/鹊|定/ , "") * 1
                                                  a=(lp[2] + "").replace(/鹊|定/ , "") * 1
                                                  if(al>a){
                                                            l=htm.get("http://pub.alimama.com/pubauc/getCommonCampaignByItemId.json?itemId=" + lp.l[0] + "&t=" + ((t=htm.now()) + 100)  + "pvid=" + htm.p.pn + t  + "&" + htm.p.token, function(ll , aa ,al){
                                                                      l=l.responseText
                                                                      if(l.replace(/\{"data"\:\{\}.*/ , "")) {
                                                                             eval("ll=" + l.replace(/\"[^\"]*Rate\"/g , '"tlrate"').replace(/\"[^\"]*st/g , '"ap').replace(/^.*?(?=\[)|"Avg.*?,|\].*/g,"") + "]")
                                                                             aa={ }
                                                                             al= { }
                                                                             ll.map(function(l){
                                                                                                 aa= aa.tlrate > l.tlrate ? aa : l
                                                                                                 if(l.manualAudit) return ""
                                                                                                 al=al.tlrate > l.tlrate ? al : l
                                                                             })
                                                                             ll= aa.apStatus
                                                                             if(ll==2){
                                                                                        lp[2] = aa.tlrate + "定"
                                                                                        return
                                                                               }
                                                                              if(ll==1) return
                                                                              l= al.tlrate
                                                                              l=~~l
                                                                             if(l > a){
                                                                                       ll= al.apStatus
                                                                                       if(ll==2){
                                                                                                 lp[2] = l + "定"
                                                                                                 return
                                                                                         }
                                                                                       if(ll==1) return
                                                                                       htm.post("http://pub.alimama.com/pubauc/applyForCommonCampaign.json",{campId: al.CampaignID , t: (t=htm.now()) + 100 , keeperid: al.ShopKeeperID , applyreason:"al" ,pvid: htm.p.pn + t  ,  _tb_token_: htm.p.token.replace(/_tb_token_\:/ , "") } , ()=> l.ok ? lp[2] = l + "定" : "")          
                                                                              }
                                                                             ll= aa.tlrate > l
                                                                             if(ll){
                                                                                       htm.post("http://pub.alimama.com/pubauc/applyForCommonCampaign.json",{campId: aa.CampaignID , t: (t=htm.now()) + 100 , keeperid: aa.ShopKeeperID , applyreason:"al" ,pvid: htm.p.pn + t  ,  _tb_token_: htm.p.token.replace(/_tb_token_\:/ , "") } ,  ()=> l.ok ? lp[3] = aa.tlrate + "定" : "")           
                                                                              }
                                                                    }
                                                             })
                                                   }
                                                  htm.p.all[lp.l[0]] = lp
                              })
                          
                          
                          } 
                        
                        pl.pla.p.click(function(a , l){
                                        
                                     l = a.originalEvent.srcElement
                                              
                                     if (htm(p.ypr.tl).text()==" 设 置 ") return 
                                     
                                     
                                     
                                     
                                     if(l.tagName == "INPUT"){
                                                           htm(pl.pla.prop("contentDocument").elementFromPoint(100 , a.clientY)).attr("l" ,  l.checked ? "ok" : "")
                                      }
                                     if(l.tagName == "LI"){
                                                         p.ypr.a.rt.p.attr("src" , "")
                                                          htm("a" ,p.ypr.a.rt.l.width(htm(p.ypr.a).width())).attr("htm" , "hn").css("lineHeight" ,p.ypr.a.rt.l.height() + "px")
                                                         p.ypr.a.rt.p.attr("src" , "http:" + l.r[1] + "_300x300.jpg")
                                                          p.ypr.a.rt.pl.html("<p>" + htm("pl" ,  l)[0].textContent + "</p><p>抢购价:￥" +htm("pl",l)[1].textContent + "</p>")
                                                          p.ypr.a.rt.hl  = l
                                                          htm("li" , pl.pla.p).css( {"float" : "left" , background: "" } )
                                                          htm("li:even" , pl.pla.p).css( {"float" : "left" , background: htm.co.lieven } )
                                                          htm(l).css( {"float" : "left" , background: htm.co.hoverli } )
                                                          
                                                          
                                                          //if(htm(":checkbox" , l).length) 
                                                          
                                                          if(a.altKey){
                                                                       if(htm(p.ypr.a.rt.hl).attr("p")=="ok"){  console.log("ll")
                                                                          htm(p.ypr.a.rt.hl).attr("p","")
                                                                          htm.p.all[p.ypr.a.rt.hl.r[0]] = ""
                                                                          return !!""
                                                                     }
                                                                       p.yp.tl.textContent == htm("pl",p.map.lf)[3].textContent ? (htm.p.all[p.ypr.a.rt.hl.r[0]] = "" , l.outerHTML="") : ""
                                                                     //pl.al()
                                                                           
                                                           }
                                                            return !!""
                                     }
                        })
                      return
                     }
                     
                     
                     
                     pl.pn()
                     pl.aa.src=pl.aa.src + "#"
                   }
          })
          
          
                    
//http://pub.alimama.com/pubauc/getCommonCampaignByItemId.json?itemId=
//http://pub.alimama.com/items/channel/qqhd.json?q=
//http://pub.alimama.com/items/search.json?q=              //营销和定向计划 shopTag=yxjh  //店铺优惠券 dpyhq=1&shopTag=dpyhq  //dpyhq=1&shopTag=yxjh%2Cdpyhq //月转率 hPayRate30=1 //天猫旗舰店  b2c=1&shopTag=b2c //b2c=1&dpyhq=1&shopTag=b2c%2Cyxjh%2Cdpyhq  //月销量  startBiz30day=60  //收入比率 startTkRate=30  //人气 queryType=2 //价格从高到低 queryType=0&sortType=3 //价格从低到高 queryType=0&sortType=4 //销量从高到低 queryType=0&sortType=9 //比率从高到低 queryType=0&sortType=1 //月推广量从高到低  queryType=0&sortType=5  //月佣金从高到低  queryType=0&sortType=7    
//http://pub.alimama.com/common/code/getAuctionCode.json?auctionid=540905867057&adzoneid=91672645&siteid=25232497&scenes=1&t=1494831932336&_tb_token_=p1vA73VRKdq&pvid=10_119.129.1.189_452_1494831896059
          
         pl.al= function(lp, lt , l){
                              //lp=htm(p.ypr.a.rt.hl).clone()
                              lp=[].map.apply(htm(p.ypr.a.rt.hl).contents() , [(l,ll)=> (ll==6) ? "" : htm(l).text()])
                               lp.l= p.ypr.a.rt.hl.r
                               lp[2] = p.ypr.a.rt.hl.r[2]  //htm(lp.contents()[2]).html(("<t>" + p.ypr.a.rt.hl.r[2] + "</t>").replace("鹊</t>" , "</t><tl><tll>鹊</tll></tl>") //htm(l.contents()[6]).html()
                              l=prompt("加这个商品到推广栏，以及对它转链，对吗？", "ok")
                              if(l ? "a" :  l===""){ 
                                      p.ra.html(htm("<pl>").html(["转 链 ing " , htm("<htm htm=hn animate >") ]))
                                      l=p.ypr.a.rt.hl
                                      
                                      pl.then=pl.aa.get("http://pub.alimama.com/common/code/getAuctionCode.json?auctionid=" + l.r[0] + "&adzoneid=" + htm.p.ll[2] +  "&siteid="   + htm.p.ll[1] +  "&scenes=1&t=" + ((lt=htm.now()) + 100) + "&"+    htm.p.token + "&" + "pvid=" + htm.p.pn + lt , 
																					      function(a , alt){ 
																														 if(a=a.data){
																														     lp.ll= l.ll = {
																																				 图片:l.r[ 1 ]  , 
																																				 标题: l.a0.textContent , 
																																				 价格: l.a1.textContent , 
																																				 合长链: a.couponLink ? a.couponLink : a.clickUrl , 
																																				 长链: a.clickUrl , 
																																				 合淘口令: a.couponLinkTaoToken ? a.couponLinkTaoToken : a.taoToken ,
																																				 淘口令: a.taoToken ,
																																				 二维码: a.qrCodeUrl ,
																																				 合链: a.couponShortLinkUrl ? a.couponShortLinkUrl : a.shortLinkUrl ,
																																				 链:     a.shortLinkUrl
																																			 }
																												        htm(p.ypr.a.rt.hl).attr("p","ok")
																												        htm.p.all[p.ypr.a.rt.hl.r[0]] = lp
																												        
                                                               a=(p.ypr.a.rt.hl.r[2] + "") .replace("鹊" , "") * 1
																							               if(htm("t" , p.ypr.a.rt.hl.a3).text() * 1 > a){            console.log(htm("t" , p.ypr.a.rt.hl.a3).text() * 1 , a)
																														    alt=htm.get("http://pub.alimama.com/pubauc/getCommonCampaignByItemId.json?itemId=" + p.ypr.a.rt.hl.r[0] + "&t=" + ((l=htm.now()) + 100)  + htm.p.token + "&pvid=" + htm.p.pn + l , function(ll , aa ,al){
																																			 alt=alt.responseText
																																			 if(alt.replace(/\{"data"\:\{\}.*/ , "")) {console.log("aaa")
																																									 eval("ll=" + alt.replace(/\"[^\"]*Rate\"/g , '"tlrate"').replace(/\"[^\"]*st/g , '"ap').replace(/^.*?(?=\[)|"Avg.*?,|\].*/g,"") + "]")
																																									 console.log(ll)
																																									 aa={ }
																																									 al= { }
																																									 ll.map(function(l){
																																																			 aa= aa.tlrate > l.tlrate ? aa : l
																																																			 if(l.manualAudit) return ""
																																																			 al=al.tlrate > l.tlrate ? al : l
																																									 })
																																									 console.log(aa,al)
																																									 ll= aa.apStatus
																																									 if(ll==2){
																																															lp[2] = aa.tlrate + "定"
																																															return
																																										 }
																																										if(ll==1) return
																																										l= al.tlrate
																																										l=~~l
																																									 if(l > a){
																																														 ll= al.apStatus
																																														 if(ll==2){
																																																			 lp[2] = l + "定"
																																																			 return
																																															 }
																																														 if(ll==1) return
																																														 htm.post("http://pub.alimama.com/pubauc/applyForCommonCampaign.json",{campId: al.CampaignID , t: (ll=htm.now()) + 100 , keeperid: al.ShopKeeperID , applyreason: htm.tt ,pvid: htm.p.pn + ll  ,  _tb_token_: htm.p.token.replace(/_tb_token_\=/ , "") } , ll=> ll.ok ? lp[2] = l + "定"  : "")          
																																										}
																																									 ll= aa.tlrate >  l
																																									 if(ll){
																																														 htm.post("http://pub.alimama.com/pubauc/applyForCommonCampaign.json",{campId: aa.CampaignID , t: (ll=htm.now()) + 100 , keeperid: aa.ShopKeeperID , applyreason: htm.tt ,pvid: htm.p.pn + ll  ,  _tb_token_: htm.p.token.replace(/_tb_token_\=/ , "") } ,  ll=> ll.ok ? lp[3] = aa.tlrate + "定" : "")           
																																										}
																																					}
																																	 
                                                                    })
																											       }
																											       (l= ltt=> ltt= (htm.now()) > lt + 5000 ? p.ra.html("加入到推广栏") : htm("<pl>").height(3).animate({height: 100} , 100 , l))()
																											          
																											    }
																													
																		                   })}
																		                   (function lp(a){
																		                                    a= pl.then.responseText
																		                                    if(p.ra.text()=="加入到推广栏") return
																		                                    if(a){
																		                                     eval("a=" + a)
																		                                     if(a.data ? "" : "a"){
																		                                          console.log("aa", a)	
																		                                          p.ra.html("加入到推广栏")
																		                                          if(prompt("操作频率快，被联盟限制转链，打开窗口导航修复" , "ok")){
																																										l=np.Window.open("a.htm" , {min_width: 290 , min_height:290}, function(l){
																																										 lpl=l
																																										 l.window.location = "http://pub.alimama.com/promo/search/index.htm?q=%E7%B3%95"
																																										 htm("<pl>").height(3).animate({height: 100} , 1000 , function lla(ll){
																																																		 ll= htm("a[href^='java'][data-spm-click][data-login]" , l.window.document)[1]
																																																		 if(ll){
																																																						ll.click()
																																																						htm("<pl>").height(3).animate({height: 100} , 1000 , function lla(ll){
																																																									 ll=htm(".mr10.w100" , l.window.document)[0]
																																																									 if(ll){
																																																													ll.click()
																																																						
																																																													 return
																																																										}
																																																										htm("<pl>").height(3).animate({height: 100} , 1000 , lla)  
																																																						})
																																																						return
																																																			 }
																																																			 htm("<pl>").height(3).animate({height: 100} , 1000 , lla)     
																																										 })
																																										})
																																						}
																		                                     } 
																		                                     return
																		                                    }
																		                                     htm("<pl>").height(3).animate({height: 100} , 100 , lp)
																		                    })()
																	
																	
																	
          }
          
          
          htm("a" , p.map.lf).css("lineHeight" , htm(p).height() /11 * 10 / 6 + "px")
          htm(p.map.lf).click(function(a){
                a= htm.panhtm.elementFromPoint(2,a.pageY)
                //a=a.originalEvent.srcElement
                htm("a",p.map.lf).css( "color" , "")
                htm("a" , a).css("color" , htm.color.lefton)
                htm(p.yp.a.tl).css( { marginLeft :  -9000})
                p.yp.aa.html("")
              if("tap" in a)   a.tap( a.textContent)

          })
          htm.a= p
        //htm("pl",p.map.lf)[2].tap()
          htm("pl",p.map.lf)[0].tap()
          htm(htm("a",p.map.lf)[0]).css( "color" , htm.color.lefton)
          
          htm.pal.show(true)
          //pl.h => 
  
  pl.qq = function(lt , l){
      l={}
      l.pla = htm("li" , pl.pl.pl)
      htm(pl.a).html("")
      htm.pal.width = 600
      htm.pal.height = 90
      

      console.log(htm.pal.width , ~~((screen.availWidth - (  htm.pal.width)) / 2))
      htm("svg , foreignObject").height(90)
      htm("svg , foreignObject").width(600)
      htm.pal.x = ~~((screen.availWidth - 600) / 2)
      htm.pal.y = 3
      htm.pal.setAlwaysOnTop(true)
      
      htm.contain(pl.a , {ty:"|" ,all:[
                                                            {pn:   "100px" , html: l.jpg = htm("<img>").width("100%").height("100%").attr("src" , "lg.gif")} ,
                                                            
                                                            {
                                                             contain:{all:[
                                                                               {html: "<p>淘多惠广播机</p>", lineHeight: "30px" , textAlign: "center" } ,
                                                                               {pn: "16px" , background: "#31aafa" ,  html : l.mt = htm("<meter value=100 float=left>").width(1).height("100%")} ,
                                                                               {tag: l.t=htm("<pl>") ,lineHeight: "31px" ,textAlign: "center" }
                                                                              ]}
                                                             }     ,
                                                           {
                                                            pn: "100px" ,
                                                               contain:{all:[
                                                                             {html:htm("<button blue>").text("返回").click(h=> pl.pn("aaa")) , lineHeight: "90px" , textAlign: "center" } ,
                                                                             //{html:l.l=htm("<button blue>").width(60).text(">>").click(h=>l.l.text()=="广播" ? (l.l.tap ? l.l.tap() : "") :  l.height>100 ? (l.h.height(90), l.height= 100  , l.l.text(">>")) : (l.height= 633 , l.h.height(600) ,  l.l.text("<<")))}  
                                                                           ]} 
                                                                               //,lineHeight: "36px" 
                                                          }
                                      ]})

     htm.get(fph + "QQ" , function pll(a , pla ){
        var r= []
        a.replace(/(?:.|\n)*?addRow\(\"([^\"]*)\.lnk\"/g , (hh,h)=>{r.push(h)})
        l.t.text("")
        pla = l.pla
        htm(pl.ll).html(htm(pla[0]).html().replace(/li\>/g , "pl>").replace(/p\>/g , "li>"))

        if(r.length){
             (function lhp(lp , ll , animate){
                      function q(lp , ll){
                                  if(htm.pal.width >600) return 
                              pl.ll.click()
                              gt.ft(php , "h.txt" , "l")
                              gt.ft(php    , "l.txt" , r[lp])
                              np.Shell.openItem(php + "/ph.exe")
                              lhp(lp+1 ,ll)
                      }
              l.mt.width(1)
              
              animate=()=> (console.log("a") , l.mt.animate({width: "100%"} , lt , a=> q(lp , ll)))
             
            if(lp  >= r.length) {
                 ll+=1
                 if(ll >= pla.length){
                          return l.t.text("已经向所有QQ号或群号，宣传了所有商品")
                  }
                  htm(pl.ll).html(htm(pla[ll]).html().replace(/li\>/g , "pl>").replace(/p\>/g , "li>"))

                    console.log("aa")
                 lp = ~~""
                 l.jpg.attr("src" , htm("img" , pla[ll]).attr("src"))
                 l.t.text("正等待广播到:【" + r[lp] + "】")
                 return       animate()                   
             }
             
             console.log(animate)
             l.jpg.attr("src" , htm("img" ,pla[ll]).attr("src"))
             l.t.text("正等待广播到:【" + r[lp] + "】")
                 animate()   
         })(~~"",~~"")
          return
         }
         np.Shell.showItemInFolder(fph + "QQ\\~这文件夹用来放qq号码")
				 if(prompt("这文件夹找不到QQ号码和群号码，打开你桌面QQ，拉号码进这个文件夹" , "已经全部放进文件夹")){
                  return htm.get(fph + "QQ" , pll)
           }

            pl.pn("aaa")
        })
      
      
 }
 
        
    pl.qql = function(lt , l){
      l={}
      l.pla = htm("li" , pl.pl.pl)
      htm(pl.a).html("")
      htm.pal.width = 600
      htm.pal.height = 600
      htm("svg , foreignObject").height(600)
      htm("svg , foreignObject").width(600)
      htm.pal.x = ~~((screen.availWidth - 600) / 2)
      htm.pal.setAlwaysOnTop(true)
      htm.contain(pl.a ,       {all:[
                                   {
                                    pn: "1px" ,
                                    html:l.tt=htm("<pl>").css( {height:90, background: htm.co.htm  , textAlign: "center" })
                                    } ,
                                   {
                                    pn:    "90px" ,
                                    contain:  {ty:"|" ,all:[
                                                            {pn:   "100px" , html: l.jpg = htm("<img>").width("100%").height("100%").attr("src" , "lg.gif")} ,
                                                            
                                                            {
                                                             contain:{all:[
                                                                               {html: "<h6>淘多惠广播机</h6>", lineHeight: "36px" , textAlign: "center" } ,
                                                                               {pn: "16px" , background: "#31aafa" ,  html : l.mt = htm("<meter value=100 float=left>").width(1).height("100%")} ,
                                                                               {tag: l.t=htm("<pl>") ,lineHeight: "31px" ,textAlign: "center" }
                                                                              ]}
                                                             }     ,
                                                           {
                                                            pn: "100px" ,
                                                               contain:{all:[
                                                                             {html:htm("<button blue>").text("返回").click(h=> pl.pn("aaa"))} ,
                                                                             {html:l.l=htm("<button blue>").width(60).text(">>").click(h=>l.l.text()=="广播" ? (l.l.tap ? l.l.tap() : "") : ""  )}  
                                                                           ]}  
                                                          }
                                                         ]}
                                    } ,
                                   {tag:l.aa=htm("<pl>"), html: l.al =htm('<iframe nwfaketop width="100%" >').height("100%")}
                               ]})
      
      {(function (a){
        l.t.text("")
        l.tt.css("transform" , "translateY(1px)").html(htm("<h3>登录微信帐号</h3>").css( "lineHeight" , "90px"))
        l.l.css("marginLeft" , "")
        l.l.text("广播")
        
        
        
        
        
        l.al.attr("src"   , "http://wx.qq.com")
        var aa= l.al.prop("contentWindow")
        a=(h)=> htm("<pl>").height(3).animate({height: 100} ,1000 ,function(tl){
              tl= "angular" in aa 
              if(tl){
                        l.al.contents().contents().css("zoom" , 0.6)
                     if(h=  aa.angular.element('.contact_item').length){
                           if(aa.h==h){
                                  console.log(al = aa.angular.element('[mm-repeat="item in allContacts"]').scope().allContacts , ({}).constructor.keys(al[1]))
                                  l.tt.html(l.tt.t="<p>在下面微信左则,对一个群组或联络人,按(鼠标右键+Alt键),</p><p>可让他成为绿色,再次按(鼠标右键+Alt键)可恢复,</p><p>当你全部已经设置,可按右上面“广播”,</p><p>所有绿色群组或联络人,会被软件轮番宣传</p><p>淘多惠也会记住这些设置，用作下次宣传操作</p>").css("zoom" , 0.6)
                                  
                                  aa.angular.element(".tab_item>*")[2].click()
                                  aa.angular.element("style").html(aa.angular.element("style").html() + "[color=green]{background:green}")
                                  
                                  aa.angular.element('.contact_item').contextmenu((l,a)=>
                                  l.altKey ? (a= htm(aa.document.elementFromPoint(3 , l.clientY))).attr("color")=="green" ? a.attr("color" , "") : a.attr("color", "green") : "").map((l,ll)=> 
                                   htm(ll).attr("np", htm("img" ,ll).attr("src").replace(/^.*?=|&.*/g , "")))
                                   if(localStorage.tl) localStorage.tl.replace(/.*?(?=,)/g,  l => aa.angular.element("[np='" + l + "']").attr("color","green"))
                                  
                                  l.l.tap=  function(pla , tll , ft){
                                                        aa= l.al.prop("contentWindow")
                                                        tl= aa.angular.element('.contact_item[color=green]')
                                                                    console.log("tl",tl)
                                                        if(tl.length){
                                                                var at
                                                                aa.angular.element(".tab_item>*")[~~""].click()
                                                                l.tt.text("").css("transform" , "")
                                                                     pla = htm("li" , pl.pl.pl)
                                                                tll = ""
                                                                tl=tl.map((l,ll)=> (l= aa.angular.element(ll).scope().user , tll = tll + (ll=htm(ll).attr("np")) + "," , {al: l.UserName , a:l.NickName , l:ll}))
                                                                localStorage.tl= tll
                                                                tll = aa.angular.element('[mm-repeat="chatContact in chatList track by chatContact.UserName"]').scope()
                                                                tll.itemClick("filehelper")
                                                                at=()=> htm("<pl>").height(3).animate({height: 100} ,1000 ,function(ftl,tfl){
                                                                           ft= aa.angular.element(":file")//~label
                                                                           if(ft.l=ft.scope()){
                                                                             //gt.ft(php    , "a.txt" , htm(pla[~~""]).attr("hr"))
                                                                             ftl= htm("img" , pla[~~""]).attr("src")
                                                                             
                                                                             ftl=new File(ftl,ftl)
                                                                             console.log(ftl)
                                                                             tfl= htm(pla[~~""]).html().replace(/(?:\<[^\>]*?\>)(?:\<[^\>]*?\>)(?:\<[^\>]*?\>)*/g , "\n").replace(/(?:\<[^\>]*?\>)/g , "")
                                                                             if(pla.length ?  tl.length : ""){
                                                                                                     (function lhp(lp , ll , animate){
                                                                                                              function q(lp , ll,pl){
                                                                                                                          if(htm.pal.width >600) return 
                                                                                                                      //gt.ft(php , "h.txt" , "a")
                                                                                                                      //tll.itemClick(tl[lp].al)
                                                                                                                      //np.Shell.openItem(php + "/ph.exe")
                                                                                                                      htm.pal.appWindow.show()
                                                                                                                      ft= aa.angular.element(":file")
                                                                                                                      console.log(ftl)
                                                                                                                      ft.prop("files").append(ftl)
                                                                                                                      pl=Array("ch")
                                                                                                                      pl[pl.length]=   "an"
                                                                                                                      pl[pl.length]="ge"
                                                                                                                      ft[pl.join("")]()
                                                                                                                      //htm("<pl>").height(3).animate({height: 100} , 1000 , function(){console.log("a" , htm.pal)
                                                                                                                       //htm.pal.show()
                                                                                                                       //ft.click()
                                                                                                                       htm("<pl>").height(3).animate({height: 100} , 6000 , function(){
                                                                                                                        pl= aa.angular.element(":file~label").scope()
                                                                                                                        pl.editAreaCtn=tfl
                                                                                                                        pl.sendTextMessage()
                                                                                                                        lhp(lp+1 ,ll)
                                                                                                                       })
                                                                                                                      //})
                                                                                                              }
                                                                                                      l.mt.width(1)
                                                                                                      
                                                                                                      animate=()=> (console.log("a",lt) , l.mt.animate({width: "100%"} , lt , ()=> q(lp , ll)))
                                                                                                     
                                                                                                    if(lp  >= tl.length) {
                                                                                                         ll+=1
                                                                                                         if(ll >= pla.length){
                                                                                                                  return l.t.text("已经向所有微信号，宣传了所有商品")
                                                                                                          }
                                                                                                          //gt.ft(php    , "a.txt" , htm(pla[ll]).attr("hr"))
                                                                                                          ftl= htm("img" , pla[ll]).attr("src")
                                                                                                          ftl=new File(ftl,ftl)
                                                                                                          tfl= htm(pla[ll]).html().replace(/(?:\<[^\>]*?\>)(?:\<[^\>]*?\>)(?:\<[^\>]*?\>)*/g , "\n").replace(/(?:\<[^\>]*?\>)/g , "")

                                                                                                            console.log("aaa")
                                                                                                         lp = ~~""
                                                                                                         l.jpg.attr("src" , htm("img" , pla[ll]).attr("src"))
                                                                                                         l.t.text("正等待广播到:【" + tl[lp].a + "】")
                                                                                                         tll.itemClick(tl[lp].al)
                                                                                                         return       animate()                   
                                                                                                     }
                                                                                                     
                                                                                                     //console.log(animate)
                                                                                                     l.jpg.attr("src" , htm("img" ,pla[ll]).attr("src"))
                                                                                                     l.t.text("正等待广播到:【" + tl[lp].a + "】")
                                                                                                         tll.itemClick(tl[lp].al)
                                                                                                         animate()   
                                                                                                 })(~~"",~~"")
                                                                              }
                                                                              return
                                                                             }   
                                                                             at()
                                                                 })
                                                                  at()    
                                                          return
                                                         }
                                                         l.tt.html(htm("<h3 tt>你未设置宣传哪些微信帐号?<h3>").animate({"opacity": 0.3} , 6000 , ()=> l.tt.html(l.tt.t)))
                                  }
                                 return 
                          }
                          aa.h=h
                      }
             }
             a()
        }) 
        a()
            
           
           
           
           
           
           
           
       })()}
         

 }
 
 
 
 
 
 
}