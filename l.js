var fph , gt , ph=process.cwd().replace("\\" , "/")
gt= require(ph + '/getfile')
gt   =    new gt("") 
htm.panhtm = htm("html").context
var pl, ht=require("http") , php
htm(htm.panhtm.activeElement).css("margin",1/1000)
var title = htm("title").text() , np =require("nw.gui") , f=require("fs")
htm.p={all: { }}
htm("svg").css( {float:"left"   , height : htm(window).height()} )
pl=htm("foreignObject").height(htm(window).height())
gt.ft= (h, hh, t)=>(gt.lpath=h, t ? gt.set(hh, t) :gt.get(hh))
fph= np.App.dataPath.replace(/淘多惠.*/,"淘多惠\\")
gt.ft(fph + "l" , "l","l")

php = ph.replace(/(.*\\).*/ , (l,ll)=>ll) + "ph"
htm.pal=np.Window.get()


function jpg(rr , fl , aaa){
 fl=fl + ".jpg"
 function aa(l){
  l=gt.ft(fph + "l" ,  fl)
  if(l){
           if(aaa)  aaa(fph + "\\l\\" + fl)//htm("title").animate({height: "+1"} , 1000 , aaa)
           return
   }
    if(ra=="ra"){
           ra=""
           ht.get(rr, function (r) {
                r.pipe(f.createWriteStream(fph + "\\l\\" + fl))
           })
   }
   htm("title").animate({height: "+1"} , 1000 , aa)
 }
 var ra="ra"
 aa()
}











htm.getScript("color.htm").then(()=> htm("style").html(htm("style").html().replace(/htm\.(co(?:lor)?)\.([a-z]*)/g , (aa,l,a)=>htm[l][a])))
htm.pal.show(true)
htm.lt(pl.css({float: "left",background:"url(l.jpg)"}) , {ty:"|" , all:{
                               ll:{
                                   pn:1,
                                   lineHeight: "331px" ,
                                   textAlign:  "center"  ,
                                  html: htm("<pl>").width(600).html(pl.tap=htm("<button>").text("淘宝帐号登录").width(190).click(function(ll){
                                                                    pl.tap.width(pl.tap.width())
                                                                    pl.lt.animate([0,100,0])
                                                                    htm("title").text("淘宝帐号登录")
                                                                    pl.tap.html("<htm htm=hn animate>")
                                                                    pl.tap.css("opacity" , 6/10000000)
                                                                    ll=()=>htm("<pl>").height(3).animate({height: 100} , 1000 , function(l ,t){
                                                                                l=(pl.aa.contentWindow).location.host , console.log("aaa",l)
                                                                                if(l== "www.alimama.com" ? (l=htm(".menu-username" , pl.aa.contentDocument)[0]) : ""){
																																								


                                                                                    pl.tap.css("opacity" , 0.9)
																																										htm(pl.aa).css( {"marginLeft" : -9000 })
																																										htm.get("http://member1.taobao.com/member/fresh/account_security.htm" , function(l ,t){
																																										            htm.tl = l.replace(/(?:.|\r|\n)*会员名(?:.|\r|\n)*?"\>/ , "").replace(/\<\/(?:.|\r|\n)*/,"")
																																										            htm.aa = l.replace(/(?:.|\r|\n)*mt\-user\-avatar(?:.|\r|\n)*?src\="/ , "").replace(/"\>(?:.|\r|\n)*/,"")
																																										            htm.get("http://taodh.net/log.php?tl=" + htm.tl , function(a){
																																																			if(a){
																																																						return pl.pn(pl.aa.src="http://pub.alimama.com/promo/search/index.htm?q=&type=table?")
																																																			 }
																																																			 pl.log()
																																															 })
																																										})
																																										return
                                                                                  }

                                                                                  ll()
                                                                    })
                                                                     ll()
                                                    }))
                                  } ,
                               l:{pn: 0 , html:pl.aa=htm("<iframe nwfaketop width=" + pl.width() + " height=" + pl.height() + " src=https://login.taobao.com/member/login.jhtml?style=mini&newMini2=true&from=alimama&redirectURL=http%3A%2F%2Flogin.taobao.com%2Fmember%2Ftaobaoke%2Flogin.htm%3Fis_login%3d1&full_redirect=true&disableQuickLogin=true>")[0]} ,
                               a:{
                                  pn: 0 , 
                                  transform: "translateZ(1000px)" 
                               }
                              }
               })
                 
pl.pn= function(aaa, l , t){
                if((l=pl.aa.contentDocument) ? (l= htm("table a" , l))[30]  : "") {
                           htm("svg , foreignObject").width(htm.pal.width= px= screen.availWidth)//
                           htm("svg , foreignObject").height((htm.pal.height= py= screen.availHeight - 20) - 6)
                           pl.lt.animate([0,0,100])
                           htm(pl.a).css( {float:"left" , background: htm.co.htm , width : "100%" })
                           htm("title").text(title)
                           htm.pal.x=1
                           htm.pal.y=1
                           if (1911 > screen.availWidth){
                                htm(pl.a).css( {transform : "scale(" +  px/ 1911 + "," + py/1060 + ")" , "transform-origin" : "top left" })
                                htm(pl.a).width(1911).height(1060)
                             }
                           htm.p.pn = ("" + l.attr("data-spm-click")).replace(/^.*?&pvid=|[^_]*?&.*/g , "")
                           t= pl.aa.contentDocument.cookie
                           htm.ttl=   "" 
                           htm.p.token= t.replace(/^.*(?=\_tb\_token)/ , "").replace(/\;.*/ , "")
                           pl.aa.get=(pl.aa.contentWindow ).$
                           pl.aa.get= pl.aa.get ?  pl.aa.get.get : htm.get
                           ap(pl.a , aaa)
                           return
                 }
                 htm("title").animate({height: "+1000"} , 1000 , pl.pn)
}              

pl.aa.onload = function(l ,t){console.log("l", l , (pl.aa.contentWindow).location.host)
        if((pl.aa.contentWindow).location.host == "login.taobao.com"){
            if(htm(window).width() > 600){  
                         htm("svg , foreignObject").width(600)
                         htm("svg , foreignObject").height(290)
                         htm.pal.width=600
                         htm.pal.height=290
                         htm.pal.x = (screen.availWidth - 600) / 2
                         htm.pal.y = (screen.availHeight -    290) / 2 
                          pl.aa.width=600
                         return 
            }

             return
          }
} 
pl.log = function(){
                  pl.lt.animate([100,0,0])
                  htm(pl.ll).css( { textAlign: "center" ,  background: "url(al.jpg)" } )
                  htm.lt(pl.ll , {all:[
                                            {pn: "90px"} ,
                                            {pn: "161px",ty:"|", all:[
                                                                      { } ,
                                                                      {
                                                                        background: "rgba(131,119,119,0.6)", 
                                                                        pn: "300px" , 
                                                                        tag: htm("<pl>").corner() ,
                                                                        all:[
                                                                                 {pn: "10px"} ,
                                                                                 {pn: 2 , html: htm("<p>").html(["会员号：" , htm("<a>" + htm.tl + "</a>").css("color" , "#6AF11a") ]).css( { textAlign: "left" , marginLeft: 20 }) } ,
                                                                                 {pn: 2 ,html: htm("<p>").html(["注册码：" , htm("<input>").height(30) ]).css( { textAlign: "left" , marginLeft: 20 }).click(()=> htm(pl.ll.t).text("")) } ,
																																								 {html: pl.ll.t=htm("<p>"), color: "#ff1a1a" ,    zoom: 0.6  } ,
																																								 {html: htm('<p><a href="tencent://message/?uin=202198823">联络客服免费拿注册码</a><p>') ,    zoom:   0.6} ,
																																								 {pn: 2 ,html: htm("<p>").html(htm("<button>").text(" 注 册 ").css( {lineHeight: "9px" ,  width:100 }).click(function(l){
																																																						l= htm(":text" , pl.ll).val()
																																																						if(l){
																																																									htm.get("http://taodh.net/lg.php?l=" + l + "&tl=" + htm.tl , function(a){
																																																												if(a=="ok"){
																																																													pl.pn()  
																																																													pl.aa.src="http://pub.alimama.com/promo/search/index.htm?q=&type=table?"
																																																													return htm(pl.ll.t).text("注册成功,正在读取数据...")
																																																												 }
																																																												 htm(pl.ll.t).text("注册码错误")
																																																									 })
																																																									 return
																																																						 }
																																																							htm(pl.ll.t).text("注册码错误")
																																									 }))} ,
																																									 {pn: "10px"}
                                                                             ]  ,
                                                                          color: "#Ffe11a"
                                                                     } ,
                                                                      { }
                                                                    ]
                                           } ,
                                            { }
                                           ]
                   })

}
function ap(p , aaa){
               
               
               function tap(ra, ar){
                         //if(p.a.val()=="") if(p.yp.tl.textContent==" 商 品 ") p.a.val("冻米花生糕酥") 
                          var r=[]  ,  arr
                          ar= htm.now()
                          r= r.map.call(htm("input" , p.ar) , function(a,aa){
                                    a=htm(a)
                                    if(a.attr("tt")=="t"){
                                             if(aa=a.attr("shopTag")){
                                                      r= r.concat(aa)
                                                      return a.attr("t")
                                              }
                                              return a.val()== "天猫" ? "userType=1" : a.val()=="所有"? "" : "userType=0"
                                     }
                                    if(a.attr("type")=="number"){
                                           aa= a.val()
                                           return aa > 0 ? (a.attr("t") + "=" + aa) : "" 
                                     }
                                     return a.prop("checked") ? (((aa=a.attr("shopTag")) ? (r=r.concat(aa)) : "") , a.attr("t")) : ""
                          }).join("&") + (r[0] ? ("&shopTag=" +   r.join("%2C")) : "&shopTag=") 
                          arr= htm.now()
                          r =r.replace(/\&+/g ,"&")
                          htm.p.r = r
                          ra=ra? htm.p.pa ? Math.max( 1 , Math.min(ra , htm.p.pa[1])) : 1 : 1
                          ra=ra >= 1 ? ra : 1
                          r= (p.yp.tl.textContent==" 商 品 " ? "http://pub.alimama.com/items/search.json?" + htm.param({q: htm.ttl}) : "http://pub.alimama.com/items/channel/qqhd.json?" + htm.param({q: htm.ttl})  + "&channel=qqhd") + "&_t=" + ar + "&type=table&toPage=" + ra + "&auctionTag=&perPageSize=40&" + r + (htm.p.th ? htm.p.th : "") + "&t=" + htm.now() + "&" + htm.p.token + "&" + "pvid=" + htm.p.pn + arr
                          
                          pl.aa.get(r ,function(a , aa ,aaa){
                                if(a? a.data : ""){
                                   aa=a.info ? a.info.pvid : ""
                                   if(aa) htm.p.pn=    aa.replace(/\_[0-9]{10,}/ , "_")
                                   aa=pl.pla.p.width()
                                   htm.p.pa = [ ra , (aaa= (a.data.paginator ?  a.data.paginator["items"]  : "" ) / 40 ) == ~~aaa ? aaa : 1 + ~~aaa  ]
                                   p.pa.html(htm.p.pa.join("/"))
                                   a= a.data.pageList
                                   if(a){
                                         a=a.map(function(l , p , ll){
                                            p= htm.panhtm.createElement("li")
                                            ll= function(a, aa){
                                                            aa=""
                                                            if(l.tkSpecialCampaignIdRateMap){ 
                                                             for (a in l.tkSpecialCampaignIdRateMap){
                                                                     aa=  aa> l.tkSpecialCampaignIdRateMap[a] ? aa : l.tkSpecialCampaignIdRateMap[a]
                                                             }
                                                           }
                                                             a = l.eventRate > l.tkRate ? l.eventRate : l.tkRate 
                                                             a= aa > a ? aa : a 
                                                             if(a==l.eventRate) return "<t>" + a + "</t><tl><ttl>鹊</ttl></tl>"  
                                                             if(a==l.tkRate) return "<t>" + a + "</t>"
                                                             return "<t>" + a + "</t><tl green><ttl>定</ttl></tl>"  
                                            }
                                            p.r=[l.auctionUrl.replace(/^.*\=/  , "") , l.pictUrl , l.eventRate > l.tkRate ? l.eventRate + "鹊" : l.tkRate ]
                                            p.ll= {厂商价: l.reservePrice}
                                            htm(p).width(aa)
                                            htm.lt(p  , {ty: "|" ,
                                                                             all:[
                                                                                  {pn:  6 , text: l.title.replace(/\<[^\>]*?\>/g ,  "") } ,
                                                                                  {text: l.zkPrice} ,
                                                                                  {text: (l.zkPrice * ll().replace(/\<.*?\>|鹊|定/g, "") | 0) / 100 } , //l.tkCommFee
                                                                                  {html: ll   } ,
                                                                                  {pn: 1 ,text:l.totalNum} ,
                                                                                  {pn:1 ,text:l.totalFee} ,
                                                                                  {pn:1 ,text:l.couponAmount}
                                                                                 ] ,
                                                                             })
                                           return p
                                         })
                                       pl.pla.p.html(a)
                                       htm("li:even" , pl.pla.p).css( {"float" : "left" , background: htm.co.li } )
                                       htm("li",pl.pla.p).map((t,l)  => htm.p.all[l.r[0]]? htm(l).css( "color" ,  htm.color.tli) : "")
                                       pl.pla.prop("contentWindow").scroll("","")
                                   }
                               }
                          })
          }
          htm.tap=tap
               
          
          
          htm.lt(p , {all:{
                                pl:{
                                    background: htm.co.top ,
                                    font:"900 100%/60px htm" ,
                                    pn: "60px" ,
                                              color: htm.color.top ,
                                    textAlign: "center" ,
                                    ty: "|" ,
                                    all:{
																				 ttl: {pn: "190px" ,html: htm('<img src="lg.jpg">').height("100%")} ,
																				 l: {html:"淘淘提醒你：在{ }前记得续费啰"} ,
																				 tl: {pn: "100px" , html: htm("<a href='#'><t>￥ </t>充值</a>").css( "color" , htm.color.top) } , 
																				 qq: {pn: "100px" , html: htm("<a htm=qq href='#'>客服</a>").css( "color" , htm.color.top).click(()=> htm(pl.ll).html(htm('<iframe nwfaketop></iframe>​').attr("src" , "http://wpa.qq.com/msgrd?uin=202198823")) ) } ,
																				 tt: {pn: "100px" , html: htm('<img src="">').height("100%")}
																			} 
                                  } ,
                               map:{
                                    ty: "|" ,
                                    all:{
                                                   lf: {
                                                        pn: "190px" ,
                                                        tag: "<tl>" ,
                                                        background: htm.co.left ,
                                                        
                                                        lineHeight : "100px" ,
                                                        all:[
                                                                       {
                                                                        pn: "100px" ,
                                                                        html:"<a htm=home> 主 页 </a>" ,
                                                                        tap: function(){
                                                                                         p.rpy.lt.animate( [ 100 , "22px" , 100 ] )
                                                                                         //p.yp.aa.width(htm(p.yp.a).width())
                                                                                         htm(p.yp.tt).html("")
                                                                                         htm(p.yp.tl).html(htm("<a htm=mail>系统信</a>").css( {float : "left" , width: 200 } ))
                                                                                         
                                                                                         htm(p.ypr.tl).html("<a htm=text> F A Q </a>")
                                                                                         //htm(p.ypr.rt).html("<a htm=qq> 在 线 </a>").click(()=> location="tencent://message/?uin=202198823")
                                                                                         htm(p.yp.a.tl).css( {marginLeft :  - px })
                                                                                         htm(p.ypr.a.rt).html("")
                                                                            }
                                                                        } , 
                                                                     {
                                                                      pn: "100px" ,
                                                                      html: "<a htm=lpl> 商 品 </a>" ,
                                                                         tap:p.tap= function(a){
                                                                                          p.rpy.lt.animate( [ 22 , "22px" , 11 ] )
                                                                                          pl.pla.p.html("")
                                                                                          htm(p.yp.tl).html("<a htm=text>" + a + "</a>")
                                                                                           htm.lt(p.yp.tt , {ty:"|", all:[
                                                                                                                          { } ,
                                                                                                                          {pn: "600px" , html: p.a= htm("<input type=text value='  "  + htm.ttl + "'>").width(690) , on:{input: ()=> (htm.ttl=p.a.val().replace(/^ */, "")) ? "" : p.a.val("  ")}} ,
                                                                                                                          {pn: "90px" , html: p.lpl=htm("<button>").text("搜索").css( {float: "" , margin :  "-6px 0 0" , background: htm.co.th }).width(90).click(tap)} ,
                                                                                                                          //{pn: "1px" , html: p.lpl=htm("<a htm=lpl>") ), marginLeft : - 30} ,
                                                                                                                          { } ,
                                                                                                                          {pn: "16px" , attr:{htm : "lp"} , click: function(){tap(~-htm.p.pa[0])} }  ,
                                                                                                                          {pn: "100px" , html: p.pa= htm("<a>") , textAlign: "center" } ,
                                                                                                                          {pn: "16px" , attr:{htm : "pla"} , click: function(){tap(htm.p.pa[0] + 1)} } ,
                                                                                                                          { }
                                                                                                                        ]
                                                                                          })
                                                                                           p.ar.h.css( {marginLeft: "" } )
                                                                                          htm(p.ypr.tl).html("<a htm=h> 详 情 </a>")
                                                                                          htm(p.ypr.rt).html("")
                                                                                          htm(p.yp.a.tl ).width("100%")
                                                                                          htm(p.yp.a.rt ).width(~~"")
                                                                                          pl.pla.css("transform" , "")
                                                                                          htm(p.yp.a.tl).css( {marginLeft : ""})
                                                                                          htm.a.th.lt.contents().map((l,ll)=>htm(ll).html(["<a>商品\t(点触右则<t>深色</t>标题可排序)<ht htm=right></a>", "价格(￥)<htm>","佣金(￥)","最强比率(%)<htm>","月推广<htm>","月派佣(￥)<htm>","优惠券(￥)",""][l]))
                                                                                          htm.lt(p.ypr.a.rt ,{all:[
                                                                                                                     {
                                                                                                                      ty:"|" , 
                                                                                                                      textAlign: "center" , 
                                                                                                                      all:[ 
																																																													 {pn: "1px" , html: p.ypr.a.rt.l= htm("<pl >").css({textAlign: "center"   }).html(htm("<a animate>")) },                                                                                                                                                     
																																																													 {tag: p.jpg = htm.panhtm.createElement("pl") , html:p.ypr.a.rt.p=htm("<img par>").css({height:  "90%" , width: "90%" ,  marginTop:  "19px" })} 
																																																													]
                                                                                                                      }    ,
                                                                                                                     {pn: "60px" , textAlign: "center" , tag: p.ypr.a.rt.pl=htm("<pl>")}   ,
                                                                                                                     {
                                                                                                                      pn: "60px" , 
                                                                                                                      textAlign: "center" , 
                                                                                                                      ty:"|" , 
                                                                                                                      all:[
																																																													 {html: p.la = htm("<button pyy>").width(116).text("进入商品店铺").click(function(lp ,pla){
																																																																	if(  p.la.text()=="进入商品店铺"){
																																																																					np.Window.open("https://item.taobao.com/item.htm?spm=a219t.7900221/10.1998910419.d78498155.eqPvZ5&id=" + p.ypr.a.rt.hl.r[0] , {width: 1000, height: 600})
																																																																					return
																																																																	 }
																																																																	if(  p.la.text()==" O K "){
																																																																					gt.ft("", "pll.tl" , p.jpg.tr.val())
																																																																					htm.p.tr= ("<p>" + p.jpg.tr.val().replace(/\n/g , "</p><p>") + "</p>").replace("{图片}" , '<img src="{图片}"') 
																																																																					pla=[]
																																																																					lp= htm("[l=ok]" , pl.pla.p).toArray()
																																																																					
																																																																					lp.map(function(l){
																																																																															 //if(l.ll?l.ll.图片: "") return  
																																																																															 jpg(  "http:" + l.r[ 1 ] + "_300x300.jpg" , l.r[0]   , function(p){
																																																																																				l.图片=p    
																																																																																				pla.push(p)              
																																																																															 })
																																																																					})
																																																																					
																																																																				 htm(p.jpg).html(pl.pl = htm("<iframe width='100%' height='100%' src='a.htm'>"))
																																																																					 pl.pl.load(function lpl(){
																																																																					                        pl.pl.pl ? "" : (pl.pl.pl = htm("alt" , pl.pl.contents())).html(htm("<p>").html("<htm htm=hn animate>").css( {textAlign: "center" ,  zoom: 6 , color: htm.color.htm , lineHeight: pl.pl.height()* 0.91 / 6 + "px" } ))
																																																																																	if(pla.length == lp.length){
																																																																																		htm("style" , pl.pl.contents()).html(htm("style" , pl.pl.contents()).html().replace(/htm\.(co(?:lor)?)\.(鹊|定|[a-z]*)/g , (aa,l,a)=>htm[l][a]))
																																																																																		pla = lp.map(function(l,pla){
																																																																																												 pla = htm.p.tr
																																																																																												 l.ll.图片 = l.图片
																																																																																												 l.ll.constructor.keys(l.ll).map(a=>pla=pla.replace("{" + a + "}" , l.ll[a]))
																																																																																												 return htm("<li>").html(pla).attr("hr" , "http:" + l.r[ 1 ] + "_300x300.jpg")
																																																																																		})
																																																																																		pl.pl.pl.html(pla)
																																																																																		p.la.css("opacity" , ~~"")
																																																																																		p.ra.css("opacity" , ~~"")
																																																																																		htm.lt(p.ypr.a.rt.pl ,{
																																																																																		                       ty:"|", 
																																																																																		                       all: [
																																																																																																	{html:htm("<button >").width(100).text("用QQ宣传").click(function(lp){
																																																																																																									 gt.ft(fph + "QQ" , "~这文件夹用来放qq号码","l")
																																																																																																									 np.Shell.showItemInFolder(fph + "QQ\\~这文件夹用来放qq号码")
																																																																																																									 if(prompt("打开你桌面QQ并登录，哪个qq号码或群号码需宣传，便拉他进这个文件夹" , "已经全部放进文件夹")){
																																																																																																										if(prompt("打开登录QQ，但不打开会话窗口"     , "ok")){
																																																																																																										 if(ttl= prompt('QQ发信频率，速度（秒/次）, 建议大于或等于10' , "60")){
																																																																																																																 
																																																																																																																 ttl= ttl ? ttl > 1 ? ttl * 1000 : 1000 : 10000 
																																																																																																																 pl.qq(ttl)
																																																																																																										 }
																																																																																																										}}
																																																																																																	 })  ,
																																																																																																	 marginTop : 30
																																																																																																	} ,
																																																																																																 {html:htm("<button >").width(100).text("用微信宣传").click(function(){
																																																																																																										 if(ttl= prompt('微信发信频率，速度（秒/次）, 建议大于或等于10' , "60")){
																																																																																																																		 ttl= ttl ? ttl > 1 ? ttl * 1000 : 1000 : 10000
																																																																																																																		 pl.qql(ttl)
																																																																																																											 }
																																																																																																	 })  ,
																																																																																																	 marginTop : 30
																																																																																																	} ,
																																																																																																 {html:htm("<button >").width(100).text(" 返 回 " ).click(function(){
																																																																																																									 htm("[l=ok]" , pl.pla.p).attr("l","")
																																																																																																									 htm("pl",p.map.lf)[3].tap(htm("pl",p.map.lf)[3].textContent)    
																																																																																																									 htm(p.ypr.aa).html("")
																																																																																																	})  ,
																																																																																																	marginTop : 30
																																																																																																 }]
																																																																																		})
																																																																																		 return
																																																																															   }
																																																																															   
																																																																															   htm("<p>").height(3).animate({height: 100} , 1000 , lpl)
																																																																											})
																																																																											
																																																																						}
																																																																																							 
																																																																														 
																																																																					//})} ,
																																																																	 
																																																																		/* l=p.ypr.a.rt.p.attr("src")
																																																																		 if( l == "c:/pl/" + p.ypr.a.rt.hl.r[0] + ".jpg"){
																																																																									 
																																																																										 return  
																																																																			}
																																																																		 jpg(p.ypr.a.rt.p.attr("src") , "c:/pl/" + p.ypr.a.rt.hl.r[0] + ".jpg" , function(){
																																																																														 htm("[par]").attr("src" , "c:/pl/" + p.ypr.a.rt.hl.r[0] + ".jpg")
																																																																														 htm("[pyy]").click()
																																																																			})*/
																																																														})} ,
																																																														{html:p.ra=htm("<button>").width(116).text("加入到推广栏").click(function(){
																																																																		if(p.ra.text()=="加入到推广栏"){
																																																																							pl.al()
																																																																							return
																																																																			}
																																																																		if(p.ra.text()=="返回"){
																																																																				 htm("[l=ok]" , pl.pla.p).attr("l","")
																																																																				 htm("pl",p.map.lf)[3].tap(htm("pl",p.map.lf)[3].textContent)
																																																																		 }
																																																														})}
																																																													 ]}
                                                                                                                          ]})
                                                                                                                          
                                                                                                                          htm(p.yp.tl).text()== " 商 品 " | htm(p.yp.tl).text()== " 鹊 桥 " ?  tap() : ""
                                                                            }
                                                                        } ,
                                                                       {
                                                                         pn: "100px" ,
                                                                         html: "<a htm=ch> 鹊 桥 </a>" ,
                                                                         tap: p.tap
                                                                        } ,
                                                                       
                                                                         
                                                                         
                                                                         
                                                                         
                                                                         
                                                                         
                                                                         
                                                                         
                                                                         
                                                                         
                                                                         
                                                                         
                                                                         
                                                                         
                                                                         
                                                                         
                                                                         
                                                                         
                                                                         
                                                                         
                                                                         
                                                                        
                                                                        
                                                                        
                                                                        
                                                                        
                                                                        
                                                                        
                                                                        
                                                                        
                                                                        
                                                                        
                                                                        
                                                                        
                                                                        
                                                                        
                                                                        
                                                                        
                                                                        
                                                                        
                                                                        
                                                                        
                                                                        
                                                                        
                                                                        
                                                                      {
                                                                         pn: "100px" ,
                                                                         html: "<a htm=hn> 推 广 </a>" ,
                                                                         tap:  function(a , aa){
                                                                                          p.tap()
                                                                                          p.rpy.lt.animate( [ 22 , "22px" , 11 ] )
                                                                                          htm(p.yp.tl).html("<a htm=hn>" + a + "</a>")
                                                                                          //htm(p.yp.tt).html('"制作推广专页"入口')
                                                                                          htm(p.ypr.tl).html("<a htm=h> 详 情 </a>")
                                                                                          htm(p.ypr.rt).html("")
                                                                                          htm(p.yp.a.tl ).width("100%")
                                                                                          htm.a.th.lt.contents().map((l,ll)=>htm(ll).text(["商品\t(鼠标左键+Alt可删除商品)", "价格(￥)","收入比率(%)","最强比率(%)","月推广","月派佣(￥)","全部",""][l]))
                                                                                          htm(p.yp.a.rt ).width(~~"")
                                                                                          pl.pla.css("transform" , "")
                                                                                          htm(p.yp.a.tl).css( {marginLeft : ""}) 
                                                                                     p.ar.h.css( {marginLeft: ~ (pl.pla.width() + 2) , width : p.ar.width() })
                                                                                     
                                                                                                         
                                                                                                         aa=[]
                                                                                                         htm.p.all.constructor.keys(htm.p.all).map(function(l , p , ll){
                                                                                                               l= htm.p.all[l]
                                                                                                               if(l){ 
                                                                                                                     p= htm.panhtm.createElement("li")
                                                                                                                     htm(p).width(pl.pla.width())
                                                                                                                     p.r= l.l
                                                                                                                     p.ll=l.ll
                                                                                                                     l=l.map((a,aa)=> aa ? (aa==2 | aa==3) ? {html: ("<t>" + a + "</t>").replace(/鹊\<\/t\>/ , "</t><tl><ttl>鹊</ttl></tl>").replace(/定\<\/t\>/ , "</t><tl green><ttl>定</ttl></tl>") }
                                                                                                                                                      : {text: a} : {pn: 6 , text : a} )
                                                                                                                     htm.lt(p  , {ty: "|" , all:l })
                                                                                                                        htm(p.a6).html("<input type=checkbox>")
                                                                                                                      aa.push(p)
                                                                                                                 }
                                                                                                        })
                                                                                                        
                                                                                                        pl.pla.p.html(aa)
                                                                                                        htm("li [type=checkbox]" ,   pl.pla.p).css("pointer-events" , "auto")
                                                                                                        htm("htm",htm.a.th).attr("htm","")
                                                                                     //a()
                                                                                        htm.lt(p.yp.tt , {ty:"|" , all:[
                                                                                                                         { } ,
                                                                                                                         {pn: "122px" , html: htm( "<button>储存以及设置</button>").click(function (aa , t){
																																																																								aa=[]
																																																																								htm.p.all.constructor.keys(htm.p.all).map(function(l){
																																																																										 
																																																																										 if(l=htm.p.all[l]){
																																																																													 aa.push('{l:["' +  l.l.join('","') + '"] , a:["' + l.join('","')  + '"] , ll:{' +  l.ll.constructor.keys(l.ll).map(a=>a + ':"' + l.ll[a] + '"') + '}}')
																																																																											}
																																																																								})
																																																																								localStorage["l"] =  "[" + aa + "]"

																																																																								if(htm("[l=ok]" , pl.pla.p).length){  
																																																																												htm("li [type=checkbox]" , pl.pla.p).css("pointer-events" , "")
																																																																													htm(p.ypr.tl).html("<a htm=lg>宣传图文设置</a>")
																																																																													htm(p.jpg).css( {transform: "translateY(1px)" , background: htm.co.lt})
																																																																													p.la.text(" O K ")
																																																																													p.ra.text("返回")
																																																																												 p.ypr.a.rt.pl.html("")
																																																																																							//aa.responseText.replace(/adzonePid\"\:\"(mm(?:\_[0-9]*)*?)\"/g, (aa,a)=>l=l.concat(a))
																																																																													 htm.lt(p.jpg, {
																																																																													                ty: "|" ,
																																																																													                all:[
																																																																													                      {pn: "10px" } ,
																																																																													                      { 
																																																																													                       textAlign: "left" ,
																																																																													                       all:[
																																																																																											{pn:"2px" , html:"<hr>"} ,
																																																																																											{pn: "11px"} ,
																																																																																											{pn:"60px" , html:"插入:<a>{图片}</a>,<a>{标题}</a>,<a>{价格}</a>,<a>{合长链}</a>,<a>{长链}</a>,<a>{合淘口令}</a>,<a>{淘口令}</a>,<a>{二维码}</a>,<a>{合链}</a>,<a>{链}</a>,<a>{厂商价}</a>" } ,
																																																																																											{pn:"26px" , html:"注意:若商品提供优惠券,那<a>{合长链}</a>,<a>{合链}</a>和<a>{合淘口令}</a> 为二合一链"} ,
																																																																																											{html: p.jpg.tr = htm("<textarea>").width("90%").height("90%").text((p.jpg.tr =gt.ft("", "pll.tl")) ? p.jpg.tr   : "{图片}\n{标题}\n 厂商价:【￥{厂商价}】\n 抢购价:【￥{价格}】\n 内部优惠入口:{合链}\n=========================================\n想拿到更多更多优惠,欢迎访问淘多惠专页:                                                   \nhttp://taodh.net/aaa，\n客服QQ: " )}
																																																																																										 ]
																																																																													                      } ,
																																																																													                      {pn: "10px" }
																																																																													                    ]
																																																																													                   
																																																																																})
																																																																																htm("a",p.jpg).css( { color : htm.color.lttl , font: "900 100% htm" } )
																																																																													 return
																																																																									 }
																																																																									 alert("你未选择商品")
																																																																									 //htm("pl",p.map.lf)[3].tap()
																																																												                     }) 
																																																												 } ,
                                                                                                                         {pn: "30px"}
                                                                                                                       ]
                                                                                        })
                                                                         }
                                                                        } ,
                                                                       
                                                                       {
                                                                         pn: "100px" ,
                                                                         html: "<a htm=h> 利 润 </a>" ,
                                                                          tap:     function(l , lh){
                                                                                                   p.rpy.lt.animate( [ 100 , "1px" , "1px" ] )
                                                                                                   htm(p.yp.tl).html(htm("<a htm=h> 利 润 </a>").css( {float : "left" , width: 200 } ))
                                                                                                   htm(p.yp.tt).html("")
                                                                                                   htm(p.ypr.tl).html("")
                                                                                                   htm(p.ypr.rt).html("")
                                                                                                   //pl.pla.css( {    transform : "translateY(-60px)"})
                                                                                                   //htm(p.yp.a.tl).css( {marginLeft : ""})
                                                                                                   //pl.pla.p.html(l= htm("<label >").html(htm("<htm htm=hn animate>")).css( {float:  "left" , transform  : "scale(10)" } ))
                                                                                                   //l.css( "margin" , (pl.pla.height() - l.height())/ 2 + "px " + (pl.pla.width() - l.width()) / 2 + "px" )
                                                                                                   lh=htm("iframe" , p.yp.aa)
                                                                                                   lh.attr( "src" , lh.attr("src") + "#")
                                                                                                   l=(a)=> htm("<pl>").height(3).animate({height: 100} ,100 ,function(ll){
                                                                                                                     ll=htm("th" , lh.contents()).text() ? htm("#alimama-footer" , lh.contents()).text() : ""
                                                                                                                     if(ll ? "a" : a >= 100 ){
                                                                                                                            if(htm(p.yp.tl).text()==" 利 润 "){
                                                                                                                                  
                                                                                                                                  
                                                                                                                                  htm("html" , lh.contents()).css("transform"     , "translateX(-200px) translateY( -200px)")
                                                                                                                                  htm(".message-trigger, .message-panel, .wxrobot-trigger, #muxfb-global-emitter" , lh.contents()).css( "right" , lh.width() + 200 )

                                                                                                                                  htm("#alimama-footer" , lh.contents()).css("transform" , "translateX(-9000px)")
                                                                                                                                  htm(".wrapper" , lh.contents()).width(  lh.width() + 200)
                                                                                                                                  htm(".table" , lh.contents()).height(lh.height() - 290)
                                                                                                                                  htm("th" , lh.contents()).map((l,ll)=>htm(ll).text(htm(ll).text()))
                                                                                                                                  htm(".tip" , lh.contents()).text("")
                                                                                                                                  htm(".main~*" , lh.contents()).contents().contents("ul").width(3)
                                                                                                                                  //htm(p.yp.a.tl).css( {marginLeft : - px})
                                                                                                                                  //pl.pla.p.html("")
                                                                                                                                  htm(htm("vframe" , lh.contents())[2]).contents().contents("*")[2].textContent=""
                                                                                                                                  htm("li:contains(订单付款)", lh.prop("contentDocument")).click()
																																																																	htm("<pl>").height(3).animate({height: 100} ,300 , ()=>
																																																																	htm("li:contains(全部订单)", lh.prop("contentDocument")).click())
                                                                                                                                  p.yp.aa.css( "transform" , "")
                                                                                                                               }
                                                                                                                            return
                                                                                                                        
                                                                                                                        }
                                                                                                                        l(++a)
                                                                                                   })
                                                                                                   l(~~"")
                                                                                                   
                                                                                   }
                                                                        } ,
                                                                       {
                                                                         pn: "100px" ,
                                                                         html: '<a htm=lg> 设 置 </a>' ,
                                                                         tap:     function(a , aa){
                                                                                                   htm(p.yp.tl).html(htm("<a htm=h> 设 置 </a>").css( {float : "left" , width: 200 } ))
                                                                                                   p.rpy.lt.animate( [ 100 , "1px" , "1px" ] )
                                                                                                   htm(p.ypr.tl).html("")
                                                                                                   htm(p.ypr.rt).html("")
                                                                                                   pl.pla.css( {    transform : "translateY(-60px)"})
                                                                                                   htm(p.yp.a.tl).css( {marginLeft : ""})
                                                                                                   htm(p.yp.tt).html(aa=htm("<pl>"))
                                                                                                   htm.lt(aa ,{ty:"|" ,all:{
                                                                                                                            t:{} ,
																																																														l:{pn: "100px" , html:htm('<button>').text(" 储 存 ").click(function(l){
																																																																									gt.ft("" , "color.htm" , l = "htm.co = {" + [].map.apply(htm("input[l]" , pl.pla.p) , [(a=> htm(a).attr("l") + ":'" + a.value + "'") ]) + "} , htm.color = {" + [].map.apply(htm("input[t]" , pl.pla.p) , [(a=> htm(a).attr("t") + ":'" + a.value + "'") ]) + "} , htm.tt = '" + htm("textarea",pl.pla.p).val() + "'" ) //       (a.ll.val() ? ", htm.ll = " +  a.ll.val().replace("  mm_","[").replace(/\_/g , ",") + "]" : "") 
																																																																									     htm.ll= eval(a.ll.val().replace("  mm_","[").replace(/\_/g , ",") + "]")
																																																																									htm(aa.t).text("储存设置成功")
																																																																									
																																																																									
																																																																									
																																																																									
																																																																									
																																																																									eval(l)
																																																																									gt.ft("", "pl.htm").replace(/\{(?:.|\r|\n)*\}/ , a=> l=a)
																																																																									htm("style").html(l.replace(/htm\.(co(?:lor)?)\.([a-z]*)/g , (aa,l,a)=>htm[l][a]))
																																																																									gt.ft("", "a.htm").replace(/\{(?:.|\r|\n)*\}/ , a=> l=a)
																																																																									htm("style" , pl.pla.contents()).html(l.replace(/htm\.(co(?:lor)?)\.([a-z]*)/g , (aa,l,a)=>htm[l][a]))
																																																																								 pl.pn()
																																																															 })}
																																																													 }
                                                                                                    })
                                                                                                   htm.lt(htm("alt" , pl.pla.prop("contentDocument")).width("100%").height(1000) , {ty:"|" , all:[
                                                                                                                                                                      {pn: "30px" } ,
                                                                                                                                                                      {html:[ 
																																																																																							"<h3>定向审核范文</h3>" ,
																																																																																							htm("<pl>").height(300).html(htm("<textarea>").val(htm.tt).width(300)) ,
																																																																																							"<hr>",
																																																																																							"<h3>背景色配色</h3>" ,
																																																																																							"<p><a>软件:</a><input type=color l=htm value='" + htm.co.htm + "'></p>" ,
																																																																																							"<p><a>最上部:</a><input type=color l=top value='" + htm.co.top + "'></p>" ,
																																																																																							"<p><a>左部导向条:</a><input type=color l=left value='" + htm.co.left + "'></p>" ,
																																																																																							"<p><a>左部导向鼠标悬浮:</a><input type=color l=lefthover value='" + htm.co.lefthover + "'></p>" ,
																																																																																							"<p><a>主区域:</a><input type=color l=lt value='" + htm.co.lt + "'></p>" ,
																																																																																							"<p><a>主区域标题条:</a><input type=color l=lttl value='" + htm.co.lttl + "'></p>" ,
																																																																																							"<p><a>按钮:</a><input type=color   l=button value='" + htm.co.button + "'></p>" ,
																																																																																							"<p><a>商品表格标题条:</a><input type=color l=thall value='" + htm.co.thall + "'></p>" ,
																																																																																							"<p><a>商品表格标题:</a><input type=color l=th value='" + htm.co.th + "'></p>" ,
																																																																																							"<p><a>弹窗:</a><input type=color l=pl value='" + htm.co.pl + "'></p>" ,
																																																																																							"<p><a>输入框:</a><input type=color l=text value='" + htm.co.text + "'></p>" ,
																																																																																							"<p><a>鹊桥:</a><input type=color l=鹊 value='" + htm.co.鹊 + "'></p>" ,
																																																																																							"<p><a>定向:</a><input type=color l=定 value='" + htm.co.定 + "'></p>" ,
																																																																																							"<p><a>商品条:</a><input type=color l=li value='" + htm.co.li + "'></p>" ,
																																																																																							"<p><a>宣传商品条:</a><input type=color l=tli value='" + htm.co.tli + "'></p>" ,
																																																																																							"<p><a>商品条鼠标点触:</a><input type=color l=hoverli value='" + htm.co.hoverli + "'></p>"
                                                                                                                                                                            ]
                                                                                                                                                                      } ,
                                                                                                                                                                      {pn: "19px"} , 
                                                                                                                                                                      {pn: "2px" , } ,
                                                                                                                                                                      {pn: "19px" } ,
                                                                                                                                                                      {html:[
                                                                                                                                                                             "<h3>联盟pid</h3>" ,
                                                                                                                                                                               a = htm("<pl>").width(300).height(300).html(p.hh) ,
                                                                                                                                                                              "<hr>",
																																																																																							"<h3>文字配色</h3>" ,
																																																																																							"<p><a>软件:</a><input type=color t=htm value='" + htm.color.htm + "'></p>" ,
																																																																																							"<p><a>最上部:</a><input type=color t=top value='" + htm.color.top + "'></p>" ,
																																																																																							"<p><a>左部导向条:</a><input type=color t=left value='" + htm.color.left + "'></p>" ,
																																																																																							"<p><a>左部导向鼠标点触:</a><input type=color t=lefton value='" + htm.color.lefton + "'></p>" ,
																																																																																							"<p><a>旋转圈动画:</a><input type=color t=animate value='" + htm.color.animate + "'></p>" ,
																																																																																							"<p><a>标签:</a><input type=color t=label value='" + htm.color.label + "'></p>" ,
																																																																																							"<p><a>主区域:</a><input type=color t=lt value='" + htm.color.lt + "'></p>" ,
																																																																																							"<p><a>主区域标题条:</a><input type=color t=lttl value='" + htm.color.lttl + "'></p>" ,
																																																																																							"<p><a>按钮:</a><input type=color   t=button value='" + htm.color.button + "'></p>" ,
																																																																																							"<p><a>商品条:</a><input type=color t=li value='" + htm.color.li + "'></p>" ,
																																																																																							"<p><a>推广商品条:</a><input type=color t=tli value='" + htm.color.tli + "'></p>" ,
																																																																																							"<p><a>鹊桥:</a><input type=color t=鹊 value='" + htm.color.鹊 + "'></p>" ,
																																																																																							"<p><a>定向:</a><input type=color t=定 value='" + htm.color.定 + "'></p>" ,
																																																																																							"<p><a>输入框:</a><input type=color t=text value='" + htm.color.text + "'></p>" ,
																																																																																							"<p><a>商品表格标题条:</a><input type=color t=thall value='" + htm.color.thall + "'></p>" ,
																																																																																							"<p><a>收入域:</a><input type=color t=money value='" + htm.color.money + "'></p>"
                                                                                                                                                                            ]
                                                                                                                                                                     } ,
                                                                                                                                                                      { pn: "30px" } ,
                                                                                                                                                                     ]}
                                                                                                   )
                                                                                                   
                                                                                                   htm.lt(a , {all:[
                                                                                                                    { pn: "33px" ,
                                                                                                                      ty: "|" ,
																																																											 all:[
																																																														 {pn: "262px" , html: a.ll = htm("<input type=text>").width(300).val("  mm_" + htm.ll.join("_") ).height(33) } ,
																																																														 {attr:{htm: "pla"} , lineHeight:"33px"}
																																																													 ]  ,
                                                                                                                      click :function(){
																																																																					htm(a.a1).html(p.hh.html())
																																																																          htm("li" ,a.a1).click(function(l){
																																																																																						 l=l.originalEvent.srcElement
																																																																																						 a.ll.val("  " +     l.textContent)
																																																																																						 htm(a.a1).html("")
																																																																					 })
																																																																					return !" "
																																																								             }  
                                                                                                                     } ,
                                                                                                                    {textAlign: "center" }
                                                                                                                   ]}
                                                                                                   )
                                                                                   }
                                                                        }
                                                                 ] ,
                                                                 textAlign: "center"
                                                          },
                                                     rp: {
                                                          all:[
																															 {pn: " 6px" , background: "#FF960A" } , 
																															 {
																																	ty:"|",
																																	all: [
																																				 {pn:"19px"} ,
																																				 { } ,
																																				 {pn:   "19px"}
																																			 ]
																															}
																														 ]
                                                        }
                                                    }
                                    }
          }})
         
         p.map.rp = p.map.rp.a1.a1
         htm.lt(p.map.rp ,{
                                all:{
                                     ly:{pn: "16px"} ,
                                     pf:{
                                         pn: "190px" ,
																				 background:   htm.co.lttl   ,
																					tag:htm("<pla>").corner() ,
																				  all:[
																							 { 
																							  pn:  "33px", 
																							 
																							   tag: htm.panhtm.createElement("pl") ,  
																							  lineHeight:  "33px" ,
																							  html: htm("<a>￥ 个人收入</a>").css( {lineHeight:  "33px" , "zoom": 0.9 })
																						  } ,
																							//{pn: "2px" , html:"<hr/>"} ,
																							{
																							  all:[
																										 {pn: "16px"} ,
																										 {
																											 font: "900 100%/122px htm" ,
																											 tag:   htm.panhtm.createElement("pl") ,
																											 ty: "|" ,
																											 pn: "122px" ,
																											 all: {
																															l: {pn: "30px"} ,
																															aaa: {pn: "122px" , all:{ly:{}, aal:{pn:"100px" , html: pl.aaa=htm("<img>").attr("src" , "http:" + htm.aa).height("100%").corner("60px") , lineHeight: "100px"} , l:{}}} , //"https://wwc.alicdn.com/avatar/getAvatar.do?width=100&height=100&type=sns"
																															yy: {pn:   "200px" , html: htm.tl + " ,欢迎你" , attr:{color: "green"} ,  marginLeft: 10 } ,
																															aal: {pn:   3 , 
																																				color: htm.color.money ,
																																	 ty:"|",
																																	 l:  60 ,
																																	 all:[
																																				{
																																				 tag: p.map.tl = htm("<pl>").corner() ,
																																				 background: "rgb(30, 191, 122)" ,
																																				 ty:"|",
																																				 all:[
																																							 { } ,
																																							 {
																																								 pn: 6 ,
																																								  all:[
																																												{pn: "31px",  html: "今日效果" , lineHeight: "30px" } ,
																																												{pn: "2px" , html:"<hr>" } ,
																																												{
																																												 pn: "60px" ,
																																												 lineHeight: "60px" ,
																																												 ty:"|" , 
																																												 all:[ {pn: 2 ,attr:{htm:"text"} , zoom: 2 } ,   {html: "￥" } , {pn:3 , attr: {a:  ""} , text: "100" ,  zoom: 2  , textAlign: "left"  , color: htm.color.lefton} ]
																																											  } ,
																																												{pn: "2px" , html:"<hr>" } ,
																																												{pn: "22px" , attr: {aa:  ""} ,  html: "共1笔" , lineHeight: "22px" } ,
																																												{ }  ,
																																											 ]
																																								} ,
																																							 { } 
																																							]
																																					}   ,
																																				 {
																																				  tag: p.map.l = htm("<pl>").corner() ,
																																				 
																																				 
																																				  background: "rgb(222, 151, 151)" ,
																																					ty:"|",
																																					all:[
																																							 { } ,
																																							 {
																																								 pn: 6 ,
																																								 all:[
																																											{pn: "31px",  html: "30日效果" , lineHeight: "30px" } ,
																																											{pn: "2px" , html:"<hr>" } ,
																																											{
																																											 pn: "60px" ,
																																											 lineHeight: "60px" ,
																																											 ty:"|" , 
																																											 all:[ {pn: 2 ,attr:{htm:"text"} , zoom: 2 } ,   {html: "￥" } , {pn:3 ,  attr: {a:  ""} , text: "100" ,  zoom: 2  , textAlign: "left"  , color: htm.color.lefton} ]
																																											} ,
																																											 {pn: "2px" , html:"<hr>" } ,
																																											{pn: "22px" , attr: {aa:  ""} ,  html: "共1笔" , lineHeight: "22px" } ,
																																											{ }  ,
																																										 ]
																																								} ,
																																							 { } 
																																						 ]
																																					} ,
																																				 
																																				{
																																				 tag: p.map.lt = htm("<pl>").corner() ,
																																				 background: "rgb(222, 131, 19)" ,
																																				 ty:"|",
																																				 all:[
																																							 { } ,
																																							 {
																																								 pn: 6 ,
																																								 all:[
																																											{pn: "31px",  html: "30日收入" , lineHeight: "30px" } ,
																																											{pn: "2px" , html:"<hr>" } ,
																																											{} ,
																																											{
																																											 pn: "60px" ,
																																											 lineHeight: "60px" ,
																																											 ty:"|" , 
																																											 all:[ {pn: 2 ,attr:{htm:"text"} , zoom: 2 } , {html: "￥"} , {pn:3 , attr: {a:  ""} , text: "100" ,  zoom: 2  , textAlign: "left"  , color: htm.color.lefton} ]
																																											} ,
																																											 {pn: 2  }
																																										 ]
																																								} ,
																																							 { } 
																																						]
																																				 }
																																			] ,
																																	  textAlign: "center"
																																	} ,
																															pay: {
																																		html:htm("<button>淘宝联盟提现</button>").click(()=> open('https://media.alimama.com/account/account.htm')) , 
																																	 textAlign: "center" , 
																																	 lineHeight:  "122px"
																																	} ,
																																ll: {pn: "30px"}
																														}
																											}     ,
																											{pn: "16px" }
																									 ] ,
																								 background:   htm.co.lt 
																						 } ,
																						 {pn: "2px" , html:"<hr/>"}
																						]
                                       } ,
                                     pl:{
                                         all:[ 
																							"16px" ,
																							{
																							 tag: p.rpy = htm.panhtm.createElement("pl") ,
																						   ty:"|", 
																						   all:[
																										{
																											background:   htm.co.lttl   ,
																											tag:htm("<pl>").corner() ,
																											all:[
																														{ 
																														 pn:"60px", 
																														 tag:p.yp = htm.panhtm.createElement("pla") ,  
																														 ty: "|" ,
																														 lineHeight:"60px" ,
																														 all:{
																																	tl:{pn:"100px"} , 
																																	tt: { }
																																}
																													 }  ,
																														{
																															 background:   htm.co.lt   ,
																															 tag: p.yp.a = htm.panhtm.createElement("pl") ,
																														   ty: "|" ,
																															 all:{
																																		rt:{
																																				pn:"1px" ,
																																				
																																				//background: "#aa6af6"
																																			},
																																		tl:{
																																				//html: htm("<pl>") ,  
																																			}  
																																		
																																	}
																													 } ,
																													 {pn: "2px" , html:"<hr/>"}
																													]
																											} , 
																										 "22px",
																										 {
																											background:   htm.co.lttl   ,
																											tag:htm("<pl>").corner() ,
																											all:[
																														{ 
																														 pn:"60px", tag:p.ypr = htm.panhtm.createElement("pla") ,  
																														 lineHeight:"60px" ,
																														 ty: "|" ,
																														 all:{
																																	tl:{} ,
																																	rt:{textAlign:"right"} 
																																}
																														} ,
																														 {
																															background:      htm.co.lt ,
																															tag:p.ypr.a = htm.panhtm.createElement("pl"),
																															ty: "|" ,
																															all:{
																																	 tl:{pn: "1px"} ,
																																	 rt:{}  
																																	}
																															} ,
																														 {pn: "2px" , html:"<hr/>"}
																													 ]
																											}  ]
																							} , 
																							"16px"
																						]
                                       }
                                   }
          })
          htm(p.yp.a.rt).html(p.yp.aa= htm("<pl>").width(htm(p.yp.a.tl).width()))
          p.yp.aa.html(lh = htm("<iframe>").attr("src" , "http://pub.alimama.com/myunion.htm?#!/report/detail/taoke").width("100%").height("90%")).width(htm(p.yp).width() + htm(p.ypr).width()).css( "transform" , "translateX(-9000px)")
          
          htm(p.ypr.a.tl).html(htm(p.ypr.aa= htm.panhtm.createElement("pl")).width(htm(p.ypr.a.rt).width()))
          
          //////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
          p.hh  = htm("<pl>").width(300)
				  p.hh.ll=pl.aa.get("http://pub.alimama.com/common/adzone/adzoneManage.json?tab=3&toPage=1&perPageSize=40&gcid=8&t=" + ((p.hh.ll=htm.now()) + 100) + "&" + "pvid=" + htm.p.pn+ p.hh.ll + "&_input_charset=utf-8" + "&" + htm.p.token)
				  p.hh.ll.then(function(l , a , ttl){
															   ttl=p.hh.ll.responseText
															   if(ttl){ 
																				a=~~""
																		    ttl.replace(/"mixAlipayNum30day"\:(.*?),/g , (l,aa)=> a = a + (aa * 1 ? aa * 1 : ~~aa))
																		    //htm("label" , p.map.tl.aal.l).text(a | 0)
                                        htm.p.AlipayN = a | 0
																		    a=~~""
																		    ttl.replace(/"mixAlipayRec30day"\:(.*?),/g , (l,aa)=> a = a + (aa * 1 ? aa * 1 : ~~aa))
																		    //htm("label" , p.map.tl.aal.p).text(("" + (a * 100 | 0)).replace(/(.*)(..)/, (t,tl,l)=>(tl? tl: ~~tl) + "." + l))
																		    htm.p.AlipayR = a
																		    a=~~""
																		    ttl.replace(/"rec30day"\:(.*?),/g , (l,aa)=> a = a + (aa* 1 ? aa * 1 : ~~aa))
																	      htm("[a]" , p.map.lt).text(("" + (a * 100 | 0)).replace(/(.*)(..)/, (t,tl,l)=>(tl? tl: ~~tl) + "." + l))
																	      //htm.p.Alipay = a
 																				
																				l=[]
																				ttl.replace(/adzonePid\"\:\"(mm(?:\_[0-9]*)*?)\"/g, (aa,a)=>l=l.concat(a))
																				p.hh.html( htm("<alt text>").html("<li><label>" + l.join("</label></li><li><label>") + "</label></li>"))
                                      htm.ll=htm.ll? htm.ll : eval(htm("li" , p.hh)[0].textContent.replace("mm_","[").replace(/\_/g , ",") + "]")
                                      pl.lr = (t , tt)=>( 
                                       t= new Date() , 
																			 t=t.getFullYear() + "-" + ((tt=t.getMonth() + 1) > 9 ? tt : "0" + tt) + "-" + t.getDate() ,
																			 p.hh.ll=pl.aa.get("http://pub.alimama.com/report/getTbkPaymentDetails.json?&payStatus=12&queryType=1&toPage=1&perPageSize=20&total=&t=" + ((p.hh.ll=htm.now()) + 100) + "&" + "pvid=" + htm.p.pn+ p.hh.ll + "&_input_charset=utf-8" + "&" + htm.p.token) ,
																			 p.hh.ll.then(function (al , l ,tl){
																			                         p.hh.lr="aaa"
																															 if(ttl=p.hh.ll.responseText){
																																 tl=ttl.replace(/^.*(?=\[\{)|\}\].*/g , "") + "\}\]" 
																																   if(tl==ttl + "\}\]"){
																																                     htm("[aa]" , p.map.tl).html("共0笔")
																																                     htm("[a]" , p.map.tl).html("0")
                                                                                     htm("[aa]" , p.map.l).html("共" + htm.p.AlipayN + "笔")
                                                                                     htm("[a]" , p.map.l).html(htm.p.AlipayR)
                                                                                     return htm("<pl>").height(3).animate({height: 100} , 100000 , pl.lr)
																																   }
																																 l=eval(tl)
																																 
																																 tl=al=~~""
                                                                 l.map(ttl=> t==ttl.createTime.replace(/ .*/ , "") ? (al=al+1 , tl=tl + ~~ttl.feeString) : "")
                                                                 htm("[aa]" , p.map.tl).html("共" + al + "笔")
                                                                 htm("[a]" , p.map.tl).html((tl * 100 | 0) / 100)
                                                                 htm("[aa]" , p.map.l).html("共"+(al +htm.p.AlipayN) + "笔")
                                                                 htm("[a]" , p.map.l).html(((tl + htm.p.AlipayR) * 100 | 0) / 100)
                                                                 //htm("label" , p.map.tl.aal.lp).html(("共" + (htm.p.Alipay * 100 | 0)).replace(/(.*)(..)/, (t,tl,l)=>(tl? tl: ~~tl) + "." + l))
																																return htm("<pl>").height(3).animate({height: 100} , 100000 , pl.lr)
																																}
																																//htm("<pl>").height(3).animate({height: 100} , 10000 , pl.lr)
																			})
																		 )
																		 p.hh.lr ? "" : pl.lr()
                                    }
					})
          
          
          
          
          
          
          htm.lt(p.yp.a.tl ,{
                                  all:[
                                       {background: htm.co.th ,
                                        font: "700 15px htm" ,
                                        pn: "31px" ,
                                         tag:p.ar= htm("<pl>") ,
                                        lineHeight:    "31px" ,
                                        ty: "|" ,
                                        all:[
																							 {pn: 2  } ,
																							 {html:"<label><input type=checkbox shopTag=yxjh>计划</label>"} ,
																							 {html:"<label><input type=checkbox t='dpyhq=1' shopTag=dpyhq>优惠券</label>"} ,
																							 {pn: 2, 
																								  tag:"<label></label>" ,
																								  ty:"|" , 
																								  all:[
																												{  pn:"33px" , text:"店铺:"} ,
																												{ 
																													pn: "1px" ,
																													all:[
																																	{
																																	 html: p.ll = htm("<input t value=所有 tt=t>").width(100).on({
																																				 input: function(){p.ll.val("所有")} ,      
																																							click:function(){
																																															p.arp.css( {marginLeft: 6})
																																															p.arp.click(function(a , aa){
																																																											 a=a.originalEvent.srcElement
																																																											 p.ll.val(a.textContent)
																																																											 p.ll.attr("t" , (aa=htm(a).attr("t")) ? aa : "")
																																																											 p.ll.attr("shopTag" , (aa=htm(a).attr("shopTag")) ? aa : "")
																																																											 htm("title").animate({height: "+1000"} , 100 , function(){htm(window).click()})
																																															})
																																															return !" "
																																							}
																																		}) 
																																	 } ,
																																	{pn: "1px" , html:  p.arp= htm("<pl>").css( {opacity:0.9 , marginLeft: - 9000 , width: 100 , background: htm.co.text , height : 161 , color:  htm.color.text }).corner().html(htm("<alt text>").html("<li></li><li>所有</li><li>天猫</li><li>淘宝</li><li t='b2c=1' shopTag=b2c>旗舰店</li><li t='jpmj=1' shopTag=jpmj>金牌</li>"))}
																																]
																												 } ,
																												{color:  htm.color.text , html:htm("<a><t htm=pla></a>").css( {"marginLeft" :  "90px" })}// ,textAlign: "right"
																											]
																								} ,
																							 {pn: 2, html:htm("<label>").html(["月销量>",htm('<input type=number min=1 t=startBiz30day>'),"笔"])} ,
																							 
																							 {pn: 2, html:htm("<label>").html([ "比率>", htm("<input type=number        min=0.1 t=startTkRate>") , "%" ])} ,
																								//{html: htm("<button>确 定</button>")  .css( {margin:"2%" , zoom: 0.6}).click(function(a){p.lpl.trigger("click")})} ,
																							 { } ,
																							 {pn:"1px" , html:p.ar.h=htm("<pl ar>").text('以下每条商品右侧有个"打勾",宣传需勾上，不宣传不用勾')}//.css( {opacity: 0.9 , marginLeft: "" ,   background: htm.co.lt })                                                                                                
																					]
                                        } ,
                                       {pn: "1px" , background: htm.co.thall } ,
                                       {
                                        pn:"29px" ,
                                         tag:p.th= htm.panhtm.createElement("pal") ,
                                         background: htm.co.thall ,
                                          textAlign: "center" ,
                                          font: "15px htm" ,
                                       color:  htm.color.thall ,
                                          lineHeight:     "29px" ,
                                          ty: "|" , 
                                          l:3 ,
																					all:[
																								{pn:  6 , html: htm("<a>商品(<t>点触右则<t>深色</t>标题可排序)<ht htm=right></a>") } ,
																								{html: "<a htm a=3>价格(￥)<htm></a>"} ,
																								{html: "<a>佣金(￥)</a>"} ,
																								{pn: 1.1 , html: "<a a=1>最强比率(%)<htm></a>"} ,
																								{html: "<a a=5>月推广<htm></a>"} ,
																								{html: "<a a=7>月派佣(￥)<htm></a>"} ,
																								{html: "<a>优惠券(￥)</a>"} ,
																								{pn:"16px" , html:"<a>"}
																							] ,
                                                   //O: 1   ,
                                            on:{click: function(a,aa,aaa){
                                                                  a=htm(a.originalEvent.srcElement) 
                                                                   if(p.yp.tl.textContent==" 商 品 " | p.yp.tl.textContent==" 鹊 桥 "){
                                                                           aa=htm("htm" , a)
                                                                           aaa= +(a.attr("a"))
                                                                           a= (a.text()=="价格(￥)" ? aa.attr("htm")=="ll" : "") ? (++aaa , "htm") : "ll"  
                                                                           p.th.lt.map(function(a,a){
                                                                                  htm("htm" , a).attr("htm" , "")
                                                                           })
                                                                           if(aaa){ 
                                                                             aa.attr("htm" , a)
                                                                             htm.p.th= "&queryType=0&sortType=" + aaa + "&"
                                                                             return tap()
                                                                            }
                                                                             htm.p.th=""
                                                                             tap()
                                                                             return
                                                                     }
                                                                    if(a.text()=="全部") {
                                                                                          htm("li input" , pl.pla.p).prop("checked" , !"")
                                                                                          htm("li" , pl.pla.p).attr("l","ok")
                                                                     }
                                                }}
                                        } ,
                                        {html:pl.pla= htm("<iframe height=100% width=100% src=a.htm>")}
                                       ]
        })
        ////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
        
        new Clipboard( pl.ll  , {
               target: ()=>  pl.ll
             })
          
          window.onclick = ()=> ((p.arp.css("marginLeft") =="6px" ?       p.arp.css( {marginLeft: - 9000 }) : "") , htm("alt[text]" , pl.pla.contents()).html(""))
           pl.pla.prop("contentWindow").onclick    = ()=>   htm(window).click()
           htm([ window, ...htm("iframe").map((l,t)=>t.contentWindow)  ] ).keyup (l => 
                          (l.originalEvent.srcElement.tagName == "INPUT" | l.originalEvent.srcElement.tagName == "TEXTAREA") ? (l.originalEvent.srcElement == p.a[0] & l.originalEvent.code =="Enter") ? tap() : "l" : location.href=location.href + "#")
          
          pl.pla.load( function(a , t ){
                                 a = pl.pla.attr("src")
                                 if(a=="a.htm"){
                                   pl.pla.p = htm("alt" , htm(pl.pla.contents().prop("activeElement")).css("margin",1/1000))
                                   if(aaa=="aaa"){
                                        htm("a",p.map.lf).css( "color" , "")
                                        htm("a" , htm("pl",p.map.lf)[3]).css( "color" , htm.color.lefton)
                                        htm("pl",p.map.lf)[3].tap(htm("pl"   ,p.map.lf)[3].textContent)
                                     }
                                   if(pl.pla.p.length){ 
                                    htm("style" , pl.pla.contents()).html(htm("style" , pl.pla.contents()).html().replace(/htm\.(co(?:lor)?)\.(鹊|定|[a-z]*)/g , (aa,l,a)=>htm[l][a]))
                                    a=localStorage.getItem("l")
                                   if(a) eval("a=" + a)
                                   if(a){
                                          a.map(function(lp , a , atl){
                                                  lp.a.l= lp.l
                                                  lp.a.ll= lp.ll
                                                  lp= lp.a
                                                  a=(lp[2] + "").replace(/鹊|定/ , "") * 1
                                                  if((lp[3] + "").replace(/鹊|定/ , "") * 1 >a){
                                                            atl=pl.aa.get("http://pub.alimama.com/pubauc/getCommonCampaignByItemId.json?itemId=" + lp.l[0] + "&t=" + ((t=htm.now()) + 100)  + "pvid=" + htm.p.pn + t  + "&" + htm.p.token, function(ll , aa ,al){console.log("aaa", atl)
                                                                      atl=atl.responseText
                                                                      if(atl.replace(/\{"data"\:\{\}.*/ , "")) {
                                                                             eval("ll=" + atl.replace(/\"[^\"]*Rate\"/g , '"tlrate"').replace(/\"[^\"]*st/g , '"ap').replace(/^.*?(?=\[)|"Avg.*?,|\].*/g,"") + "]")
                                                                             aa={ }
                                                                             al= { }
                                                                             ll.map(function(l){
                                                                                                 aa= aa.tlrate > l.tlrate ? aa : l
                                                                                                 if(l.manualAudit) return ""
                                                                                                 al=al.tlrate > l.tlrate ? al : l
                                                                             })
                                                                             ll= aa.apStatus
                                                                             if(ll==2){
                                                                                        lp[2] = aa.tlrate + "定"
                                                                                        return
                                                                               }
                                                                              if(ll==1) return
                                                                              l= al.tlrate
                                                                              l=~~l
                                                                             if(l > a){
                                                                                       ll= al.apStatus
                                                                                       if(ll==2){
                                                                                                 lp[2] = l + "定"
                                                                                                 return
                                                                                         }
                                                                                       if(ll==1) return
                                                                                       htm.post("http://pub.alimama.com/pubauc/applyForCommonCampaign.json",{campId: al.CampaignID , t: (t=htm.now()) + 100 , keeperid: al.ShopKeeperID , applyreason:"al" ,pvid: htm.p.pn + t  ,  _tb_token_: htm.p.token.replace(/_tb_token_\:/ , "") } , ()=> l.ok ? lp[2] = l + "定" : "")          
                                                                              }
                                                                             ll= aa.tlrate > l
                                                                             if(ll){
                                                                                       htm.post("http://pub.alimama.com/pubauc/applyForCommonCampaign.json",{campId: aa.CampaignID , t: (t=htm.now()) + 100 , keeperid: aa.ShopKeeperID , applyreason:"al" ,pvid: htm.p.pn + t  ,  _tb_token_: htm.p.token.replace(/_tb_token_\:/ , "") } ,  ()=> l.ok ? lp[3] = aa.tlrate + "定" : "")           
                                                                              }
                                                                    }
                                                             })
                                                   }
                                                  htm.p.all[lp.l[0]] = lp
                              })
                          
                          
                          } 
                        
                        pl.pla.p.click(function(a , l){
                                        
                                     l = a.originalEvent.srcElement
                                              
                                     if (htm(p.ypr.tl).text()=="宣传图文设置") return 
                                     
                                     
                                     
                                     
                                     if(l.tagName == "INPUT"){
                                                           htm(pl.pla.prop("contentDocument").elementFromPoint(100 , a.clientY)).attr("l" ,  l.checked ? "ok" : "")
                                      }
                                     if(l.tagName == "LI"){
                                                         p.ypr.a.rt.p.attr("src" , "")
                                                          htm("a" ,p.ypr.a.rt.l.width(htm(p.ypr.a).width())).attr("htm" , "hn").css("lineHeight" ,p.ypr.a.rt.l.height() + "px")
                                                         p.ypr.a.rt.p.attr("src" , "http:" + l.r[1] + "_300x300.jpg")
                                                          p.ypr.a.rt.pl.html("<p>" + htm("pl" ,  l)[0].textContent + "</p><p>抢购价:￥" +htm("pl",l)[1].textContent + "</p>")
                                                          p.ypr.a.rt.hl  = l
                                                          htm("li" , pl.pla.p).css( {"float" : "left" , background: "" } )
                                                          htm("li:even" , pl.pla.p).css( {"float" : "left" , background: htm.co.li } )
                                                          htm(l).css( {"float" : "left" , background: htm.co.hoverli } )
                                                          
                                                          
                                                          //if(htm(":checkbox" , l).length) 
                                                          
                                                          if(a.altKey){
                                                                       if(htm(p.ypr.a.rt.hl).attr("p")=="ok"){  console.log("ll")
                                                                          htm(p.ypr.a.rt.hl).attr("p","")
                                                                          htm.p.all[p.ypr.a.rt.hl.r[0]] = ""
                                                                          return !!""
                                                                     }
                                                                       p.yp.tl.textContent == htm("pl",p.map.lf)[3].textContent ? (htm.p.all[p.ypr.a.rt.hl.r[0]] = "" , l.outerHTML="") : ""
                                                                     //pl.al()
                                                                           
                                                           }
                                                            return !!""
                                     }
                        })
                      return
                     }
                     
                     
                     
                     pl.pn()
                     pl.aa.src=pl.aa.src + "#"
                   }
          })
          
          
                              
         pl.al= function(lp, ttl , l){
                              lp=[].map.apply(htm(p.ypr.a.rt.hl).contents() , [(l,ll)=> (ll==6) ? "" : htm(l).text()])
                               lp.l= p.ypr.a.rt.hl.r
                               lp[2] = p.ypr.a.rt.hl.r[2]  //htm(lp.contents()[2]).html(("<t>" + p.ypr.a.rt.hl.r[2] + "</t>").replace("鹊</t>" , "</t><tl><tll>鹊</tll></tl>") //htm(l.contents()[6]).html()
                              l=prompt("加这个商品到推广栏，以及对它转链，对吗？", "ok")
                              if(l ? "a" :  l===""){ 
                                      p.ra.html(htm("<pl>").html(["转 链 ing " , htm("<htm htm=hn animate >") ]))
                                      l=p.ypr.a.rt.hl
                                      pl.then=pl.aa.get("http://pub.alimama.com/common/code/getAuctionCode.json?auctionid=" + l.r[0] + "&adzoneid=" + htm.ll[2] +  "&siteid="   + htm.ll[1] +  "&scenes=1&t=" + ((ttl=htm.now()) + 100) + "&"+    htm.p.token + "&" + "pvid=" + htm.p.pn + ttl , 
																					      function(a , alt , tll){
																														 if(a=a.data){                 
																														     lp.ll= l.ll = {
																																				 图片:l.r[ 1 ]  , 
																																				 标题: l.a0.textContent , 
																																				 价格: l.a1.textContent , 
																																				 合长链: a.couponLink ? a.couponLink : a.clickUrl , 
																																				 长链: a.clickUrl , 
																																				 合淘口令: a.couponLinkTaoToken ? a.couponLinkTaoToken : a.taoToken ,
																																				 淘口令: a.taoToken ,
																																				 二维码: a.qrCodeUrl ,
																																				 合链: a.couponShortLinkUrl ? a.couponShortLinkUrl : a.shortLinkUrl ,
																																				 链:     a.shortLinkUrl ,
																																				 厂商价: l.ll.厂商价
																																			 }
																												        htm(p.ypr.a.rt.hl).attr("p","ok")
																												        htm.p.all[p.ypr.a.rt.hl.r[0]] = lp
																												        
                                                               a=(p.ypr.a.rt.hl.r[2] + "") .replace("鹊" , "") * 1
																							               if(htm("t" , p.ypr.a.rt.hl.a3).text() * 1 > a){            console.log(htm("t" , p.ypr.a.rt.hl.a3).text() * 1 , a)
																														    alt=pl.aa.get("http://pub.alimama.com/pubauc/getCommonCampaignByItemId.json?itemId=" + p.ypr.a.rt.hl.r[0] + "&t=" + ((l=htm.now()) + 100)  + htm.p.token + "&pvid=" + htm.p.pn + l , function(ll , aa ,al){
																																			 alt=alt.responseText
																																			 if(alt.replace(/\{"data"\:\{\}.*/ , "")) {console.log("aaa")
																																									 eval("ll=" + alt.replace(/\"[^\"]*Rate\"/g , '"tlrate"').replace(/\"[^\"]*st/g , '"ap').replace(/^.*?(?=\[)|"Avg.*?,|\].*/g,"") + "]")
																																									 console.log(ll)
																																									 aa={ }
																																									 al= { }
																																									 ll.map(function(l){
																																																			 aa= aa.tlrate > l.tlrate ? aa : l
																																																			 if(l.manualAudit) return ""
																																																			 al=al.tlrate > l.tlrate ? al : l
																																									 })
																																									 console.log(aa.apStatus,aa.tlrate)
																																									 ll= aa.apStatus
																																									 if(ll==2){
																																															lp[2] = aa.tlrate + "定"
																																															return
																																										 }
																																										if(ll==1) return
																																										l= al.tlrate
																																										l=~~l
																																										  console.log(aa.apStatus,aa.tlrate)
																																									 if(l > a){
																																														 ll= al.apStatus
																																														 if(ll==2){
																																																			 lp[2] = l + "定"
																																																			 return
																																															 }
																																														 if(ll==1) return
																																														 htm.post("http://pub.alimama.com/pubauc/applyForCommonCampaign.json",{campId: al.CampaignID , t: (ll=htm.now()) + 100 , keeperid: al.ShopKeeperID , applyreason: htm.tt ,pvid: htm.p.pn + ll  ,  _tb_token_: htm.p.token.replace(/_tb_token_\=/ , "") } , ll=> ll.ok ? lp[2] = l + "定"  : "")          
																																										}
																																									 ll= aa.tlrate >  l
																																									 if(ll){
																																														 htm.post("http://pub.alimama.com/pubauc/applyForCommonCampaign.json",{campId: aa.CampaignID , t: (ll=htm.now()) + 100 , keeperid: aa.ShopKeeperID , applyreason: htm.tt ,pvid: htm.p.pn + ll  ,  _tb_token_: htm.p.token.replace(/_tb_token_\=/ , "") } ,  ll=> ll.ok ? lp[3] = aa.tlrate + "定" : "")           
																																										}
																																					}
																																	 
                                                                    })
																											       }
																											       console.log("l")
																											       tll= ltt=> ltt= (htm.now()) > ttl + 5000 ? p.ra.html("加入到推广栏") : htm("<pl>").height(3).animate({height: 100} , 100 , tll)
																											       tll()
																											       console.log("tt")
																											       return   
																											    }
																													
																		                   })}
																		                   {(function lp(a){
																		                                    a= pl.then.responseText
																		                                    if(p.ra.text()=="加入到推广栏") return
																		                                    if(a){
																		                                     eval("a=" + a)
																		                                     if(a.data ? "" : "a"){
																		                                          console.log("aa", a)	
																		                                          p.ra.html("加入到推广栏")
																		                                          if(prompt("操作频率快，被联盟限制转链，打开窗口导航修复" , "ok")){
																																										l=np.Window.open("a.htm" , {min_width: 290 , min_height:290}, function(l){
																																										 lpl=l
																																										 l.window.location = "http://pub.alimama.com/promo/search/index.htm?q=%E7%B3%95"
																																										 htm("<pl>").height(3).animate({height: 100} , 1000 , function lla(ll){
																																																		 ll= htm("a[href^='java'][data-spm-click][data-login]" , l.window.document)[1]
																																																		 if(ll){
																																																						ll.click()
																																																						htm("<pl>").height(3).animate({height: 100} , 1000 , function lla(ll){
																																																									 ll=htm(".mr10.w100" , l.window.document)[0]
																																																									 if(ll){
																																																													ll.click()
																																																						
																																																													 return
																																																										}
																																																										htm("<pl>").height(3).animate({height: 100} , 1000 , lla)  
																																																						})
																																																						return
																																																			 }
																																																			 htm("<pl>").height(3).animate({height: 100} , 1000 , lla)     
																																										 })
																																										})
																																						}
																		                                     } 
																		                                     return
																		                                    }
																		                                     htm("<pl>").height(3).animate({height: 100} , 100 , lp)
																		                    })()}
																	
																	
																	
          }
          
          
          htm(p.map.lf).click(function(a){
                a= htm.panhtm.elementFromPoint(2,a.pageY)
                //a=a.originalEvent.srcElement
                htm("a",p.map.lf).css( "color" , "")
                htm("a" , a).css("color" , htm.color.lefton)
                htm(p.yp.a.tl).css( { marginLeft :  -9000})
                //p.yp.aa.html("")
                p.yp.aa.css( "transform" , "translateX(-9000px)")
              if("tap" in a)   a.tap( a.textContent)

          })
          htm.a= p
        //htm("pl",p.map.lf)[2].tap()
          htm("pl",p.map.lf)[0].tap()
          htm(htm("a",p.map.lf)[0]).css( "color" , htm.color.lefton)
          
          htm.pal.show(true)
          //pl.h => 
  
  pl.qq = function(ttl , l){
      l={}
      l.pla = htm("li" , pl.pl.pl)
      htm(pl.a).html("")
      htm.pal.width = 600
      htm.pal.height = 90
      

      console.log(htm.pal.width , ~~((screen.availWidth - (  htm.pal.width)) / 2))
      htm("svg , foreignObject").height(90)
      htm("svg , foreignObject").width(600)
      htm.pal.x = ~~((screen.availWidth - 600) / 2)
      htm.pal.y = 3
      htm.pal.setAlwaysOnTop(true)
      
      htm.lt(pl.a , {ty:"|" ,all:[
                                                            {pn:   "100px" , html: l.jpg = htm("<img>").width("100%").height("100%").attr("src" , "tdh.ico")} ,
                                                            
                                                            {
                                                             all:[
																																	 {html: "<p>淘多惠广播机</p>", lineHeight: "30px" , textAlign: "center" } ,
																																	 {pn: "16px" , background: "#31aafa" ,  html : l.mt = htm("<meter value=100 float=left>").width(1).height("100%")} ,
																																	 {tag: l.t=htm("<pl>") ,lineHeight: "31px" ,textAlign: "center" }
																																	]
                                                             }     ,
                                                           {
                                                            pn: "100px" ,
                                                            all:[
																																 {html:htm("<button>").text("返回").click(h=> pl.pn("aaa")) , lineHeight: "90px" , textAlign: "center" } ,
																																 //{html:l.l=htm("<button>").width(60).text(">>").click(h=>l.l.text()=="广播" ? (l.l.tap ? l.l.tap() : "") :  l.height>100 ? (l.h.height(90), l.height= 100  , l.l.text(">>")) : (l.height= 633 , l.h.height(600) ,  l.l.text("<<")))}  
																															 ]
                                                                               //,lineHeight: "36px" 
                                                          }
                                      ]})

     htm.get(fph + "QQ" , function pll(a , pla ){
        var r= []
        a.replace(/(?:.|\n)*?addRow\(\"([^\"]*)\.lnk\"/g , (hh,h)=>{r.push(h)})
        l.t.text("")
        pla = l.pla
        htm(pl.ll).html(htm(pla[0]).html().replace(/li\>/g , "pl>").replace(/p\>/g , "li>"))

        if(r.length){
             (function lhp(lp , ll , animate){
                      function q(lp , ll){
                                  if(htm.pal.width >600) return 
                              pl.ll.click()
                              gt.ft(php , "h.txt" , "l")
                              gt.ft(php    , "l.txt" , r[lp])
                              np.Shell.openItem(php + "/ph.exe")
                              lhp(lp+1 ,ll)
                      }
              l.mt.width(1)
              
              animate=()=> (console.log("a") , l.mt.animate({width: "100%"} , ttl , a=> q(lp , ll)))
             
            if(lp  >= r.length) {
                 ll+=1
                 if(ll >= pla.length){
                          return l.t.text("已经向所有QQ号或群号，宣传了所有商品")
                  }
                  htm(pl.ll).html(htm(pla[ll]).html().replace(/li\>/g , "pl>").replace(/p\>/g , "li>"))

                    console.log("aa")
                 lp = ~~""
                 l.jpg.attr("src" , htm("img" , pla[ll]).attr("src"))
                 l.t.text("正等待广播到:【" + r[lp] + "】")
                 return       animate()                   
             }
             
             console.log(animate)
             l.jpg.attr("src" , htm("img" ,pla[ll]).attr("src"))
             l.t.text("正等待广播到:【" + r[lp] + "】")
                 animate()   
         })(~~"",~~"")
          return
         }
         np.Shell.showItemInFolder(fph + "QQ\\~这文件夹用来放qq号码")
				 if(prompt("这文件夹找不到QQ号码和群号码，打开你桌面QQ，拉号码进这个文件夹" , "已经全部放进文件夹")){
                  return htm.get(fph + "QQ" , pll)
           }

            pl.pn("aaa")
        })
      
      
 }
 
   pl.qql = function(ttl , l){
      l={}
      l.pla = htm("li" , pl.pl.pl)
      htm(pl.a).html("")
      htm.pal.width = 600
      htm.pal.height = 600
      htm("svg , foreignObject").height(600)
      htm("svg , foreignObject").width(600)
      htm.pal.x = ~~((screen.availWidth - 600) / 2)
      htm.pal.setAlwaysOnTop(true)
      htm.lt(pl.a ,       {all:[
                                   {
                                    pn: "1px" ,
                                    html:l.tt=htm("<pl>").css( {height:90, background: htm.co.htm  , textAlign: "center" })
                                    } ,
                                   {
                                    pn:    "90px" ,
                                      ty:"|" ,
                                      all:[
																						{pn:   "100px" , html: l.jpg = htm("<img>").width("100%").height("100%").attr("src" , "tdh.ico")} ,
																						{
																						 all:[
																									 {html: "<h6>淘多惠广播机</h6>", lineHeight: "36px" , textAlign: "center" } ,
																									 {pn: "16px" , background: "#31aafa" ,  html : l.mt = htm("<meter value=100 float=left>").width(1).height("100%")} ,
																									 {tag: l.t=htm("<pl>") ,lineHeight: "31px" ,textAlign: "center" }
																								 ]
																						 }     ,
																					  {
																						 pn: "100px" ,
																						 all:[
																								  {html:htm("<button>").text("返回").click(h=> pl.pn("aaa"))} ,
																								  {html:l.l=htm("<button>").width(60).text(">>").click(h=>l.l.text()=="广播" ? (l.l.tap ? l.l.tap() : "") : ""  )}  
																							 ]
																					 }
																				 ]
                                    } ,
                                   {tag:l.aa=htm("<pl>"), html: l.al =htm('<iframe nwfaketop width="100%" >').height("100%")}
                               ]})
      
      {(function (a){
        l.t.text("")
        l.tt.css("transform" , "translateY(1px)").html(htm("<h3>登录微信帐号</h3>").css( "lineHeight" , "90px"))
        l.l.css("marginLeft" , "")
        l.l.text("广播")
        
        l.al.attr("src"   , "http://wx.qq.com")
        var aa= l.al.prop("contentWindow")
        a=(h)=> htm("<pl>").height(3).animate({height: 100} ,3000 ,function(tl){
              tl= "angular" in aa 
              if(tl){               
                        l.al.contents().contents().css("zoom" , 0.6)
                     if(h=  aa.angular.element('.contact_item').length){console.log(aa.angular.element('.contact_item').length , (al = aa.angular.element('[mm-repeat="item in allContacts"]').scope()).allContacts )
                           aa.angular.element(".tab_item>*")[2].click()
                           aa.angular.element("style").html(aa.angular.element("style").html() + "[color=green]{background:green}")
                           if(aa.h==h){
                                  console.log(al = aa.angular.element('[mm-repeat="item in allContacts"]').scope().allContacts , ({}).constructor.keys(al[1]))
                                  l.tt.html(l.tt.t="<p>在下面微信左则,对一个群组或联络人,按(鼠标右键),</p><p>可让他成为绿色,再次按(鼠标右键)可恢复,</p><p>当你全部已经设置,可按右上面“广播”,</p><p>所有绿色群组或联络人,会被软件轮番宣传</p><p>淘多惠也会记住这些设置，用作下次宣传操作</p>").css("zoom" , 0.6)
                                  
                                  aa.angular.element('[mm-repeat="item in allContacts"]').contextmenu((l,a)=>
                                  (a= htm(aa.document.elementFromPoint(3 , l.clientY))).attr("color")=="green" ? a.attr("color" , "") : a.attr("color", "green")).map((l,ll)=> 
                                   htm(ll).attr("np", htm("img" ,ll).attr("src").replace(/^.*?=|&.*/g , "")))
                                   if(localStorage.tl) localStorage.tl.replace(/.*?(?=,)/g,  l => aa.angular.element("[np='" + l + "']").attr("color","green"))
                                  
                                  l.l.tap=  function(pla , tll , ft){
                                                        aa= l.al.prop("contentWindow")
                                                        tl= aa.angular.element('.contact_item[color=green]')
                                                                    console.log("tl",tl)
                                                        if(tl.length){
                                                                var at
                                                                aa.angular.element(".tab_item>*")[~~""].click()
                                                                l.tt.text("").css("transform" , "")
                                                                     pla = htm("li" , pl.pl.pl)
                                                                tll = ""
                                                                tl=tl.map((l,ll)=> (l= aa.angular.element(ll).scope().user , tll = tll + (ll=htm(ll).attr("np")) + "," , {al: l.UserName , a:l.NickName , l:ll}))
                                                                localStorage.tl= tll
                                                                tll = aa.angular.element('[mm-repeat="chatContact in chatList track by chatContact.UserName"]').scope()
                                                                tll.itemClick("filehelper")
                                                                at=()=> htm("<pl>").height(3).animate({height: 100} ,1000 ,function(ftl,tfl){
                                                                           ft= aa.angular.element(":file")//~label
                                                                           if(ft.l=ft.scope()){
                                                                             //gt.ft(php    , "a.txt" , htm(pla[~~""]).attr("hr"))
                                                                             ftl= htm("img" , pla[~~""]).attr("src")
                                                                             
                                                                             ftl=new File(ftl,ftl)
                                                                             console.log(ftl)
                                                                             tfl= htm(pla[~~""]).html().replace(/(?:\<[^\>]*?\>)(?:\<[^\>]*?\>)(?:\<[^\>]*?\>)*/g , "\n").replace(/(?:\<[^\>]*?\>)/g , "")
                                                                             if(pla.length ?  tl.length : ""){
                                                                                                     (function lhp(lp , ll , animate){
                                                                                                              function q(lp , ll,pl){
                                                                                                                          if(htm.pal.width >600) return 
                                                                                                                      htm.pal.appWindow.show()
                                                                                                                      ft= aa.angular.element(":file")
                                                                                                                      console.log(ftl)
                                                                                                                      ft.prop("files").append(ftl)
                                                                                                                      pl=Array("ch")
                                                                                                                      pl[pl.length]=   "an"
                                                                                                                      pl[pl.length]="ge"
                                                                                                                      ft[pl.join("")]()
                                                                                                                      htm("<pl>").height(3).animate({height: 100} , 6000 , function(){
                                                                                                                        pl= aa.angular.element(":file~label").scope()
                                                                                                                        pl.editAreaCtn=tfl
                                                                                                                        pl.sendTextMessage()
                                                                                                                        lhp(lp+1 ,ll)
                                                                                                                       })
                                                                                                              }
                                                                                                      l.mt.width(1)
                                                                                                      
                                                                                                      animate=()=> (console.log("a",ttl) , l.mt.animate({width: "100%"} , ttl , ()=> q(lp , ll)))
                                                                                                     
                                                                                                    if(lp  >= tl.length) {
                                                                                                         ll+=1
                                                                                                         if(ll >= pla.length){
                                                                                                                  return l.t.text("已经向所有微信号，宣传了所有商品")
                                                                                                          }
                                                                                                          //gt.ft(php    , "a.txt" , htm(pla[ll]).attr("hr"))
                                                                                                          ftl= htm("img" , pla[ll]).attr("src")
                                                                                                          ftl=new File(ftl,ftl)
                                                                                                          tfl= htm(pla[ll]).html().replace(/(?:\<[^\>]*?\>)(?:\<[^\>]*?\>)(?:\<[^\>]*?\>)*/g , "\n").replace(/(?:\<[^\>]*?\>)/g , "")

                                                                                                            console.log("aaa")
                                                                                                         lp = ~~""
                                                                                                         l.jpg.attr("src" , htm("img" , pla[ll]).attr("src"))
                                                                                                         l.t.text("正等待广播到:【" + tl[lp].a + "】")
                                                                                                         tll.itemClick(tl[lp].al)
                                                                                                         return       animate()                   
                                                                                                     }
                                                                                                     
                                                                                                     //console.log(animate)
                                                                                                     l.jpg.attr("src" , htm("img" ,pla[ll]).attr("src"))
                                                                                                     l.t.text("正等待广播到:【" + tl[lp].a + "】")
                                                                                                         tll.itemClick(tl[lp].al)
                                                                                                         animate()   
                                                                                                 })(~~"",~~"")
                                                                              }
                                                                              return
                                                                             }   
                                                                             at()
                                                                 })
                                                                  at()    
                                                          return
                                                         }
                                                         l.tt.html(htm("<h3 tt>你未设置宣传哪些微信帐号?<h3>").animate({"opacity": 0.3} , 6000 , ()=> l.tt.html(l.tt.t)))
                                  }
                                 return 
                          }
                          aa.h=h
                      }
             }
             a()
        }) 
        a()
         
     })()}
  }}///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////