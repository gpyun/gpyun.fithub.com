var fph , gt , ph=process.cwd().replace("\\" , "/")
gt= require(ph + '/getfile')
gt   =    new gt("") 
htm.panhtm = htm("html").context
var pl, ht=require("http") , php
htm(htm.panhtm.activeElement).css("margin",1/1000)
var title = htm("title").text() , np =require("nw.gui") , f=require("fs")
htm.p={all: { }}
htm("svg").css( {float:"left"   , height : htm(window).height()} )
pl=htm("foreignObject").height(htm(window).height())
gt.ft= (h, hh, t)=>(gt.lpath=h, t ? gt.set(hh, t) :gt.get(hh))
fph= np.App.dataPath.replace(/淘多惠.*/,"淘多惠\\")//
gt.ft(fph + "l" , "l","l")

php = ph.replace(/(.*\\).*/ , (l,ll)=>ll) + "ph"



function jpg(rr , fl , aaa){
 fl=fl + ".jpg"
 console.log(rr,fl)
 function aa(l){
  l=gt.ft(fph + "l" ,  fl)
  console.log(l ? "t" : "f")
  if(l){
     console.log("l")
           if(aaa)  aaa(fph + "\\l\\" + fl)//htm("title").animate({height: "+1"} , 1000 , aaa)
           return
   }
    if(ra=="ra"){
           ra=""
           ht.get(rr, function (r) {
                r.pipe(f.createWriteStream(fph + "\\l\\" + fl))
           })
   }
   console.log("r")
   htm("title").animate({height: "+1"} , 1000 , aa)
 }
 var ra="ra"
 aa()
}








htm.getScript("color.htm").then(()=> htm("style").html(htm("style").html().replace(/htm\.(co(?:lor)?)\.([a-z]*)/g , (aa,l,a)=>htm[l][a])))
htm.contain(pl.css({float: "left",background:"url(l.jpg)"}) , {ty:"|" , all:{
                               ll:{
                                   pn:1,
                                  html: (pl.tap=htm("<button blue>")).text("淘宝帐号登录").css({"margin" : "200px" , width : 190}).click(function(){
                                                                    pl.tap.width(pl.tap.width())
                                                                    pl.contain.animate([0,100,0])
                                                                    htm("title").text("淘宝帐号登录")
                                                                    pl.tap.html("<htm htm=hn animate>")
                                                                    pl.tap.css("opacity" , 6/10000000)
                                                    })
                                  } ,
                               l:{
                                  pn: 0 ,
                                  html:pl.aa=htm("<iframe nwfaketop width=" + pl.width() + " height=" + pl.height() + " src=https://login.taobao.com/member/login.jhtml?style=mini&newMini2=true&from=alimama&redirectURL=http%3A%2F%2Flogin.taobao.com%2Fmember%2Ftaobaoke%2Flogin.htm%3Fis_login%3d1&full_redirect=true&disableQuickLogin=true>")[0]} ,
                               a:{
                                  pn: 0 , 
                                  transform: "translateZ(1000px)" ,
                                  //background:htm.co.htm
                               }
                              }
               })
pl.pn= function(aaa, l , t){//console.log(htm("table a"))
                if((l=pl.aa.contentDocument) ? (l= htm("table a" , l))[30]  : "") {
                           t=np.Window.get()
                           htm("svg , foreignObject").width(t.width= px= screen.availWidth)//
                           htm("svg , foreignObject").height((t.height= py= screen.availHeight - 20) - 6)
                           console.log(t.width   )
                           pl.contain.animate([0,0,100])
                           htm(pl.a).css( {float:"left" , background: htm.co.htm , width : "100%" })//screen.availWidth
                           htm("title").text(title)
                           t.x=1
                           t.y=1
                           if (1911 > screen.availWidth){
                                htm(pl.a).css( {transform : "scale(" +  px/ 1911 + "," + py/1060 + ")" , "transform-origin" : "top left" })
                                htm(pl.a).width(1911).height(1060)
                             }
                           ap(pl.a) //htm(l).text()
                           htm.p.pn = l.attr("data-spm-click").replace(/^.*?&pvid=|[^_]*?&.*/g , "")
                           t= pl.aa.contentDocument.cookie
                           htm.p.token= t.replace(/^.*(?=\_tb\_token)/ , "").replace(/\;.*/ , "")
                                   console.log(htm.p.pn)
                           pl.aa.get=(pl.aa.contentWindow ).$.get
                           t=pl.aa.get("http://pub.alimama.com/common/adzone/adzoneManage.json?tab=3&toPage=1&perPageSize=40&gcid=8&t=" + ((t= htm.now()) + 100) + "&pvid=" + htm.p.pn + t  + "&_input_charset=utf-8" + "&" + htm.p.token )
                           if(aaa=="aaa"){
                                 t.then(htm(   "tl pl")[3].tap)
                                 //pal.setAlwaysOnTop(!!"")
                             }
                           return
                 }
                 htm("title").animate({height: "+1000"} , 1000 , pl.pn)
}              

pl.aa.onload = function(l ,t){console.log("l", l , (pl.aa.contentWindow).location.host)
        if(htm(window).width() > 600)  if((pl.aa.contentWindow).location.host == "login.taobao.com"){
                         htm( "foreignObject").css( {float: "left" ,  background: htm.co.htm } ).html()
                         pl.aa.src="http://h5.m.taobao.com/mlapp/mytaobao.html"
            }
        if((pl.aa.contentWindow).location.host == "www.alimama.com"){        
            pl.tap.css("opacity" , 100)
            htm(pl.aa).css( {"marginLeft" : -9000 })
            l=htm(".menu-username" , pl.aa.contentDocument)[0]
            //if("lg" in htm ? "" : l){
            htm.lg = l
            pl.aa.src="http://h5.m.taobao.com/mlapp/mytaobao.html"   
            return
           }
        if((pl.aa.contentWindow).location.host == "h5.m.taobao.com"){//console.log(htm("*", pl.aa.contentDocument))
                l=()=> htm("<pl>").height(3).animate({height: 100} ,100 , ()=> (htm.aa = htm("img" , pl.aa.contentDocument).attr("src")) == "//gw.alicdn.com/tfscom/TB1_n4PKXXXXXcYXXXXNx3t4VXX-120-120.jpg_q30" ? l() : (htm.tl=htm("#J_myNick" , pl.aa.contentDocument).text() ,  
                                    htm.panhtm.cookie="tl=" + htm.tl ,
                                    htm.get("http://localhost/log.php?tl=" + htm.tl , function(a,aa){//http://taodh.net
                                                  if(a){
                                                             console.log(a)
                                                    pl.pn()  
                                                    return pl.aa.src="http://pub.alimama.com/promo/search/index.htm?q=%E4%B8%9C%E5%8C%97%E7%BA%A2%E8%8A%B8%E8%B1%86&type=table?"
                                                   }
                                                   pl.log()
                                                  //
                 })))
                l()
          }
} 
pl.log = function(){
                  pl.contain.animate([100,0,0])
                  htm(pl.ll).css( { textAlign: "center" ,  background: htm.co.htm } )
                  console.log("aaa")
                  htm.contain(pl.ll , {all:[
                                            { } ,
                                            {html: "<h3>欢迎注册淘多惠</h3>"} ,
                                            {html: htm("<p>").html("<label>会员号:</label><a color=green>" + htm.tl + "</a>").css( { textAlign: "left" , marginLeft: 200 }) } ,
                                            {html: htm("<p>").html("<label>注册码:</label><input>").css( { textAlign: "left" , marginLeft: 200 }).click(()=> htm(pl.ll.a6).text("")) } ,
                                            {html: htm('<a href="tencent://message/?uin=202198823">联络客服免费拿注册码</a>')} ,
                                            {html: htm("<input blue type=button value=' 注 册 ' >").click(function(l){
                                                                                    
                                                                                    
                                                                                    
                                                                                    
                                                                                    
                                                                                    
                                                                                    
                                                                                    
                                                                                    
                                                                                    l= htm(":text" , pl.ll).val()
                                                                                    if(l){
                                                                                          htm.get("http://localhost/lg.php?l=" + l + "&tl=" + htm.tl , function(a){//http://taodh.net
                                                                                                if(a=="ok"){
                                                                                                  pl.pn()  
                                                                                                  pl.aa.src="http://pub.alimama.com/promo/search/index.htm?q=%E4%B8%9C%E5%8C%97%E7%BA%A2%E8%8A%B8%E8%B1%86&type=table?"
                                                                                                  return htm(pl.ll.a6).text("注册淘多惠成功")
                                                                                                 }
                                                                                                 htm(pl.ll.a6).text("注册码错误")
                                                                                           })
                                                                                           return
                                                                                     }
                                                                                      htm(pl.ll.a6).text("注册码错误")
                                             })} ,
                                            { }
                                           ]
                   })

}
function ap(p , l){
               l={}
               
               function tap(ra, ar){
                           //pl.aa.src = pl.aa.src + "#"
                         if(p.a.val()=="") if(p.yp.tl.textContent==" 商 品 ") p.a.val("冻米花生糕酥") 
                          var r=[]  ,  arr
                          ar= htm.now()
                          r= r.map.call(htm("input" , p.ar) , function(a,aa){
                                    a=htm(a)
                                    if(a.attr("tt")=="t"){
                                             if(aa=a.attr("shopTag")){
                                                      r= r.concat(aa)
                                                      //console.log(aa,r)
                                                      return a.attr("t")
                                              }
                                              return a.val()== "天猫" ? "userType=1" : a.val()=="所有"? "" : "userType=0"
                                     }
                                    if(a.attr("type")=="number"){
                                           aa= a.val()
                                           return aa > 0 ? (a.attr("t") + "=" + aa) : "" 
                                     }
                                     return a.prop("checked") ? (((aa=a.attr("shopTag")) ? (r=r.concat(aa)) : "") , a.attr("t")) : ""
                          }).join("&") + (r[0] ? ("&shopTag=" +   r.join("%2C")) : "&shopTag=") 
                          arr= htm.now()
                          r =r.replace(/\&+/g ,"&")
                          htm.p.r = r
                          ra=ra? htm.p.pa ? Math.max( 1 , Math.min(ra , htm.p.pa[1])) : 1 : 1
                          ra=ra >= 1 ? ra : 1
                          r= (p.yp.tl.textContent==" 商 品 " ? "http://pub.alimama.com/items/search.json?" + htm.param({q: p.a.val()}) : "http://pub.alimama.com/items/channel/qqhd.json?" + htm.param({q: p.a.val()})  + "&channel=qqhd") + "&_t=" + ar + "&type=table&toPage=" + ra + "&auctionTag=&perPageSize=40&" + r + (htm.p.th ? htm.p.th : "") + "&t=" + htm.now() + "&" + htm.p.token + "&" + "pvid=" + htm.p.pn + arr
                          
                          pl.aa.get(r ,function(a , aa ,aaa){
                                if(a? a.data : ""){
                                   aa=a.info ? a.info.pvid : ""
                                   if(aa) htm.p.pn=    aa.replace(/\_[0-9]{10,}/ , "_")
                                   aa=pl.pla.p.width()
                                   htm.p.pa = [ ra , (aaa= (a.data.paginator ?  a.data.paginator["items"]  : "" ) / 40 ) == ~~aaa ? aaa : 1 + ~~aaa  ]
                                   p.pa.html(htm.p.pa.join("/"))
                                   a= a.data.pageList
                                   if(a){
                                         a=a.map(function(l , p , ll){
                                            p= htm.panhtm.createElement("li")
                                            //p.r=[ l.title.replace(/\<[^\>]*?\>/g ,  "") , l.zkPrice , l.tkCommFee , l.tkRate , l.totalNum , l.totalFee , l.couponAmount]
                                            ll= function(a, aa){
                                                            aa=""
                                                            if(l.tkSpecialCampaignIdRateMap){ 
                                                             for (a in l.tkSpecialCampaignIdRateMap){
                                                                     aa=  aa> l.tkSpecialCampaignIdRateMap[a] ? aa : l.tkSpecialCampaignIdRateMap[a]
                                                             }
                                                           }
                                                             a = l.eventRate > l.tkRate ? l.eventRate : l.tkRate 
                                                             a= aa > a ? aa : a 
                                                             if(a==l.eventRate) return "<t>" + a + "</t><tl><ttl>鹊</ttl></tl>"  
                                                             if(a==l.tkRate) return "<t>" + a + "</t>"
                                                             return "<t>" + a + "</t><tl green><ttl>定</ttl></tl>"  
                                            }
                                            p.r=[l.auctionUrl.replace(/^.*\=/  , "") , l.pictUrl , l.eventRate > l.tkRate ? l.eventRate + "鹊" : l.tkRate ]
                                            htm(p).width(aa)
                                            
                                            htm.contain(p  , {ty: "|" ,
                                                                             all:[
                                                                                  {pn:  6.3 , text: l.title.replace(/\<[^\>]*?\>/g ,  "") } ,
                                                                                  {text: l.zkPrice} ,
                                                                                  {text: l.tkCommFee} ,
                                                                                  {html: ll   } ,
                                                                                  {pn: 1 ,text:l.totalNum} ,
                                                                                  {pn:1 ,text:l.totalFee} ,
                                                                                  {pn:1 ,text:l.couponAmount}
                                                                                 ] ,
                                                                             })
                                           return p
                                         })
                                       pl.pla.p.html(a)
                                       htm("li:even" , pl.pla.p).css( {"float" : "left" , background: htm.co.lieven } )
                                   }
                               }
                          })
          }
          htm.tap=tap
               
          htm.contain(p , {all:{
                                pl:{
                                    pn: "60px" ,
                                    background: htm.co.top ,
                                    textAlign: "center" ,
                                      contain : {
                                                 ty: "|" ,
                                                 all:{
                                                       lf: {pn: "130px" ,html: htm("<img src=lg.gif>").height("100%").width("100%")} ,
                                                       tt: {html:htm("<pl>").html("这可以用作放一些系统升级，优惠等") , lineHeight: "60px"} ,
                                                       rp: {pn: "200px" ,html:"<p>淘淘提醒你：在</p>" + "<p>前记得续费啰</p>" , opacity: "0.9" ,  lineHeight: "19px" , "zoom" : 0.9 }
                                                    }
                                               }
                                  } ,
                               map:{
                                    contain :{
                                              ty: "|" ,
                                              all:{
                                                   lf: {
                                                        pn: "122px" ,
                                                        tag: "<tl>" ,
                                                        background: htm.co.left ,
                                                          contain:{
                                                                  all:[
                                                                       {
                                                                        html:"<a htm=home> 主 页 </a>" ,
                                                                        tap: function(){
                                                                                         p.rpy.contain.animate( [ "26px" , 100 , "26px" , 100 , "26px" ] )
                                                                                         p.yp.aa.width(htm(p.yp.a).width())
                                                                                         htm(p.yp.tt).html("")
                                                                                         htm(p.yp.rt).html("")
                                                                                         htm(p.yp.tl).html(htm("<a htm=mail>系统信</a>").css( {float : "left" , width: 200 } ))
                                                                                         
                                                                                         htm(p.ypr.tl).html("<a htm=text> F A Q </a>")
                                                                                         htm(p.ypr.rt).html("<a htm=qq> 在 线 </a>").click(()=> location="tencent://message/?uin=202198823")
                                                                                           //p.yp.a.contain.animate( [0 , 100] )
                                                                                         htm(p.yp.a.tl).css( {marginLeft :  - px })
                                                                                         //htm(p.yp.a.tl ).width("0")
                                                                                         //htm(p.yp.a.rt ).width("100%")
                                                                                         htm(p.ypr.a.rt).html("")
                                                                                         //p.ar.h.css( {marginLeft: "-30000px" } )
                                                                                         //htm(p.yp.a).html(htm("<p>这放一些文章和教程</p>").css( {margin: 30}))
                                                                                         //htm(p.ypr.a).html(htm("<p>这可放一些问答</p>").css( {margin: 30}))
                                                                            }
                                                                        } , 
                                                                     {
                                                                      html: "<a htm=lpl> 商 品 </a>" ,
                                                                         tap:p.tap= function(a){
                                                                                          //pl.pla.attr("src",  "a.htm")
                                                                                          p.rpy.contain.animate( [ "16px" , 22 , "26px" , 11 , "16px" ] )
                                                                                          htm.p.rpa == a ? "" : pl.pla.p.html("")
                                                                                          htm.p.rpa = a
                                                                                          htm(p.yp.tl).html("<a htm=text>" + a + "</a>")
                                                                                          htm(p.yp.tt).html([
                                                                                                             htm("<pl>").width("calc(100% - 30px)").html(p.a= htm("<input type=text>").width("calc(100% + 30px)")) , 
                                                                                                             htm("<pl>").html(p.lpl  = htm("<a htm=lpl>").css( {marginLeft : "1px" })).css( {"width" : 30}).click(tap)
                                                                                                            ])
                                                                                          htm.contain(p.yp.rt , {ty: "|" , all: [
                                                                                                                                 {html:htm("<a htm=lp>").click(function(){tap(~-htm.p.pa[0])}) }  ,
                                                                                                                                 {pn: 2 , html: p.pa= htm("<a>").css("marginLeft" , "auto") } ,
                                                                                                                                 {html:htm("<a htm=pla>").click(function(){tap(htm.p.pa[0] + 1)})}
                                                                                                                                ]
                                                                                                               })
                                                                                           p.ar.h.css( {marginLeft: "" } )
                                                                                          htm(p.ypr.tl).html("<a htm=h> 详 情 </a>")
                                                                                          htm(p.ypr.rt).html("")
                                                                                          htm(p.yp.a.tl ).width("100%")
                                                                                          htm(p.yp.a.rt ).width(~~"")
                                                                                          pl.pla.css("transform" , "")
                                                                                          htm(p.yp.a.tl).css( {marginLeft : ""})
                                                                                          htm.a.th.contain.contents().map((l,ll)=>htm(ll).html(["<a>商品(<t>鼠标左键+Alt</t>可让商品到推广栏,点触右则<t>深色</t>标题可排序)<ht htm=right></a>", "价格<htm>","佣金","最强比率<htm>","月推广<htm>","月派佣<htm>","优惠券",""][l]))
                                                                                          htm.contain(p.ypr.a.rt ,{all:[
                                                                                                                     {contain: {ty:"|" , all:[ 
                                                                                                                                              {pn: "1px" , html: p.ypr.a.rt.l= htm("<pl >").css({textAlign: "center"}).html(htm("<a animate>")) },                                                                                                                                                     
                                                                                                                                              {tag: p.jpg = htm.panhtm.createElement("pl") , html:p.ypr.a.rt.p=htm("<img par>").css({height:  "calc(100% - 20px)" , width: "calc(100% - 20px)" ,  margin:  10 })} 
                                                                                                                                             ] }   ,
                                                                                                                      }    ,
                                                                                                                     {pn: "60px" , textAlign: "center" , tag: p.ypr.a.rt.pl=htm("<pl>")}   ,
                                                                                                                     {pn: "60px" , textAlign: "center" , contain : {ty:"|" , all:[
                                                                                                                                                                    {html: p.la = htm("<button blue pyy>").text("进入商品店铺").click(function(lp ,pla){
                                                                                                                                                                          if(  p.la.text()=="进入商品店铺"){
                                                                                                                                                                                  np.Window.open("https://item.taobao.com/item.htm?spm=a219t.7900221/10.1998910419.d78498155.eqPvZ5&id=" + p.ypr.a.rt.hl.r[0] , {width: 1000, height: 600})
                                                                                                                                                                                  return
                                                                                                                                                                           }
                                                                                                                                                                          if(  p.la.text()=="ok"){
                                                                                                                                                                                  htm.p.ll= eval(p.jpg.ll.val().replace("mm_","[").replace(/\_/g , ",") + "]")
                                                                                                                                                                                  
                                                                                                                                                                                  console.log("aaa" , htm.p.ll)
                                                                                                                                                                                  htm.p.tr= ("<p>" + htm.a.jpg.tr.val().replace(/\n/g , "</p><p>") + "</p>").replace("{图片}" , '<img src="{图片}"') 
                                                                                                                                                                                  pla=[]
                                                                                                                                                                                  lp= htm("[l=ok]" , pl.pla.p).toArray()
                                                                                                                                                                                  
                                                                                                                                                                                  lp.map(function(l){
                                                                                                                                                                                                       //if(l.rr?l.rr.图片: "") return  
                                                                                                                                                                                                       jpg(  "http:" + l.r[ 1 ] + "_300x300.jpg" , l.r[0]   , function(p){
                                                                                                                                                                                                                l.图片=p    
                                                                                                                                                                                                                pla.push(p)              
                                                                                                                                                                                                       })
                                                                                                                                                                                  })
                                                                                                                                                                                  
                                                                                                                                                                                  htm.when.apply("" , lp.map(function(l){
                                                                                                                                                                                              var   t=htm.now()
                                                                                                                                                                                              return pl.aa.get("http://pub.alimama.com/common/code/getAuctionCode.json?auctionid=" + l.r[0] + "&adzoneid=" + htm.p.ll[2] +  "&siteid="   + htm.p.ll[1] +  "&scenes=1&t=" + t + "&"+    htm.p.token + "&" + "pvid=" + htm.p.pn + (t + 100)).then( 
                                                                                                                                                                                                      function(a){
                                                                                                                                                                                                                     if(a=a.data){console.log("aa" , a)
                                                                                                                                                                                                                         l.rr = {
                                                                                                                                                                                                                                 图片:l.r[ 1 ]  , 
                                                                                                                                                                                                                                 标题: l.a0.textContent , 
                                                                                                                                                                                                                                 价格: l.a1.textContent , 
                                                                                                                                                                                                                                 合长链: a.couponLink ? a.couponLink : a.clickUrl , 
                                                                                                                                                                                                                                 长链: a.clickUrl , 
                                                                                                                                                                                                                                 合淘口令: a.couponLinkTaoToken ? a.couponLinkTaoToken : a.taoToken ,
                                                                                                                                                                                                                                 淘口令: a.taoToken ,
                                                                                                                                                                                                                                 二维码: a.qrCodeUrl ,
                                                                                                                                                                                                                                 合链: a.couponShortLinkUrl ? a.couponShortLinkUrl : a.shortLinkUrl ,
                                                                                                                                                                                                                                 链:     a.shortLinkUrl
                                                                                                                                                                                                                               }
                                                                                                                                                                                                                }
                                                                                                                                                                                                                           
                                                                                                                                                                                                 }) 
                                                                                                                                                                                  })).then(function lpl(){console.log("aaa" , pla.length , lp.length)
                                                                                                                                                                                                              if(pla.length == lp.length){
                                                                                                                                                                                                                               htm(p.jpg).html(pl.pl = htm("<iframe width='100%' height='100%' src='a.htm'>"))
                                                                                                                                                                                                                               pl.pl.load(function(){
                                                                                                                                                                                                                                      htm("style" , pl.pl.contents()).html(htm("style" , pl.pl.contents()).html().replace(/htm\.(co(?:lor)?)\.(鹊|定|[a-z]*)/g , (aa,l,a)=>htm[l][a]))
                                                                                                                                                                                                                                      pl.pl.pl= htm("alt" , pl.pl.contents())
                                                                                                                                                                                                                                      pla = lp.map(function(l,pla){
                                                                                                                                                                                                                                                           pla = htm.p.tr
                                                                                                                                                                                                                                                           l.rr.图片 = l.图片
                                                                                                                                                                                                                                                           l.rr.constructor.keys(l.rr).map(a=>pla=pla.replace("{" + a + "}" , l.rr[a]))
                                                                                                                                                                                                                                                           return htm("<li>").html(pla).attr("hr" , "http:" + l.r[ 1 ] + "_300x300.jpg")
                                                                                                                                                                                                                                      })
                                                                                                                                                                                                                                      console.log(pla)
                                                                                                                                                                                                                                      pl.pl.pl.html(pla)
                                                                                                                                                                                                                                      p.la.css("opacity" , ~~"")
                                                                                                                                                                                                                                      p.ra.css("opacity" , ~~"")
                                                                                                                                                                                                                                      htm.contain(p.ypr.a.rt.pl , {ty:"|", all: [
                                                                                                                                                                                                                                                                              {html:htm("<input type=button value=用QQ宣传 blue >").click(function(lp){
                                                                                                                                                                                                                                                                                               gt.ft(fph + "QQ" , "~这文件夹用来放qq号码","l")
                                                                                                                                                                                                                                                                                               np.Shell.showItemInFolder(fph + "QQ\\~这文件夹用来放qq号码")
                                                                                                                                                                                                                                                                                               if(prompt("打开你桌面QQ并登录，哪个qq号码或群号码需宣传，便拉他进这个文件夹" , "已经全部放进文件夹")){
                                                                                                                                                                                                                                                                                                if(prompt("打开登录QQ，但不打开会话窗口"     , "ok")){
                                                                                                                                                                                                                                                                                                 if(lt= prompt('QQ发信频率，速度（秒/次）, 建议大于或等于10' , "60")){
                                                                                                                                                                                                                                                                                                             
                                                                                                                                                                                                                                                                                                             lt= lt ? lt > 1 ? lt * 1000 : 1000 : 10000 
                                                                                                                                                                                                                                                                                                             pl.qq(lt)
                                                                                                                                                                                                                                                                                                 }
                                                                                                                                                                                                                                                                                                }
                                                                                                                                                                                                                                                                                               }
                                                                                                                                                                                                                                                                               })  ,
                                                                                                                                                                                                                                                                               marginTop : 30
                                                                                                                                                                                                                                                                              } ,
                                                                                                                                                                                                                                                                             {html:htm("<input type=button value=用微信宣传 blue >").click(function(){
                                                                                                                                                                                                                                                                                                 if(lt= prompt('微信发信频率，速度（秒/次）, 建议大于或等于10' , "60")){
                                                                                                                                                                                                                                                                                                                 lt= lt ? lt > 1 ? lt * 1000 : 1000 : 10000
                                                                                                                                                                                                                                                                                                                 pl.qql(lt)
                                                                                                                                                                                                                                                                                                   }
                                                                                                                                                                                                                                                                               })  ,
                                                                                                                                                                                                                                                                               marginTop : 30
                                                                                                                                                                                                                                                                              } ,
                                                                                                                                                                                                                                                                             {html:htm('<input type=button value=" 返 回 " blue >').click(function(){
                                                                                                                                                                                                                                                                                               htm("[l=ok]" , pl.pla.p).attr("l","")
                                                                                                                                                                                                                                                                                               htm("pl",p.map.lf)[3].tap(htm("pl",p.map.lf)[3].textContent)    
                                                                                                                                                                                                                                                                                               htm(p.ypr.aa).html("")
                                                                                                                                                                                                                                                                              })  ,
                                                                                                                                                                                                                                                                              marginTop : 30
                                                                                                                                                                                                                                                                             }]
                                                                                                                                                                                                                                      })
                                                                                                                                                                                                                                })
                                                                                                                                                                                                                                return
                                                                                                                                                                                                                      }
                                                                                                                                                                                                                       htm("title").animate({height: "+1"} , 1000 , lpl)
                                                                                                                                                                                                     
                                                                                                                                                                                  })
                                                                                                                                                                             return
                                                                                                                                                                           }
                                                                                                                                                                           
                                                                                                                                                                             l=p.ypr.a.rt.p.attr("src")
                                                                                                                                                                             if( l == "c:/pl/" + p.ypr.a.rt.hl.r[0] + ".jpg"){
                                                                                                                                                                                           
                                                                                                                                                                                             return  
                                                                                                                                                                              }
                                                                                                                                                                             jpg(p.ypr.a.rt.p.attr("src") , "c:/pl/" + p.ypr.a.rt.hl.r[0] + ".jpg" , function(){
                                                                                                                                                                                                     htm("[par]").attr("src" , "c:/pl/" + p.ypr.a.rt.hl.r[0] + ".jpg")
                                                                                                                                                                                                     htm("[pyy]").click()
                                                                                                                                                                              })
                                                                                                                                                                    })} ,
                                                                                                                                                                    {html:p.ra=htm("<button blue>").text("加入到推广栏").click(function(){
                                                                                                                                                                            if(p.ra.text()=="加入到推广栏"){
                                                                                                                                                                                      pl.al()
                                                                                                                                                                                      return
                                                                                                                                                                              }
                                                                                                                                                                             htm("[l=ok]" , pl.pla.p).attr("l","")
                                                                                                                                                                             htm("pl",p.map.lf)[3].tap(htm("pl",p.map.lf)[3].textContent)
                                                                                                                                                                    })}
                                                                                                                                                                   ]}}
                                                                                                                          ]})
                                                                            }
                                                                        } ,
                                                                       {
                                                                         html: "<a htm=ch> 鹊 桥 </a>" ,
                                                                         tap: p.tap
                                                                        } ,
                                                                       {
                                                                         html: "<a htm=hn> 推 广 </a>" ,
                                                                      
                                                                         tap:  function(a , aa){
                                                                                          //pl.pla.attr("src") == "a.htm" ? ""    : pl.pla.attr("src",  "a.htm")
                                                                                          p.tap()
                                                                                          p.rpy.contain.animate( [ "16px" , 22 , "26px" , 11 , "16px" ] )
                                                                                          //htm.p.rpa == a ? "" : pl.pla.p.html("")
                                                                                          htm.p.rpa = a
                                                                                          htm(p.yp.tl).html("<a htm=hn>" + a + "</a>")
                                                                                          htm(p.yp.tt).html("")
                                                                                          htm(p.ypr.tl).html("<a htm=h> 详 情 </a>")
                                                                                          htm(p.ypr.rt).html("")
                                                                                          htm(p.yp.a.tl ).width("100%")
                                                                                          htm.a.th.contain.contents().map((l,ll)=>htm(ll).text(["商品(鼠标左键+Alt可修改商品)", "价格","计佣比率","最强比率","月推广","月派佣","",""][l]))
                                                                                          htm(p.yp.a.rt ).width(~~"")
                                                                                           htm(p.yp.rt , "")
                                                                                           pl.pla.css("transform" , "")
                                                                                          htm(p.yp.a.tl).css( {marginLeft : ""}) 
                                                                                     p.ar.h.css( {marginLeft: ~ pl.pla.width() , width : p.ar.width() })
                                                                                     
                                                                                                         
                                                                                                         aa=[]
                                                                                                         htm.p.all.constructor.keys(htm.p.all).map(function(l , p , ll){
                                                                                                               l= htm.p.all[l]
                                                                                                               if(l){ 
                                                                                                                     p= htm.panhtm.createElement("li")
                                                                                                                     htm(p).width(pl.pla.width())
                                                                                                                     p.r= l.l
                                                                                                                     //ll={a:l[2].replace(/鹊|定/,"") * 1 , aa:l[3].replace(/鹊|定/,"") * 1}
                                                                                                                     console.log(l)
                                                                                                                     l=l.map((a,aa)=> aa ? (aa==2 | aa==3) ? {html: ("<t>" + a + "</t>").replace(/鹊\<\/t\>/ , "</t><tl><ttl>鹊</ttl></tl>").replace(/定\<\/t\>/ , "</t><tl green><ttl>定</ttl></tl>") }
                                                                                                                                                      : {text: a} : {pn: 6 , text : a} )
                                                                                                                     htm.contain(p  , {ty: "|" , all:l })
                                                                                                                        htm(p.a6).html("<input type=checkbox>")
                                                                                                                      aa.push(p)
                                                                                                                 }
                                                                                                        })
                                                                                                        
                                                                                                        pl.pla.p.html(aa)
                                                                                                        htm("li [type=checkbox]" ,   pl.pla.p).css("pointer-events" , "auto")
                                                                                                        return htm("htm",htm.a.th).attr("htm","")
                                                                                                    //}
                                                                                                    //a()
                                                                                     //})
                                                                                     a()
         
                                                                         }
                                                                        } ,
                                                                       
                                                                       
                                                                       
                                                                       
                                                                       
                                                                       
                                                                       
                                                                       
                                                                       
                                                                       
                                                                       
                                                                       
                                                                       
                                                                       
                                                                       
                                                                       
                                                                       
                                                                       
                                                                       
                                                                       
                                                                       
                                                                       
                                                                       
                                                                       
                                                                       
                                                                       
                                                                       
                                                                       
                                                                       
                                                                       
                                                                       
                                                                       
                                                                       
                                                                       
                                                                       
                                                                       
                                                                       
                                                                       
                                                                       
                                                                       
                                                                       
                                                                       
                                                                       
                                                                       
                                                                       
                                                                       
                                                                       
                                                                       
                                                                       
                                                                       
                                                                       
                                                                       
                                                                       
                                                                       
                                                                       
                                                                       
                                                                       
                                                                       {
                                                                         html: "<a htm=h> 利 润 </a>" ,
                                                                          tap:     function(l , lh){
                                                                                                   p.rpy.contain.animate( [ "30px" , 100 , "30px" , "1px" , "1px" ] )
                                                                                                   htm(p.yp.tl).html(htm("<a htm=h> 利 润 </a>").css( {float : "left" , width: 200 } ))
                                                                                                   htm(p.yp.tt).html("")
                                                                                                   htm(p.yp.rt).html("")
                                                                                                   htm(p.ypr.tl).html("")
                                                                                                   htm(p.ypr.rt).html("")
                                                                                                   pl.pla.css( {    transform : "translateY(-60px)"})
                                                                                                   htm(p.yp.a.tl).css( {marginLeft : ""})
                                                                                                   pl.pla.p.html(l= htm("<label >").html(htm("<htm htm=hn animate>")).css( {float:  "left" , transform  : "scale(10)" } ))//.width(htm(p.yp.a).width())
                                                                                                   l.css( "margin" , (pl.pla.height() - l.height())/ 2 + "px " + (pl.pla.width() - l.width()) / 2 + "px" )
                                                                                                   //pl.pla.attr("src")== "http://pub.alimama.com/myunion.htm?#!/report/detail/taoke" ? "" : pl.pla.attr("src",     "http://pub.alimama.com/myunion.htm?#!/report/detail/taoke")
                                                                                                   p.yp.aa.html(lh = htm("<iframe>").attr("src" , "http://pub.alimama.com/myunion.htm?#!/report/detail/taoke").width("100%").height("90%")).width(htm(p.yp.a).width())
                                                                                                   l=(a)=> htm("<pl>").height(3).animate({height: 100} ,100 ,function(ll){console.log("aaa" , lh.contents())
                                                                                                                     ll=htm("th" , lh.contents()).text() ? htm("#alimama-footer" , lh.contents()).text() : ""
                                                                                                                     console.log(ll , htm("#alimama-footer" , lh.contents()))
                                                                                                                     if(ll ? "a" : a >= 100 ){
                                                                                                                            if(htm(p.yp.tl).text()==" 利 润 "){
                                                                                                                                  htm("html" , lh.contents()).css("transform"     , "translateX(-200px) translateY( -200px)")
                                                                                                                                  htm(".message-trigger, .message-panel, .wxrobot-trigger, #muxfb-global-emitter" , lh.contents()).css( "right" , lh.width() + 200 )

                                                                                                                                  htm("#alimama-footer" , lh.contents()).css("transform" , "translateX(-9000px)")
                                                                                                                                  htm(".wrapper" , lh.contents()).width(lh.width() + 200)
                                                                                                                                  htm(".table" , lh.contents()).height(lh.height() - 290)
                                                                                                                                  htm("th" , lh.contents()).map((l,ll)=>htm(ll).text(htm(ll).text()))
                                                                                                                                  htm(".tip" , lh.contents()).text("")
                                                                                                                                  htm(".main~*" , lh.contents()).contents().contents("ul").width(3)
                                                                                                                                  htm(p.yp.a.tl).css( {marginLeft : - px})
                                                                                                                                  pl.pla.p.html("")
                                                                                                                               }
                                                                                                                            return
                                                                                                                        
                                                                                                                        }
                                                                                                                        l(++a)
                                                                                                   })
                                                                                                   l(~~"")
                                                                                                   
                                                                                   }
                                                                        } ,
                                                                       
                                                                       
                                                                       
                                                                       {html: '<a htm=lg> 设 置 </a>' ,
                                                                          tap:     function(a , aa){
                                                                                                   htm(p.yp.tl).html(htm("<a htm=h> 设 置 </a>").css( {float : "left" , width: 200 } ))
                                                                                                   p.rpy.contain.animate( [ "30px" , 100 , "30px" , "1px" , "1px" ] )
                                                                                                   htm(p.yp.rt).html("")
                                                                                                   htm(p.ypr.tl).html("")
                                                                                                   htm(p.ypr.rt).html("")
                                                                                                   pl.pla.css( {    transform : "translateY(-60px)"})
                                                                                                     //p.yp.a.contain.animate( [0 , 100] )
                                                                                                   htm(p.yp.a.tl).css( {marginLeft : ""})
                                                                                                   //htm(p.yp.a.tl ).width("0")
                                                                                                   //htm(p.yp.a.rt ).width("100%")
                                                                                                   //htm(p.ypr.a.rt).html("")
                                                                                                   htm(p.yp.tt).html(aa=htm("<pl>"))
                                                                                                   htm.contain(aa.css( "margin" , 10) ,{ty:"|" , all:{
                                                                                                                                                        l:{pn: "100px" , html:htm('<input type=button value=" 储 存 " blue >').click(function(l){
                                                                                                                                                                              gt.ft("" , "color.htm" , l = "htm.co = {" + [].map.apply(htm("input[l]" , pl.pla.p) , [(a=> htm(a).attr("l") + ":'" + a.value + "'") ]) + "} , htm.color = {" + [].map.apply(htm("input[t]" , pl.pla.p) , [(a=> htm(a).attr("t") + ":'" + a.value + "'") ]) + "} , htm.tt = '" + htm("textarea",pl.pla.p).val() + "'")
                                                                                                                                                                              htm(aa.t).text("储存设置成功")
                                                                                                                                                                              eval(l)
                                                                                                                                                                              gt.ft("", "pl.htm").replace(/\{(?:.|\r|\n)*\}/ , a=> l=a)
                                                                                                                                                                              htm("style").html(l.replace(/htm\.(co(?:lor)?)\.([a-z]*)/g , (aa,l,a)=>htm[l][a]))
                                                                                                                                                                              gt.ft("", "a.htm").replace(/\{(?:.|\r|\n)*\}/ , a=> l=a)
                                                                                                                                                                              htm("style" , pl.pla.contents()).html(l.replace(/htm\.(co(?:lor)?)\.([a-z]*)/g , (aa,l,a)=>htm[l][a]))
                                                                                                                                                                              ap(pl.a)
                                                                                                                                                           })} ,
                                                                                                                                                        t:{tag:"<label>"  , lineHeight: "30px"}
                                                                                                                                                       }
                                                                                                    })
                                                                                                   //pl.pla.attr("src") == "a.htm" ? pl.pla.p.html("")    : pl.pla.attr("src",  "a.htm")
                                                                                                   //a=()=> htm("<pl>").height(3).animate({height: 100} ,100 , function(al , aa){
                                                                                                              //al=pl.pla.prop ? htm("alt" , pl.pla.prop("contentDocument")).length : ""
                                                                                                              //if(al){
                                                                                                                      pl.pla.p = htm("alt" , pl.pla.prop("contentDocument"))
                                                                                                                      pl.pla.p.html([
                                                                                                                                      "<h3>定向审核范文</h3>" ,
                                                                                                                                      htm("<textarea>").val(htm.tt).width(300) ,
                                                                                                                                      "<hr>",
                                                                                                                                      "<h3>背景色配色</h3>" ,
                                                                                                                                      "<p><a>软件:</a><input type=color l=htm value='" + htm.co.htm + "'></p>" ,
                                                                                                                                      "<p><a>最上部:</a><input type=color l=top value='" + htm.co.top + "'></p>" ,
                                                                                                                                      "<p><a>左部导向条:</a><input type=color l=left value='" + htm.co.left + "'></p>" ,
                                                                                                                                      "<p><a>左部导向鼠标悬浮:</a><input type=color l=lefthover value='" + htm.co.lefthover + "'></p>" ,
                                                                                                                                      "<p><a>主区域:</a><input type=color l=contain value='" + htm.co.contain + "'></p>" ,
                                                                                                                                      "<p><a>主区域标题条:</a><input type=color l=containtl value='" + htm.co.containtl + "'></p>" ,
                                                                                                                                      "<p><a>利润域:</a><input type=color l=money value='" + htm.co.money + "'></p>" ,
                                                                                                                                      "<p><a>商品表格标题条:</a><input type=color l=thall value='" + htm.co.thall + "'></p>" ,
                                                                                                                                      "<p><a>商品表格标题:</a><input type=color l=th value='" + htm.co.th + "'></p>" ,
                                                                                                                                      "<p><a>弹窗:</a><input type=color l=pl value='" + htm.co.pl + "'></p>" ,
                                                                                                                                      "<p><a>输入框:</a><input type=color l=input value='" + htm.co.input + "'></p>" ,
                                                                                                                                      "<p><a>鹊桥:</a><input type=color l=鹊 value='" + htm.co.鹊 + "'></p>" ,
                                                                                                                                      "<p><a>定向:</a><input type=color l=定 value='" + htm.co.定 + "'></p>" ,
                                                                                                                                      "<p><a>商品条:</a><input type=color l=lieven value='" + htm.co.lieven + "'></p>" ,
                                                                                                                                      "<p><a>宣传商品条:</a><input type=color l=li value='" + htm.co.li + "'></p>" ,
                                                                                                                                      "<p><a>商品条鼠标点触:</a><input type=color l=hoverli value='" + htm.co.hoverli + "'></p>",
                                                                                                                                      "<hr>",
                                                                                                                                      "<h3>文字配色</h3>" ,
                                                                                                                                      "<p><a>软件:</a><input type=color t=htm value='" + htm.color.htm + "'></p>" ,
                                                                                                                                      "<p><a>左部导向条:</a><input type=color t=left value='" + htm.color.left + "'></p>" ,
                                                                                                                                      "<p><a>左部导向鼠标点触:</a><input type=color t=lefton value='" + htm.color.lefton + "'></p>" ,
                                                                                                                                      "<p><a>旋转圈动画:</a><input type=color t=animate value='" + htm.color.animate + "'></p>" ,
                                                                                                                                      "<p><a>标签:</a><input type=color t=label value='" + htm.color.label + "'></p>" ,
                                                                                                                                      "<p><a>主区域:</a><input type=color t=contain value='" + htm.color.contain + "'></p>" ,
                                                                                                                                      "<p><a>主区域标题条:</a><input type=color t=containtl value='" + htm.color.containtl + "'></p>" ,
                                                                                                                                      "<p><a>推广商品条:</a><input type=color t=li value='" + htm.color.li + "'></p>" ,
                                                                                                                                      "<p><a>鹊桥:</a><input type=color t=鹊 value='" + htm.color.鹊 + "'></p>" ,
                                                                                                                                      "<p><a>定向:</a><input type=color t=定 value='" + htm.color.定 + "'></p>" ,
                                                                                                                                      "<p><a>输入框:</a><input type=color t=input value='" + htm.color.input + "'></p>"
                                                                                                                                   ])
                                                                                                                //}
                                                                                                      //})
                                                                                                      //a()
                                                                                   }
                                                                        }
                                                                       ]
                                                                      } ,
                                                                 textAlign: "center"
                                                          },
                                                     rp: {}
                                                    }
                                                }
                                    }
          }})

         htm.contain(p.map.rp ,{
                                all:{
                                     pf:{
                                         pn: "100px" ,
                                        contain: {ty:"|" ,
                                                  all: {l: {pn: "30px"} ,
                                                        aaa: {pn: "100px" , html: htm("<img>").attr("src" , "http:" + htm.aa) .width(100).height(100)} ,
                                                        yy: {pn:   "200px" , html: htm.tl + " ,欢迎你" , attr:{color: "green"} ,  marginLeft: 10 , lineHeight: "100px"} ,
                                                        aal: {
                                                              pn: 3 ,
                                                             contain: {ty:"|",
                                                                       all:{
                                                                            l:{html: htm("<pl>").html(["<p>30天笔数</p>" , "<p></p>" ]).css( {margin: 10 , width: "90%" , background: htm.co.money , height: "90%" }).corner("100px") } ,
                                                                            p:{html: htm("<pl>").html(["<p>30天效果</p>" , "<p></p>" ]).css( {margin: 10 , width: "90%" , background: htm.co.money , height: "90%" }).corner("100px") } ,
                                                                            lp:{html: htm("<pl>").html(["<p>30天收入</p>" , "<p></p>" ]).css( {margin: 10 , width: "90%" , background: htm.co.money , height: "90%" }).corner("100px") }
                                                                          }
                                                                     } ,
                                                             textAlign: "center"
                                                            } ,
                                                        pay: {html:htm("<button blue>进入alimama提款</button>").click(()=> open('https://media.alimama.com/account/account.htm')) , textAlign: "center" , lineHeight: "100px"} ,
                                                          ll: {pn: "30px"}
                                                      }
                                                }
                                       } ,
                                     pl:{
                                         contain:{all:[ 
                                                        "16px" ,
                                                        {
                                                         tag: p.rpy = htm.panhtm.createElement("pl") ,
                                                       contain: {ty:"|", all:[
                                                                              "16px",
                                                                              {
                                                                                tag:htm("<pl>").corner() ,
                                                                                background:   htm.co.contain   ,
                                                                                  contain:{
                                                                                           all:[
                                                                                                {
                                                                                                 pn:"60px", tag:p.yp = htm.panhtm.createElement("pla") ,  
                                                                                                 contain:{
                                                                                                          ty: "|" ,
                                                                                                          all:{
                                                                                                                tl:{pn:"100px"} , 
                                                                                                                tt: { } ,
                                                                                                                rt:{pn:"100px" , textAlign:"right"}
                                                                                                              } , 
                                                                                                         }
                                                                                               } ,
                                                                                                {pn: "2px" , html:"<hr/>"} ,
                                                                                                {
                                                                                                   tag: p.yp.a = htm.panhtm.createElement("pl") ,
                                                                                                 contain:{
                                                                                                          ty: "|" ,
                                                                                                          all:{
                                                                                                                rt:{
                                                                                                                    pn:"1px" ,
                                                                                                                    
                                                                                                                    //background: "#aa6af6"
                                                                                                                  },
                                                                                                                tl:{
                                                                                                                    //html: htm("<pl>") ,  
                                                                                                                  }  
                                                                                                                
                                                                                                              } , 
                                                                                                         }
                                                                                               }
                                                                                              ]
                                                                                            }
                                                                                } , 
                                                                               "26px",
                                                                               {
                                                                                tag:htm("<pl>").corner() ,
                                                                                background:      htm.co.contain ,
                                                                                  contain:{
                                                                                           all:[
                                                                                                {
                                                                                                 pn:"60px", tag:p.ypr = htm.panhtm.createElement("pla") ,  
                                                                                                 contain:{
                                                                                                          ty: "|" ,
                                                                                                          all:{
                                                                                                                tl:{} ,
                                                                                                                rt:{textAlign:"right"} 
                                                                                                              } , 
                                                                                                         }
                                                                                                } ,
                                                                                                 {pn: "2px" , html:"<hr/>"} ,
                                                                                                 {tag:p.ypr.a = htm.panhtm.createElement("pl"),  contain:{ty: "|" ,all:{
                                                                                                                                                     tl:{pn: "1px"} ,
                                                                                                                                                     rt:{}  
                                                                                                                                                    }
                                                                                                                                     }
                                                                                                  }
                                                                                                ]
                                                                                            }
                                                                                } , 
                                                                                "16px" ]}
                                                        } , 
                                                        "16px"
                                                      ]}
                                       }
                                   }
          })
          htm(p.yp.a.rt).html(p.yp.aa= htm("<pl>").width(htm(p.yp.a.tl).width()))
          
          htm(p.ypr.a.tl).html(htm(p.ypr.aa= htm.panhtm.createElement("pl")).width(htm(p.ypr.a.rt).width()))
          
          
          
          htm.contain(p.yp.a.tl ,{
                                  all:[
                                       {
                                        pn:"36px" ,
                                         tag:p.ar= htm("<pl>") ,
                                       contain :{ty: "|" ,
                                                 all:[
                                                     {html:"<label><input type=checkbox shopTag=yxjh>计划</label>"} ,
                                                     {html:"<label><input type=checkbox t='dpyhq=1' shopTag=dpyhq>优惠券</label>"} ,
                                                     {pn:  1.6,
                                                        tag:"<label></label>" ,
                                                      contain: {ty:"|" , all:[
                                                                              {  pn:"36px" , text:"店铺:"} ,
                                                                              { 
                                                                                pn: "1px" ,
                                                                                contain:{
                                                                                         all:[
                                                                                              {
                                                                                               html: p.ll = htm("<input t value=所有 tt=t>").width(116).on({
                                                                                                     input: function(){p.ll.val("所有")} ,      
                                                                                                          click:function(){
                                                                                                                          p.arp.css( {marginLeft: 6})
                                                                                                                          p.arp.click(function(a , aa){
                                                                                                                                                   a=a.originalEvent.srcElement
                                                                                                                                                   p.ll.val(a.textContent)
                                                                                                                                                   p.ll.attr("t" , (aa=htm(a).attr("t")) ? aa : "")
                                                                                                                                                   p.ll.attr("shopTag" , (aa=htm(a).attr("shopTag")) ? aa : "")
                                                                                                                                                   htm("title").animate({height: "+1000"} , 100 , function(){htm(window).click()})
                                                                                                                                                   console.log(htm(a).attr("shopTag") , p.ll.attr("shopTag"))
                                                                                                                          })
                                                                                                                          return !" "
                                                                                                          }
                                                                                                }) 
                                                                                               } ,
                                                                                              {pn: "1px" , html:  p.arp= htm("<pl>").css( {opacity:0.9 , marginLeft: - 900 , width: 116 , background: htm.co.pl , height : 161 }).corner().html(htm("<alt>").html("<li></li><li>所有</li><li>天猫</li><li>淘宝</li><li t='b2c=1' shopTag=b2c>旗舰店</li><li t='jpmj=1' shopTag=jpmj>金牌</li>"))}
                                                                                            ]
                                                                                         }
                                                                               } ,
                                                                              {html:htm("<a><t htm=pla></a>").css( {"marginLeft" :  "100px" })}// ,textAlign: "right"
                                                                            ]}
                                                      } ,
                                                     
                                                     {pn:2 ,html:htm("<label>").html(["月销量>",htm('<input type=number min=1 t=startBiz30day>'),"笔"])} ,
                                                     
                                                     {pn:2, html:htm("<label>").html([ "比率>", htm("<input type=number min=0.1 t=startTkRate>") , "%" ])} ,
                                                      {html: htm("<button blue>确 定</button>")  .css( {margin:"2%" , zoom: 0.9}).click(function(a){p.lpl.trigger("click")})} ,
                                                     {pn:"1px" , html:p.ar.h=htm("<pl ar>")}//.css( {opacity: 0.9 , marginLeft: "" ,   background: htm.co.contain })                                                                                                
                                                    ]
                                                   }
                                        } ,
                                       {
                                        pn:"30px" ,
                                         tag:p.th= htm.panhtm.createElement("pal") ,
                                         background: htm.co.thall ,
                                          textAlign: "center" ,
                                          lineHeight: "30px" ,
                                       contain :{ty: "|" ,
                                                 all:[
                                                      {pn:  6 , html: htm("<a>商品(<t>鼠标左键+Alt</t>可让商品到推广栏,点触右则<t>深色</t>标题可排序)<ht htm=right></a>") } ,
                                                      {html: "<a htm a=3>价格<htm></a>"} ,
                                                      {html: "<a>佣金</a>"} ,
                                                      {html: "<a a=1>最强比率<htm></a>"} ,
                                                      {html: "<a a=5>月推广<htm></a>"} ,
                                                      {html: "<a a=7>月派佣<htm></a>"} ,
                                                      {html: "<a>优惠券</a>"} ,
                                                      {pn:"16px"}
                                                     ] ,
                                                   O: 1
                                                 } ,
                                            on:{click: function(a,aa,aaa){
                                                                   if(htm.p.rpa==" 商 品 " | htm.p.rpa==" 鹊 桥 "){
                                                                           a=htm(a.originalEvent.srcElement)
                                                                           aa=htm("htm" , a)
                                                                           aaa= +(a.attr("a"))
                                                                           a= (a.text()=="价格" ? aa.attr("htm")=="ll" : "") ? (++aaa , "htm") : "ll"  
                                                                           p.th.contain.map(function(a,a){
                                                                                  htm("htm" , a).attr("htm" , "")
                                                                           })
                                                                           if(aaa){ 
                                                                             aa.attr("htm" , a)
                                                                             htm.p.th= "&queryType=0&sortType=" + aaa + "&"
                                                                             return tap()
                                                                            }
                                                                             htm.p.th=""
                                                                             tap()
                                                                     }
                                                }}
                                        } ,
                                        {html:pl.pla= htm("<iframe height=100% width=100% src=a.htm>")}
                                       ]
        })
        ////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
        
        new Clipboard( pl.ll  , {
               target: ()=>  pl.ll
             })
        
        htm.contain(p.ar.h.width(p.ar.width()),{ty:"|" ,all:[
                                                            { pn : 2 , text: '以下每条商品右侧有个"打勾",宣传需勾上，不宣传不用勾' } ,
                                                            {html: htm( "<button blue>储存以及转链</button>").css( {margin: 2 , zoom: 0.9}).click(function (aa , t){console.log("aaa")
                                                                              if(htm("[l=ok]" , pl.pla.p).length){  
                                                                                aa=[]
                                                                                htm.p.all.constructor.keys(htm.p.all).map(function(l){
                                                                                     if(l=htm.p.all[l]){
                                                                                         aa.push('{l:["' +  l.l.join('","') + '"] , a:["' + l.join('","')  + '"]}')
                                                                                      }
                                                                                })
                                                                                localStorage["l"] =  "[" + aa + "]"
                                                                                
                                                                                htm("li [type=checkbox]" , pl.pla.p).css("pointer-events" , "")
                                                                                  htm(p.ypr.tl).html("<a htm=lg> 设 置 </a>")
                                                                                  htm(p.jpg).css( {transform: "translateY(1px)" , background: htm.co.contain})
                                                                                  p.la.text("ok")
                                                                                  p.ra.text("返回")
                                                                                 p.ypr.a.rt.pl.html("")
                                                                                  t=htm.now()
                                                                                  aa=pl.aa.get("http://pub.alimama.com/common/adzone/adzoneManage.json?tab=3&toPage=1&perPageSize=40&gcid=8&t=" + (t + 100) + "&" + "pvid=" + htm.p.pn+ t + "&" + htm.p.token + "&_input_charset=utf-8")
                                                                                 aa.then(function(l){
                                                                                                      l=[]
                                                                                                      aa.responseText.replace(/adzonePid\"\:\"(mm(?:\_[0-9]*)*?)\"/g, (aa,a)=>l=l.concat(a))
                                                                                   console.log(aa)
                                                                                   htm.contain(p.jpg, {all:[
                                                                                                            {pn: "60px" , html:"<h3>3段码<h3>"}   ,
                                                                                                            {
                                                                                                             pn: "26px" ,
                                                                                                             contain: {ty:"|" , all:[
                                                                                                                                     { 
                                                                                                                                      pn: "1px" ,
                                                                                                                                      contain:{
                                                                                                                                               all:[
                                                                                                                                                    {html: p.jpg.ll = htm("<input jpg tt>").width(300).val(l[1])} ,
                                                                                                                                                    {pn: "1px" , html:  p.jpg.arp= htm("<pl>").css( {opacity:0.9 , marginLeft: - 6000 , width: 300 , background: htm.co.money , height : 163 }).corner().html(htm("<alt>").html("<li><label>" + l.join("</label></li><li><label>") + "</label></li>"))}
                                                                                                                                                  ]
                                                                                                                                                }
                                                                                                                                       } ,
                                                                                                                                      {html:htm("<a><t htm=pla></a>").css( {lineHeight: "30px" , "marginLeft" :  "282px"}) ,
                                                                                                                                         on: {click :function(a){   console.log(a)
                                                                                                                                                                  p.jpg.arp.css( {marginLeft: 6})
                                                                                                                                                                  p.jpg.arp.click(function(a , aa){
                                                                                                                                                                                         a=a.originalEvent.srcElement
                                                                                                                                                                                         p.jpg.ll.val(a.textContent)
                                                                                                                                                                 })
                                                                                                                                                                return !" "
                                                                                                                                       }}}// ,textAlign: "right"
                                                                                                              ]}
                                                                                                           } ,
                                                                                                          {pn:"60px" , html:"<h3>宣传图文设置<h3>" , marginTop: "11px"} ,
                                                                                                          {pn:"2px" , html:"<hr>"} ,
                                                                                                          {pn:"60px" , html:"插入:<label>{图片}</label> ,<label>{标题}</label> ,<label>{价格}</label> ，<label>{合长链}</label>,<label>{长链} </label>，<label>{合淘口令}</label> , <label>{淘口令}</label> , <label>{二维码}</label> , <label>{合链}</label> , <label>{链}</label> " } ,
                                                                                                          {pn:"26px" , html:"注意：若商品提供优惠券，那{合长链},{合链}和{合淘口令} 为二合一链"} ,
                                                                                                          {html: p.jpg.tr = htm("<textarea>").width(300).height("90%").text("大优惠\n{图片}\n{标题}\n抢购价:【￥{价格}】\n内部优惠入口:{合链}")}
                                                                                                         ]
                                                                                        })
                                                                                        htm(">*",p.jpg).css( "marginLeft"  , 6 )
                                                                                     })
                                                                                   return
                                                                               }
                                                                               alert("你未选择商品")
                                                                               //htm("pl",p.map.lf)[3].tap()
                                                     }) }
                                               ]})
          
          window.onclick = function(l){
           if(p.arp) p.arp.css("marginLeft") =="6px" ?       p.arp.css( {marginLeft: - 900 }) : ""
           if((l=p.jpg) ? (l=l.arp) : "" ) l.css("marginLeft") =="6px"?l.css( {marginLeft: - 6000 }) : "" }
           pl.pla.prop("contentWindow").onclick    = ()=>   htm(window).click()
           htm([ window , pl.pla.prop("contentWindow") ] ).keyup (l => 
                          (l.originalEvent.srcElement.tagName == "INPUT" | l.originalEvent.srcElement.tagName == "TEXTAREA") ? (l.originalEvent.srcElement == p.a[0] & l.originalEvent.code =="Enter") ? tap() : "l" : "l")
          
          pl.pla.load( function(a , t){
                                 a = pl.pla.attr("src")
                                 if(a=="a.htm"){
                                   pl.pla.p = htm("alt" , htm(pl.pla.contents().prop("activeElement")).css("margin",1/1000))
                                  if(pl.pla.p.length){ 
                                    htm("style" , pl.pla.contents()).html(htm("style" , pl.pla.contents()).html().replace(/htm\.(co(?:lor)?)\.(鹊|定|[a-z]*)/g , (aa,l,a)=>htm[l][a]))
                                    a=localStorage.getItem("l")
                                   if(a) eval("a=" + a)
                                   if(a){
                                          a.map(function(lp , a , al){
                                                  lp.a.l= lp.l 
                                                  lp= lp.a
                                                      al=(lp[3] + "").replace(/鹊|定/ , "") * 1
                                                  a=(lp[2] + "").replace(/鹊|定/ , "") * 1
                                                  if(al>a){
                                                            l=htm.get("http://pub.alimama.com/pubauc/getCommonCampaignByItemId.json?itemId=" + lp.l[0] + "&t=" + ((t=htm.now()) + 100)  + "pvid=" + htm.p.pn + t  + "&" + htm.p.token, function(ll , aa ,al){
                                                                      l=l.responseText
                                                                      if(l.replace(/\{"data"\:\{\}.*/ , "")) {
                                                                             eval("ll=" + l.replace(/\"[^\"]*Rate\"/g , '"tlrate"').replace(/\"[^\"]*st/g , '"ap').replace(/^.*?(?=\[)|"Avg.*?,|\].*/g,"") + "]")
                                                                    console.log(ll)
                                                                             aa={ }
                                                                             al= { }
                                                                             ll.map(function(l){
                                                                                                 aa= aa.tlrate > l.tlrate ? aa : l
                                                                                                 if(l.manualAudit) return ""
                                                                                                 al=al.tlrate > l.tlrate ? al : l
                                                                             })
                                                                             ll= aa.apStatus
                                                                             if(ll==2){
                                                                                        lp[2] = aa.tlrate + "定"
                                                                                        return
                                                                               }
                                                                              if(ll==1) return
                                                                              l= al.tlrate
                                                                              l=~~l
                                                                             if(l > a){
                                                                                       ll= al.apStatus
                                                                                       if(ll==2){
                                                                                                 lp[2] = l + "定"
                                                                                                 return
                                                                                         }
                                                                                       if(ll==1) return
                                                                                       htm.post("http://pub.alimama.com/pubauc/applyForCommonCampaign.json",{campId: al.CampaignID , t: (t=htm.now()) + 100 , keeperid: al.ShopKeeperID , applyreason:"al" ,pvid: htm.p.pn + t  ,  _tb_token_: htm.p.token.replace(/_tb_token_\:/ , "") } , ()=> l.ok ? lp[2] = l + "定" : "")          
                                                                              }
                                                                             ll= aa.tlrate > l
                                                                             if(ll){
                                                                                       htm.post("http://pub.alimama.com/pubauc/applyForCommonCampaign.json",{campId: aa.CampaignID , t: (t=htm.now()) + 100 , keeperid: aa.ShopKeeperID , applyreason:"al" ,pvid: htm.p.pn + t  ,  _tb_token_: htm.p.token.replace(/_tb_token_\:/ , "") } ,  ()=> l.ok ? lp[3] = aa.tlrate + "定" : "")           
                                                                              }
                                                                    }
                                                             })
                                                   }
                                                  htm.p.all[lp.l[0]] = lp
                              })
                          }                           
                                                         
                                                        
                                         /*   p= htm.panhtm.createElement("li")
                                            //p.r=[ l.title.replace(/\<[^\>]*?\>/g ,  "") , l.zkPrice , l.tkCommFee , l.tkRate , l.totalNum , l.totalFee , l.couponAmount]
                                            p.r=ll.r
                                            htm(p).width(1000)
                                            htm.contain(p  , {ty: "|" ,
                                                                             all:[
                                                                                  {pn:  6.3 , text: ll.a[0] } ,
                                                                                  {text: ll.a[1]} ,
                                                                                  {text: ll.a[2]} ,
                                                                                  {html: ll.a[3]*1?     ll.a[3] :  "<t>" + ll.a[3].replace("鹊" , "")  + "</t><tl><t>鹊</t></tl>" } ,
                                                                                  {pn: 1 ,text:ll.a[4]} ,
                                                                                  {pn:1 ,text:ll.a[5]} ,
                                                                                  {pn:1 }
                                                                                 ] ,
                                                                             })
                                            htm(p).attr("p","ok")
                                            htm(p).width("100%")
                                            htm.p.all[p.r[0]] = p 
                                           return p */
                             //})
                            //}
                        
                        pl.pla.p.click(function(a , l){
                                        
                                     l = a.originalEvent.srcElement
                                              
                                     if (htm(p.ypr.tl).text()==" 设 置 ") return 
                                     
                                     
                                     
                                     
                                     if(l.tagName == "INPUT"){console.log("a", a)
                                                           htm(pl.pla.prop("contentDocument").elementFromPoint(100 , a.clientY)).attr("l" ,  l.checked ? "ok" : "")
                                      }
                                     if(l.tagName == "LI"){console.log("aa",l)
                                                         p.ypr.a.rt.p.attr("src" , "")
                                                          htm("a" ,p.ypr.a.rt.l.width(htm(p.ypr.a).width())).attr("htm" , "hn").css("lineHeight" ,p.ypr.a.rt.l.height() + "px")
                                                         p.ypr.a.rt.p.attr("src" , "http:" + l.r[1] + "_300x300.jpg")
                                                          p.ypr.a.rt.pl.html("<p>" + htm("pl" ,  l)[0].textContent + "</p><p>抢购价:￥" +htm("pl",l)[1].textContent + "</p>")
                                                          p.ypr.a.rt.hl  = l
                                                          htm("li" , pl.pla.p).css( {"float" : "left" , background: "" } )
                                                          htm("li:even" , pl.pla.p).css( {"float" : "left" , background: htm.co.lieven } )
                                                          htm(l).css( {"float" : "left" , background: htm.co.hoverli } )
                                                          
                                                          
                                                          //if(htm(":checkbox" , l).length) 
                                                          
                                                          if(a.altKey){
                                                                       if(htm(p.ypr.a.rt.hl).attr("p")=="ok"){//console.log("ll",htm("a" , p.ypr.tl).attr("htm"))
                                                                          htm("a" , p.yp.tl).attr("htm")=="hn" ? (console.log("l",l) , l.outerHTML="") : ""
                                                                          htm(p.ypr.a.rt.hl).attr("p","")
                                                                          htm.p.all[p.ypr.a.rt.hl.r[0]] = ""
                                                                          return !!""
                                                                     }
                                                                     pl.al()
                                                                           
                                                           }
                                                            return !!""
                                     }
                        })
                      return
                     }
                     
                     
                     
                     pl.pn()
                     pl.aa.src=pl.aa.src + "#"
                   }
          })
          
          
                    
//http://pub.alimama.com/pubauc/getCommonCampaignByItemId.json?itemId=
//http://pub.alimama.com/items/channel/qqhd.json?q=
//http://pub.alimama.com/items/search.json?q=              //营销和定向计划 shopTag=yxjh  //店铺优惠券 dpyhq=1&shopTag=dpyhq  //dpyhq=1&shopTag=yxjh%2Cdpyhq //月转率 hPayRate30=1 //天猫旗舰店  b2c=1&shopTag=b2c //b2c=1&dpyhq=1&shopTag=b2c%2Cyxjh%2Cdpyhq  //月销量  startBiz30day=60  //收入比率 startTkRate=30  //人气 queryType=2 //价格从高到低 queryType=0&sortType=3 //价格从低到高 queryType=0&sortType=4 //销量从高到低 queryType=0&sortType=9 //比率从高到低 queryType=0&sortType=1 //月推广量从高到低  queryType=0&sortType=5  //月佣金从高到低  queryType=0&sortType=7    
//http://pub.alimama.com/common/code/getAuctionCode.json?auctionid=540905867057&adzoneid=91672645&siteid=25232497&scenes=1&t=1494831932336&_tb_token_=p1vA73VRKdq&pvid=10_119.129.1.189_452_1494831896059
          
          
          
          
          pl.al= function(lp, a , l){console.log("aaa")
                              //lp=htm(p.ypr.a.rt.hl).clone()
                              lp=[].map.apply(htm(p.ypr.a.rt.hl).contents() , [(l,ll)=> (ll==6) ? "" : htm(l).text()])
                               lp.l= p.ypr.a.rt.hl.r
                               lp[2] = p.ypr.a.rt.hl.r[2]
                              //htm(lp.contents()[2]).html(("<t>" + p.ypr.a.rt.hl.r[2] + "</t>").replace("鹊</t>" , "</t><tl><tll>鹊</tll></tl>")
                              //htm(l.contents()[6]).html()
                              htm.p.all[p.ypr.a.rt.hl.r[0]] = lp
                              htm(p.ypr.a.rt.hl).attr("p","ok")
                              
                              a=(p.ypr.a.rt.hl.r[2] + "") .replace("鹊" , "") * 1
                                    if(htm("t" , p.ypr.a.rt.hl.a3).text() * 1 > a){console.log(htm("t" , p.ypr.a.rt.hl.a3).text() * 1 , a)
                                            l=htm.get("http://pub.alimama.com/pubauc/getCommonCampaignByItemId.json?itemId=" + p.ypr.a.rt.hl.r[0] + "&t=" + ((l=htm.now()) + 100)  + htm.p.token + "&pvid=" + htm.p.pn + l , function(ll , aa ,al){
                                                       l=l.responseText
                                                       if(l.replace(/\{"data"\:\{\}.*/ , "")) {
                                                                   eval("ll=" + l.replace(/\"[^\"]*Rate\"/g , '"tlrate"').replace(/\"[^\"]*st/g , '"ap').replace(/^.*?(?=\[)|"Avg.*?,|\].*/g,"") + "]")
                                                          console.log(ll)
                                                                   aa={ }
                                                                   al= { }
                                                                   ll.map(function(l){
                                                                                       aa= aa.tlrate > l.tlrate ? aa : l
                                                                                       if(l.manualAudit) return ""
                                                                                       al=al.tlrate > l.tlrate ? al : l
                                                                   })
                                                                   console.log(aa,al)
                                                                   ll= aa.apStatus
                                                                   if(ll==2){
                                                                              lp[2] = aa.tlrate + "定"
                                                                              return
                                                                     }
                                                                    if(ll==1) return
                                                                    l= al.tlrate
                                                                    l=~~l
                                                                   if(l > a){
                                                                             ll= al.apStatus
                                                                             if(ll==2){
                                                                                       lp[2] = l + "定"
                                                                                       return
                                                                               }
                                                                             if(ll==1) return
                                                                             htm.post("http://pub.alimama.com/pubauc/applyForCommonCampaign.json",{campId: al.CampaignID , t: (ll=htm.now()) + 100 , keeperid: al.ShopKeeperID , applyreason: htm.tt ,pvid: htm.p.pn + ll  ,  _tb_token_: htm.p.token.replace(/_tb_token_\=/ , "") } , ll=> ll.ok ? lp[2] = l + "定"  : "")          
                                                                    }
                                                                   ll= aa.tlrate >  l
                                                                   if(ll){
                                                                             htm.post("http://pub.alimama.com/pubauc/applyForCommonCampaign.json",{campId: aa.CampaignID , t: (ll=htm.now()) + 100 , keeperid: aa.ShopKeeperID , applyreason: htm.tt ,pvid: htm.p.pn + ll  ,  _tb_token_: htm.p.token.replace(/_tb_token_\=/ , "") } ,  ll=> ll.ok ? lp[3] = aa.tlrate + "定" : "")           
                                                                    }
                                                          }
                                                   })
                                      }

          }
          
          
          htm("a" , p.map.lf).css("lineHeight" , htm(p).height() /11 * 10 / 6 + "px")
          htm(p.map.lf).click(function(a){
                a= htm.panhtm.elementFromPoint(2,a.pageY)
                //a=a.originalEvent.srcElement
                htm("a",p.map.lf).css( "color" , "")
                htm("a" , a).css("color" , htm.color.lefton)
                htm(p.yp.a.tl).css( { marginLeft :  -9000})
                p.yp.aa.html("")
              if("tap" in a)   a.tap( a.textContent)

          })
          htm.a= p
        //htm("pl",p.map.lf)[2].tap()
          htm("pl",p.map.lf)[0].tap()
          htm(htm("a",p.map.lf)[0]).css( "color" , htm.color.lefton)
          
          //pl.h => 
  
  
  
  
  
  
  
  
  
  
  
  pl.ph = (a,pal)=> np.Window.open("a.htm" , {always_on_top : true ,  width: 600  , height: 600} , function(l , aa , r){
       pal= np.Window.get()
       htm.l=l
       l.y= - 30
       l.window.onload  =  function(){
         htm("style" , htm.l.window.document).html(htm("style" , htm.l.window.document).html().replace(/htm\.(co(?:lor)?)\.(鹊|定|[a-z]*)/g , (aa,l,a)=>htm[l][a]))
         htm(htm.l.window.document.activeElement).html('<svg width="100%" height="100%"><foreignObject width="100%" height="100%"></foreignObject></svg>')
         aa=htm("foreignObject" , l.window.document).height(600)
         l.h=htm("svg", l.window.document).css( {height:   90})
         htm(l.window.document.activeElement).css( "margin" , 6/600000000)
         htm.contain(aa , {all:[
                                   {
                                    pn: "10px" ,
                                    html:l.tt=htm("<pl>").css( {height:90, background: htm.co.htm , textAlign: "center" , marginTop: "10px"})
                                    } ,
                                   {
                                    pn:    "90px" ,
                                    contain:  {ty:"|" ,all:[
                                                            {pn:   "100px" , html: l.jpg = htm("<img>").width("100%").height("100%").attr("src" , "lg.gif")} ,
                                                            
                                                            {
                                                             contain:{all:[
                                                                               {html: "<h6>淘多惠广播机</h6>", lineHeight: "36px" , textAlign: "center" } ,
                                                                               {pn: "16px" , background: "#31aafa" ,  html : l.mt = htm("<meter value=100 float=left>").width(1).height("100%")} ,
                                                                               {tag: l.t=htm("<pl>") ,lineHeight: "31px" ,textAlign: "center" }
                                                                              ]}
                                                             }     ,
                                                           {
                                                            pn: "100px" ,
                                                               contain:{all:[
                                                                             {html:htm("<button blue>").text("返回").click(h=>(pal.x = 1,    l.x=30000 , pal.show() , l.aa.html(htm.l.al =htm('<iframe nwfaketop width="100%" >').height("100%")) , l.tt.css("transform" , "") , l.jpg.attr("src" ,"lg.gif")))} ,
                                                                             {html:l.l=htm("<button blue>").width(60).text(">>").click(h=>l.l.text()=="广播" ? (l.l.tap ? l.l.tap() : "") :  l.height>100 ? (l.h.height(90), l.height= 100  , l.l.text(">>")) : (l.height= 633 , l.h.height(600) ,  l.l.text("<<")))}  
                                                                           ]} 
                                                                               //,lineHeight: "36px" 
                                                          }
                                                         ]}
                                    } ,
                                   {tag:l.aa=htm("<pl>"), html: l.al =htm('<iframe nwfaketop width="100%" >').height("100%")}
                               ]})
       //h()
       a()
     }
   })
          


  pl.qq = function(lt,pal , l){
      pal= np.Window.get()
      l={}
      l.pla = htm("li" , pl.pl.pl)
      htm(pl.a).html("")
      pal.width = 600
      pal.height = 90
      htm("svg , foreignObject").height(90)
      htm("svg , foreignObject").width(600)
      pal.setAlwaysOnTop(true)
      htm.contain(pl.a , {ty:"|" ,all:[
                                                            {pn:   "100px" , html: l.jpg = htm("<img>").width("100%").height("100%").attr("src" , "lg.gif")} ,
                                                            
                                                            {
                                                             contain:{all:[
                                                                               {html: "<p>淘多惠广播机</p>", lineHeight: "30px" , textAlign: "center" } ,
                                                                               {pn: "16px" , background: "#31aafa" ,  html : l.mt = htm("<meter value=100 float=left>").width(1).height("100%")} ,
                                                                               {tag: l.t=htm("<pl>") ,lineHeight: "31px" ,textAlign: "center" }
                                                                              ]}
                                                             }     ,
                                                           {
                                                            pn: "100px" ,
                                                               contain:{all:[
                                                                             {html:htm("<button blue>").text("返回").click(h=> pl.pn("aaa")) , lineHeight: "90px" , textAlign: "center" } ,
                                                                             //{html:l.l=htm("<button blue>").width(60).text(">>").click(h=>l.l.text()=="广播" ? (l.l.tap ? l.l.tap() : "") :  l.height>100 ? (l.h.height(90), l.height= 100  , l.l.text(">>")) : (l.height= 633 , l.h.height(600) ,  l.l.text("<<")))}  
                                                                           ]} 
                                                                               //,lineHeight: "36px" 
                                                          }
                                      ]})
      //htm.l.tt.html("")
      htm.get(fph + "QQ" , function (a , pla ){
        var r= []
        a.replace(/(?:.|\n)*?addRow\(\"([^\"]*)\.lnk\"/g , (hh,h)=>{r.push(h)})
        //l=htm.l
        //l.h.height( 90)
        //l.height= 100
        l.t.text("")
        pal.x = ~~((screen.availWidth - (  pal.width)) / 2)
        pal.y = 3
        //l.al.attr("src"   , "")
        //l.l.css("marginLeft" , "1000")
        pla = l.pla
          console.log(pla,r)
        htm(pl.ll).html(htm(pla[0]).html().replace(/li\>/g , "pl>").replace(/p\>/g , "li>"))
             
         console.log("a")
        if(pla.length ?  r.length : ""){
             (function lhp(lp , ll , animate){
                      function q(lp , ll){
                                  if(pal.width >600) return 
                              pl.ll.click()
                              gt.ft(php , "h.txt" , "l")
                              gt.ft(php    , "l.txt" , r[lp])
                              np.Shell.openItem(php + "/ph.exe")
                              lhp(lp+1 ,ll)
                      }
              l.mt.width(1)
              
              animate=()=> (console.log("a") , l.mt.animate({width: "100%"} , lt , a=> q(lp , ll)))
             
            if(lp  >= r.length) {
                 ll+=1
                 if(ll >= pla.length){
                          return l.t.text("已经向所有QQ号或群号，宣传了所有商品")
                  }
                  htm(pl.ll).html(htm(pla[ll]).html().replace(/li\>/g , "pl>").replace(/p\>/g , "li>"))

                    console.log("aa")
                 lp = ~~""
                 l.jpg.attr("src" , htm("img" , pla[ll]).attr("src"))
                 l.t.text("正等待广播到:【" + r[lp] + "】")
                 return       animate()                   
             }
             
             console.log(animate)
             l.jpg.attr("src" , htm("img" ,pla[ll]).attr("src"))
             l.t.text("正等待广播到:【" + r[lp] + "】")
                 animate()   
         })(~~"",~~"")
         }
        })
      
      
      //if("l" in htm ? htm(htm.l.window).height() : "") return a()
       
       //pl.ph(a)      
       //htm.l.l.css("marginLeft" , 6000)
 }
 
        
        
        
        
        
        
        
        
        
        
        
        
        

        
  pl.qql = function(lt,pal , l){
      pal= np.Window.get()
      l={}
      l.pla = htm("li" , pl.pl.pl)
      htm(pl.a).html("")
      pal.width = 600
      pal.height = 600
      htm("svg , foreignObject").height(600)
      htm("svg , foreignObject").width(600)
      pal.x = ~~((screen.availWidth - 600) / 2)
      pal.setAlwaysOnTop(true)
      htm.contain(pl.a ,       {all:[
                                   {
                                    pn: "1px" ,
                                    html:l.tt=htm("<pl>").css( {height:90, background: htm.co.htm  , textAlign: "center" })
                                    } ,
                                   {
                                    pn:    "90px" ,
                                    contain:  {ty:"|" ,all:[
                                                            {pn:   "100px" , html: l.jpg = htm("<img>").width("100%").height("100%").attr("src" , "lg.gif")} ,
                                                            
                                                            {
                                                             contain:{all:[
                                                                               {html: "<h6>淘多惠广播机</h6>", lineHeight: "36px" , textAlign: "center" } ,
                                                                               {pn: "16px" , background: "#31aafa" ,  html : l.mt = htm("<meter value=100 float=left>").width(1).height("100%")} ,
                                                                               {tag: l.t=htm("<pl>") ,lineHeight: "31px" ,textAlign: "center" }
                                                                              ]}
                                                             }     ,
                                                           {
                                                            pn: "100px" ,
                                                               contain:{all:[
                                                                             {html:htm("<button blue>").text("返回").click(h=> pl.pn("aaa"))} ,
                                                                             {html:l.l=htm("<button blue>").width(60).text(">>").click(h=>l.l.text()=="广播" ? (l.l.tap ? l.l.tap() : "") : ""  )}  
                                                                           ]} 
                                                                               //,lineHeight: "36px" 
                                                          }
                                                         ]}
                                    } ,
                                   {tag:l.aa=htm("<pl>"), html: l.al =htm('<iframe nwfaketop width="100%" >').height("100%")}
                               ]})
      
      {(function (a){
        //l.h.height(600)
        l.t.text("")
        l.tt.css("transform" , "translateY(1px)").html(htm("<h3>登录微信帐号</h3>").css( "lineHeight" , "90px"))
        l.l.css("marginLeft" , "")
        l.l.text("广播")
        
        
        
        
        
        l.al.attr("src"   , "http://wx.qq.com")
        var aa= l.al.prop("contentWindow")
        //htm.aa=aa
        a=(h)=> htm("<pl>").height(3).animate({height: 100} ,1000 ,function(tl){
              tl= "angular" in aa 
              if(tl){
                        l.al.contents().contents().css("zoom" , 0.6)
                     if(h=  aa.angular.element('.contact_item').length){
                           if(aa.h==h){
http://img.alicdn.com/bao/uploaded/i1/921225565/TB2ciYZXyC9MuFjSZFoXXbUzFXa_!!921225565.jpg_300x300.jpg
                                  console.log(al=aa.angular.element('[mm-repeat="item in allContacts"]').scope().allContacts , ({}).constructor.keys(al[1]))
                                  l.tt.html(l.tt.t="<p>在下面微信左则,对一个群组或联络人,按(鼠标右键+Alt键),</p><p>可让他成为绿色,再次按(鼠标右键+Alt键)可恢复,</p><p>当你全部已经设置,可按右上面“广播”,</p><p>所有绿色群组或联络人,会被软件轮番宣传</p><p>淘多惠也会记住这些设置，用作下次宣传操作</p>").css("zoom" , 0.6)
                                  
                           //aa.angular.element(".main").css("zoom" , 0.6)
                                  aa.angular.element(".tab_item>*")[2].click()
                                  aa.angular.element("style").html(aa.angular.element("style").html() + "[color=green]{background:green}")
                                  
                                  aa.angular.element('.contact_item').contextmenu((l,a)=>
                                  l.altKey ? (a= htm(aa.document.elementFromPoint(3 , l.clientY))).attr("color")=="green" ? a.attr("color" , "") : a.attr("color", "green") : "").map((l,ll)=> 
                                   htm(ll).attr("np", htm("img" ,ll).attr("src").replace(/^.*?=|&.*/g , "")))
                                   if(localStorage.tl) localStorage.tl.replace(/.*?(?=,)/g,  l => aa.angular.element("[np='" + l + "']").attr("color","green"))
                                  
                                  l.l.tap=  function(pla , tll , ft){
                                                        aa= l.al.prop("contentWindow")
                                                        tl= aa.angular.element('.contact_item[color=green]')
                                                                    console.log("tl",tl)
                                                        if(tl.length){
                                                                var at
                                                                aa.angular.element(".tab_item>*")[~~""].click()
                                                                l.tt.text("").css("transform" , "")
                                                                //l.l.text("<<")
                                                                     pla = htm("li" , pl.pl.pl)
                                                                tll = ""
                                                                tl=tl.map((l,ll)=> (l= aa.angular.element(ll).scope().user , tll = tll + (ll=htm(ll).attr("np")) + "," , {al: l.UserName , a:l.NickName , l:ll}))
                                                                localStorage.tl= tll
                                                                tll = aa.angular.element('[mm-repeat="chatContact in chatList track by chatContact.UserName"]').scope()
                                                                tll.itemClick("filehelper")
                                                                at=()=> htm("<pl>").height(3).animate({height: 100} ,1000 ,function(){
                                                                           pl.ft=ft= aa.angular.element(":file~label")
                                                                           if(ft.l=ft.scope()){
                                                                             gt.ft(php    , "a.txt" , htm(pla[~~""]).attr("hr"))
                                                                             ft.lt= htm(pla[~~""]).html().replace(/(?:\<[^\>]*?\>)(?:\<[^\>]*?\>)(?:\<[^\>]*?\>)*/g , "\n").replace(/(?:\<[^\>]*?\>)/g , "")
                                                                             if(pla.length ?  tl.length : ""){
                                                                                                     (function lhp(lp , ll , animate){
                                                                                                              function q(lp , ll){
                                                                                                                          if(pal.width >600) return 
                                                                                                                      gt.ft(php , "h.txt" , "a")
                                                                                                                      //tll.itemClick(tl[lp].al)
                                                                                                                      np.Shell.openItem(php + "/ph.exe")
                                                                                                                      pal.appWindow.show()
                                                                                                                      htm("<pl>").height(3).animate({height: 100} , 1000 , function(){console.log("a" , pal)
                                                                                                                       //pal.show()
                                                                                                                       ft.click()
                                                                                                                       htm("<pl>").height(3).animate({height: 100} , 9000 , function(){
                                                                                                                        ft.l.editAreaCtn=ft.lt
                                                                                                                        ft.l.sendTextMessage()
                                                                                                                        lhp(lp+1 ,ll)
                                                                                                                       })
                                                                                                                      })
                                                                                                              }
                                                                                                      l.mt.width(1)
                                                                                                      console.log("aa",lt)
                                                                                                      //lt=30000
                                                                                                      
                                                                                                      animate=()=> (console.log("a",lt) , l.mt.animate({width: "100%"} , lt , ()=> q(lp , ll)))
                                                                                                     
                                                                                                    if(lp  >= tl.length) {
                                                                                                         ll+=1
                                                                                                         if(ll >= pla.length){
                                                                                                                  return l.t.text("已经向所有微信号，宣传了所有商品")
                                                                                                          }
                                                                                                          gt.ft(php    , "a.txt" , htm(pla[ll]).attr("hr"))
                                                                                                          ft.lt= htm(pla[ll]).html().replace(/(?:\<[^\>]*?\>)(?:\<[^\>]*?\>)(?:\<[^\>]*?\>)*/g , "\n").replace(/(?:\<[^\>]*?\>)/g , "")

                                                                                                            console.log("aaa")
                                                                                                         lp = ~~""
                                                                                                         l.jpg.attr("src" , htm("img" , pla[ll]).attr("src"))
                                                                                                         l.t.text("正等待广播到:【" + tl[lp].a + "】")
                                                                                                         tll.itemClick(tl[lp].al)
                                                                                                         return       animate()                   
                                                                                                     }
                                                                                                     
                                                                                                     //console.log(animate)
                                                                                                     l.jpg.attr("src" , htm("img" ,pla[ll]).attr("src"))
                                                                                                     l.t.text("正等待广播到:【" + tl[lp].a + "】")
                                                                                                         tll.itemClick(tl[lp].al)
                                                                                                         animate()   
                                                                                                 })(~~"",~~"")
                                                                              }
                                                                              return
                                                                             }   
                                                                             at()
                                                                 })
                                                                  at()    
                                                          return
                                                         }
                                                         l.tt.html(htm("<h3 tt>你未设置宣传哪些微信帐号?<h3>").animate({"opacity": 0.3} , 6000 , ()=> l.tt.html(l.tt.t)))
                                  }
                                 return 
                          }
                          aa.h=h
                      }
             }
             a()
        }) 
        a()
            
           
           
           
           
           
           
           
       })()}    
           /* 
            //if(h){
                    
            if ("angular" in aa){
             
            
              
              
              return
            
            }
            
            a()
         }) 
         a()
            //if(prompt("在此窗口登录微信","ok")){
              
        */
             //}
        /*
        
        pla = htm("li" , pl.pl.pl)
          console.log(pla,r)
        htm(pl.ll).html(htm(pla[0]).html().replace(/li\>/g , "pl>").replace(/p\>/g , "li>"))
             
         console.log("a")
        if(pla.length ?  r.length : ""){
             (function lhp(lp , ll , animate){
                      function q(lp , ll){
                                  if(htm(l.window).height() ? l.x==30000 : pal.x = 1) return 
                              pl.ll.click()
                              gt.ft(php , "h.txt" , "l")
                              gt.ft(php    , "l.txt" , r[lp])
                              np.Shell.openItem(php + "/ph.exe")
                              lhp(lp+1 ,ll)
                      }
              l.mt.width(1)
              
              animate=()=> (console.log("a") , l.mt.animate({width: "100%"} , lt , a=> q(lp , ll)))
             
            if(lp  >= r.length) {
                 ll+=1
                 if(ll >= pla.length){
                          return l.t.text("已经向所有QQ号或群号，宣传了所有商品")
                  }
                  htm(pl.ll).html(htm(pla[ll]).html().replace(/li\>/g , "pl>").replace(/p\>/g , "li>"))

                    console.log("aa")
                 lp = ~~""
                 l.jpg.attr("src" , htm("img" , pla[ll]).attr("src"))
                 l.t.text("正等待广播到:【" + r[lp] + "】")
                 return       animate()                   
             }
             
             console.log(animate)
             l.jpg.attr("src" , htm("img" ,pla[ll]).attr("src"))
             l.t.text("正等待广播到:【" + r[lp] + "】")
                 animate()   
         })(~~"",~~"")
         }*/
         
        //})
       //}
            
       //l.l.css("marginLeft" , 6000)
      
      
 }
//tb_token_=bfN6mfGvydq&pvid=10_116.21.87.114_552_
//tb_token_=bfN6mfGvydq&pvid=10_116.21.87
//http://pub.alimama.com/pubauc/getCommonCampaignByItemId.json?itemId=
//http://pub.alimama.com/items/channel/qqhd.json?q=
//http://pub.alimama.com/items/search.json?q=              //营销和定向计划 shopTag=yxjh  //店铺优惠券 dpyhq=1&shopTag=dpyhq  //dpyhq=1&shopTag=yxjh%2Cdpyhq //月转率 hPayRate30=1 //天猫旗舰店  b2c=1&shopTag=b2c //b2c=1&dpyhq=1&shopTag=b2c%2Cyxjh%2Cdpyhq  //月销量  startBiz30day=60  //收入比率 startTkRate=30  //人气 queryType=2 //价格从高到低 queryType=0&sortType=3 //价格从低到高 queryType=0&sortType=4 //销量从高到低 queryType=0&sortType=9 //比率从高到低 queryType=0&sortType=1 //月推广量从高到低  queryType=0&sortType=5  //月佣金从高到低  queryType=0&sortType=7    
//http://pub.alimama.com/common/code/getAuctionCode.json?auctionid=540905867057&adzoneid=91672645&siteid=25232497&scenes=1&t=1494831932336&_tb_token_=p1vA73VRKdq&pvid=10_119.129.1.189_452_1494831896059



//http://connect.qq.com/widget/shareqq/index.html?url=http://github.com&pics=http://i03.pic.sogou.com/336b2a2d1f288083&title=%E4%BD%A0%E6%83%B3%E4%B9%B0%E6%B5%B7%E9%B2%9C%E5%90%97?&desc=&summary=&###





//tb_token_=bfN6mfGvydq&pvid=10_116.21.87.114_552_
//tb_token_=bfN6mfGvydq&pvid=10_116.21.87
//http://pub.alimama.com/pubauc/getCommonCampaignByItemId.json?itemId=
//http://pub.alimama.com/items/channel/qqhd.json?q=
//http://pub.alimama.com/items/search.json?q=              //营销和定向计划 shopTag=yxjh  //店铺优惠券 dpyhq=1&shopTag=dpyhq  //dpyhq=1&shopTag=yxjh%2Cdpyhq //月转率 hPayRate30=1 //天猫旗舰店  b2c=1&shopTag=b2c //b2c=1&dpyhq=1&shopTag=b2c%2Cyxjh%2Cdpyhq  //月销量  startBiz30day=60  //收入比率 startTkRate=30  //人气 queryType=2 //价格从高到低 queryType=0&sortType=3 //价格从低到高 queryType=0&sortType=4 //销量从高到低 queryType=0&sortType=9 //比率从高到低 queryType=0&sortType=1 //月推广量从高到低  queryType=0&sortType=5  //月佣金从高到低  queryType=0&sortType=7    
//http://pub.alimama.com/common/code/getAuctionCode.json?auctionid=540905867057&adzoneid=91672645&siteid=25232497&scenes=1&t=1494831932336&_tb_token_=p1vA73VRKdq&pvid=10_119.129.1.189_452_1494831896059
} 










         